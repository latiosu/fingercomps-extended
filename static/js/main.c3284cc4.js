/*! For license information please see main.c3284cc4.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var O,M=Object.assign;function j(e){if(void 0===O)try{throw Error()}catch(jc){var t=jc.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var $=!1;function V(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Mc){var r=Mc}Reflect.construct(e,[],t)}else{try{t.call()}catch(Mc){r=Mc}e.call(t.prototype)}else{try{throw Error()}catch(Mc){r=Mc}e()}}catch(Mc){if(Mc&&r&&"string"===typeof Mc.stack){for(var i=Mc.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return z(e(t))}catch(jc){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ut){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Ee(e){if(e=bi(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),we(e.stateNode,e.type,t))}}function Ce(e){Se?ke?ke.push(e):ke=[e]:Se=e}function xe(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==Se||null!==ke)&&(Ie(),xe())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ae=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(Oc){Ae=!1}function Fe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(Wc){this.onError(Wc)}}var Le=!1,Oe=null,Me=!1,je=null,$e={onError:function(e){Le=!0,Oe=e}};function Ve(e,t,n,r,i,s,o,a,l){Le=!1,Oe=null,Fe.apply($e,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Be(e){if(Ue(e)!==e)throw Error(s(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Be(i),e;if(o===r)return Be(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/at|0)|0},ot=Math.log,at=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Et,Ct,xt=!1,Tt=[],It=null,Nt=null,Pt=null,Rt=new Map,At=new Map,Dt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function $t(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ye=r,n.target.dispatchEvent(r),ye=null,t.shift()}return!0}function Vt(e,t,n){$t(e)&&n.delete(t)}function Ut(){xt=!1,null!==It&&$t(It)&&(It=null),null!==Nt&&$t(Nt)&&(Nt=null),null!==Pt&&$t(Pt)&&(Pt=null),Rt.forEach(Vt),At.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=yt,s=qt.transition;qt.transition=null;try{yt=1,Kt(e,t,n,r)}finally{yt=i,qt.transition=s}}function Gt(e,t,n,r){var i=yt,s=qt.transition;qt.transition=null;try{yt=4,Kt(e,t,n,r)}finally{yt=i,qt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Ot(It,e,t,n,r,i),!0;case"dragenter":return Nt=Ot(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Ot(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Ot(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ft.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&wt(s),null===(s=Xt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=yi(e=be(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Je:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function on(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,ln,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=on(cn),dn=M({},cn,{view:0,detail:0}),fn=on(dn),pn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=on(pn),mn=on(M({},pn,{dataTransfer:0})),vn=on(M({},dn,{relatedTarget:0})),_n=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(M({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Cn}var Tn=M({},dn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Tn),Nn=on(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Rn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(An),Fn=[9,13,27,32],Ln=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Mn=c&&"TextEvent"in window&&!On,jn=c&&(!Ln||On&&8<On&&11>=On),$n=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Gr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){$r(e,0)}function Xn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Gn&&(Gn.detachEvent("onpropertychange",rr),Kn=Gn=null)}function rr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Wn(t,Kn,e,be(e)),Pe(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Kn=n,(Gn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function or(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Vc){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hr(n,s);var o=hr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,_r=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==K(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(_r,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Er={},Cr={};function xr(e){if(Er[e])return Er[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Er[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=xr("animationend"),Ir=xr("animationiteration"),Nr=xr("animationstart"),Pr=xr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),l(t,[e])}for(var Fr=0;Fr<Ar.length;Fr++){var Lr=Ar[Fr];Dr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Ir,"onAnimationIteration"),Dr(Nr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Pr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=Oe;Le=!1,Oe=null,Me||(Me=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function $r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,u),s=l}}}if(Me)throw e=je,Me=!1,je=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=hn,u=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Tr:case Ir:case Nr:l=_n;break;case Pr:l=Rn;break;case"scroll":l=fn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Re(p,d))&&c.push(Wr(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ye||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[gi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==u?a:wi(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Kr(f))p++;for(f=0,g=d;g;g=Kr(g))f++;for(;0<p-f;)c=Kr(c),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==l&&Qr(o,a,l,c,!1),null!==u&&null!==h&&Qr(o,h,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Hn(a))if(Jn)m=ar;else{m=sr;var v=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(vr=v,_r=r,yr=null);break;case"focusout":yr=_r=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var _;if(Ln)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bn&&(_=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Gr(r,y)).length&&(y=new wn(y,e,null,n,i),o.push({event:y,listeners:v}),_?y.data=_:null!==(_=zn(n))&&(y.data=_))),(_=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,$n);case"textInput":return(e=t.data)===$n&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Ln&&Un(e,t)?(e=tn(),en=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=_))}$r(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Re(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,gi="__reactContainer$"+di,mi="__reactEvents$"+di,vi="__reactListeners$"+di,_i="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[fi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[pi]||null}var ki=[],Ei=-1;function Ci(e){return{current:e}}function xi(e){0>Ei||(e.current=ki[Ei],ki[Ei]=null,Ei--)}function Ti(e,t){Ei++,ki[Ei]=e.current,e.current=t}var Ii={},Ni=Ci(Ii),Pi=Ci(!1),Ri=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fi(){xi(Pi),xi(Ni)}function Li(e,t,n){if(Ni.current!==Ii)throw Error(s(168));Ti(Ni,t),Ti(Pi,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,B(e)||"Unknown",i));return M({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ri=Ni.current,Ti(Ni,e),Ti(Pi,Pi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,xi(Pi),xi(Ni),Ti(Ni,e)):xi(Pi),Ti(Pi,n)}var $i=null,Vi=!1,Ui=!1;function zi(e){null===$i?$i=[e]:$i.push(e)}function Bi(){if(!Ui&&null!==$i){Ui=!0;var e=0,t=yt;try{var n=$i;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$i=null,Vi=!1}catch(Nc){throw null!==$i&&($i=$i.slice(e+1)),We(Je,Bi),Nc}finally{yt=t,Ui=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Ki=[],Qi=0,Xi=null,Yi=1,Ji="";function Zi(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function es(e,t,n){Ki[Qi++]=Yi,Ki[Qi++]=Ji,Ki[Qi++]=Xi,Xi=e;var r=Yi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-st(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Xi;)Xi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null,Yi=Ki[--Qi],Ki[Qi]=null}var rs=null,is=null,ss=!1,os=null;function as(e,t){var n=Au(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Au(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(us(e))throw Error(s(418));t=ci(n.nextSibling);var r=rs;t&&ls(e,t)?as(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(us(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ci(e.nextSibling)}function ps(){is=rs=null,ss=!1}function gs(e){null===os?os=[e]:os.push(e)}var ms=b.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function _s(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Fu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&ys(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case S:return(t=$u(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ou(t,e.mode,n,null)).return=e,t;_s(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);_s(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);_s(t,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),ss&&Zi(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return ss&&Zi(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ss&&Zi(i,g),u}function m(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,_=l.next();null!==g&&!_.done;m++,_=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=f(i,g,_.value,u);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(i,g),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y,g=v}if(_.done)return n(i,g),ss&&Zi(i,m),c;if(null===g){for(;!_.done;m++,_=l.next())null!==(_=d(i,_.value,u))&&(a=o(_,a,m),null===h?c=_:h.sibling=_,h=_);return ss&&Zi(i,m),c}for(g=r(i,g);!_.done;m++,_=l.next())null!==(_=p(g,i,m,_.value,u))&&(e&&null!==_.alternate&&g.delete(null===_.key?m:_.key),a=o(_,a,m),null===h?c=_:h.sibling=_,h=_);return e&&g.forEach((function(e){return t(i,e)})),ss&&Zi(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===A&&ys(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=vs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((s=Ou(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lu(o.type,o.key,o.props,null,r.mode,l)).ref=vs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=$u(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);_s(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=ju(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),Ss=bs(!1),ks=Ci(null),Es=null,Cs=null,xs=null;function Ts(){xs=Cs=Es=null}function Is(e){var t=ks.current;xi(ks),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Es=e,xs=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(xs!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Es)throw Error(s(308));Cs=e,Es.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var As=null;function Ds(e){null===As?As=[e]:As.push(e)}function Fs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ls(e,r)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ls(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ls(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=Ci(Hs),Gs=Ci(Hs),Ks=Ci(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Xs(e,t){switch(Ti(Ks,t),Ti(Gs,e),Ti(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ws),Ti(Ws,t)}function Ys(){xi(Ws),xi(Gs),xi(Ks)}function Js(e){Qs(Ks.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Ti(Gs,e),Ti(Ws,n))}function Zs(e){Gs.current===e&&(xi(Ws),xi(Gs))}var eo=Ci(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,uo=null,co=!1,ho=!1,fo=0,po=0;function go(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function vo(e,t,n,r,i,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(s(301));o+=1,uo=lo=null,t.updateQueue=null,io.current=na,e=n(r,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,oo=0,uo=lo=ao=null,co=!1,t)throw Error(s(300));return e}function _o(){var e=0!==fo;return fo=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===uo?ao.memoizedState=uo=e:uo=uo.next=e,uo}function bo(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===uo?ao.memoizedState:uo.next;if(null!==t)uo=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===uo?ao.memoizedState=uo=e:uo=uo.next=e}return uo}function wo(e,t){return"function"===typeof t?t(e):t}function So(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=lo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((oo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,ao.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,lr(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ao.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ko(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);lr(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Co(e,t){var n=ao,r=bo(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Mo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==uo&&1&uo.memoizedState.tag){if(n.flags|=2048,Ao(9,To.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&oo)||xo(n,t,i)}return i}function xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Po(e)}function Io(e,t,n){return n((function(){No(t)&&Po(e)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(Vc){return!0}}function Po(e){var t=Ls(e,1);null!==t&&ru(t,e,1,-1)}function Ro(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return bo().memoizedState}function Fo(e,t,n,r){var i=yo();ao.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}ao.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Oo(e,t){return Fo(8390656,8,e,t)}function Mo(e,t){return Lo(2048,8,e,t)}function jo(e,t){return Lo(4,2,e,t)}function $o(e,t){return Lo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Vo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(lr(n,t)||(n=gt(),ao.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{yt=n,so.transition=r}}function Go(){return bo().memoizedState}function Ko(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e))Yo(t,n);else if(null!==(n=Fs(e,t,n,r))){ru(n,e,r,tu()),Jo(n,t,r)}}function Qo(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Mc){}null!==(n=Fs(e,t,i,r))&&(ru(n,e,r,i=tu()),Jo(n,t,r))}}function Xo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Yo(e,t){ho=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_t(e,n)}}var Zo={readContext:Rs,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ro,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Wo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ao,i=yo();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&oo)||xo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(Io.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:jo,useLayoutEffect:$o,useMemo:qo,useReducer:So,useRef:Do,useState:function(){return So(wo)},useDebugValue:zo,useDeferredValue:function(e){return Ho(bo(),lo.memoizedState,e)},useTransition:function(){return[So(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Go,unstable_isNewReconciler:!1},na={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:jo,useLayoutEffect:$o,useMemo:qo,useReducer:ko,useRef:Do,useState:function(){return ko(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===lo?t.memoizedState=e:Ho(t,lo.memoizedState,e)},useTransition:function(){return[ko(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Go,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=$s(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ru(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=$s(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ru(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=$s(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(ru(t,e,r,n),Us(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function aa(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Di(t)?Ri:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ua(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Di(t)?Ri:Ni.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(jc){setTimeout((function(){throw jc}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=$s(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),da(0,t)},n}function ga(e,t,n){(n=$s(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xu.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$s(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?Ss(t,null,n,r):ws(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=vo(e,t,n,r,s,i),n=_o(),null===e||ba?(ss&&n&&ts(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Du(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Fu(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Fl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Fl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Fl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Fl,Dl),Dl|=r;return wa(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Di(n)?Ri:Ni.current;return s=Ai(t,s),Ps(t,i),n=vo(e,t,n,r,s,i),r=_o(),null===e||ba?(ss&&r&&ts(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Ps(t,i),null===t.stateNode)qa(e,t),aa(t,n,r),ua(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Rs(u):u=Ai(t,u=Di(n)?Ri:Ni.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&la(t,o,r,u),Os=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Pi.current||Os?("function"===typeof c&&(ia(t,n,c,r),l=t.memoizedState),(a=Os||oa(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,js(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ra(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Ai(t,l=Di(n)?Ri:Ni.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(t,o,r,l),Os=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Pi.current||Os?("function"===typeof f&&(ia(t,n,f,r),p=t.memoizedState),(u=Os||oa(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){xa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ha(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Xs(e,t.containerInfo)}function Ra(e,t,n,r,i){return ps(),gs(i),t.flags|=256,wa(e,t,n,r),t.child}var Aa,Da,Fa,La,Oa={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,i=t.pendingProps,o=eo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(eo,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mu(l,i,0,null),e=Ou(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Oa,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(o=Ou(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Oa,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ls(e,i),ru(r,e,i,-1))}return mu(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,is=ci(i.nextSibling),rs=t,ss=!0,os=null,null!==e&&(Ki[Qi++]=Yi,Ki[Qi++]=Ji,Ki[Qi++]=Xi,Yi=e.id,Ji=e.overflow,Xi=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Fu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Fu(r,a):(a=Ou(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,i}return e=(a=e.child).sibling,i=Fu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $a(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&gs(r),ws(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Di(t.type)&&Fi(),Ga(t),null;case 3:return r=t.stateNode,Ys(),xi(Pi),xi(Ni),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(au(os),os=null))),Da(e,t),Ga(t),null;case 5:Zs(t);var i=Qs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ks.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ga(t),null;case 13:if(xi(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==os&&(au(os),os=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Ll&&(Ll=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return Ys(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Is(t.type._context),Ga(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Ga(t),null}else 2*Xe()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=eo.current,Ti(eo,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ns(t),t.tag){case 1:return Di(t.type)&&Fi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),xi(Pi),xi(Ni),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return Ys(),null;case 10:return Is(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Fa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ya=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Vc){Cu(e,t,Vc)}else n.current=null}function tl(e,t,n){try{n()}catch(Vc){Cu(e,t,Vc)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[mi],delete t[vi],delete t[_i])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(Uc){}switch(n.tag){case 5:Ya||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ya&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Uc){Cu(n,t,Uc)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,fl(e,t,n),Ya=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(Mc){Cu(i,t,Mc)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),_l(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(Pc){Cu(e,e.return,Pc)}try{rl(5,e,e.return)}catch(Pc){Cu(e,e.return,Pc)}}break;case 1:ml(t,e),_l(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),_l(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(Pc){Cu(e,e.return,Pc)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),_e(l,a);var c=_e(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?ce(i,d):"children"===h?he(i,d):y(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(Pc){Cu(e,e.return,Pc)}}break;case 6:if(ml(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(Pc){Cu(e,e.return,Pc)}}break;case 3:if(ml(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(Pc){Cu(e,e.return,Pc)}break;case 4:default:ml(t,e),_l(e);break;case 13:ml(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(c=Ya)||h,ml(t,e),Ya=c):ml(t,e),_l(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(Pc){Cu(r,n,Pc)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",a))}catch(Pc){Cu(e,e.return,Pc)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(Pc){Cu(e,e.return,Pc)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),_l(e),4&r&&gl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Cu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Xa;var u=Ya;if(Xa=o,(Ya=l)&&!u)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Za=l):kl(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Xa=a,Ya=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):wl(e)}}function wl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&sl(t)}catch(Ac){Cu(t,t.return,Ac)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Cu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Cu(t,o,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,Cl=Math.ceil,xl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Nl=0,Pl=null,Rl=null,Al=0,Dl=0,Fl=Ci(0),Ll=0,Ol=null,Ml=0,jl=0,$l=0,Vl=null,Ul=null,zl=0,Bl=1/0,ql=null,Hl=!1,Wl=null,Gl=null,Kl=!1,Ql=null,Xl=0,Yl=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Nl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Al?Al&-Al:null!==ms.transition?(0===eu&&(eu=gt()),eu):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ru(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(jl|=n),4===Ll&&lu(e,Al)),iu(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Bl=Xe()+500,Vi&&Bi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-st(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),ai((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Pu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Nl;Nl|=2;var o=gu();for(Pl===e&&Al===t||(ql=null,Bl=Xe()+500,fu(e,t));;)try{yu();break}catch(Uc){pu(e,Uc)}Ts(),xl.current=o,Nl=i,null!==Rl?t=0:(Pl=null,Al=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ol,fu(e,0),lu(e,r),iu(e,Xe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ol,fu(e,0),lu(e,r),iu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Su(e,Ul,ql);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Su.bind(null,e,Ul,ql),t);break}Su(e,Ul,ql);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ii(Su.bind(null,e,Ul,ql),r);break}Su(e,Ul,ql);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Ul,Ul=n,null!==t&&au(t)),e}function au(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lu(e,t){for(t&=~$l,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Nl))throw Error(s(327));ku();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ol,fu(e,0),lu(e,t),iu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,Ul,ql),iu(e,Xe()),null}function cu(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Bl=Xe()+500,Vi&&Bi())}}function hu(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&ku();var t=Nl;Nl|=1;var n=Il.transition,r=yt;try{if(Il.transition=null,yt=1,e)return e()}finally{yt=r,Il.transition=n,0===(6&(Nl=t))&&Bi()}}function du(){Dl=Fl.current,xi(Fl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fi();break;case 3:Ys(),xi(Pi),xi(Ni),ro();break;case 5:Zs(r);break;case 4:Ys();break;case 13:case 19:xi(eo);break;case 10:Is(r.type._context);break;case 22:case 23:du()}n=n.return}if(Pl=e,Rl=e=Fu(e.current,null),Al=Dl=t,Ll=0,Ol=null,$l=jl=Ml=0,Ul=Vl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function pu(e,t){for(;;){var n=Rl;try{if(Ts(),io.current=Zo,co){for(var r=ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(oo=0,uo=lo=ao=null,ho=!1,fo=0,Tl.current=null,null===n||null===n.return){Ll=1,Ol=t,Rl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Al,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&ma(o,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ma(o,c,t),mu();break e}u=Error(s(426))}else if(ss&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),_a(v,a,l,0,t),gs(ca(u,l));break e}}o=u=ca(u,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(0,u,t));break e;case 1:l=u;var _=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof _.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gu(){var e=xl.current;return xl.current=Zo,null===e?Zo:e}function mu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Ml)&&0===(268435455&jl)||lu(Pl,Al)}function vu(e,t){var n=Nl;Nl|=2;var r=gu();for(Pl===e&&Al===t||(ql=null,fu(e,t));;)try{_u();break}catch(Nc){pu(e,Nc)}if(Ts(),Nl=n,xl.current=r,null!==Rl)throw Error(s(261));return Pl=null,Al=0,Ll}function _u(){for(;null!==Rl;)bu(Rl)}function yu(){for(;null!==Rl&&!Ke();)bu(Rl)}function bu(e){var t=El(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?wu(e):Rl=t,Tl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Su(e,t,n){var r=yt,i=Il.transition;try{Il.transition=null,yt=1,function(e,t,n,r){do{ku()}while(null!==Ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Rl=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pu(et,(function(){return ku(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=yt;yt=1;var l=Nl;Nl|=4,Tl.current=null,function(e,t){if(ti=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Mt){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:ra(t.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(Mt){Cu(t,t.return,Mt)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),gr(ni),Ht=!!ti,ni=ti=null,e.current=n,yl(n,e,i),Qe(),Nl=l,yt=a,Il.transition=o}else e.current=n;if(Kl&&(Kl=!1,Ql=e,Xl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Xl)&&0!==e.tag&&ku(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Bi()}(e,t,n,r)}finally{Il.transition=i,yt=r}return null}function ku(){if(null!==Ql){var e=bt(Xl),t=Il.transition,n=yt;try{if(Il.transition=null,yt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Xl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,Za=_;break e}Za=o.return}}var y=e.current;for(Za=y;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=y;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Cu(l,l.return,S)}if(l===a){Za=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Za=w;break e}Za=l.return}}if(Nl=i,Bi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(S){}r=!0}return r}finally{yt=n,Il.transition=t}}return!1}function Eu(e,t,n){e=Vs(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function Cu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Vs(t,e=ga(t,e=ca(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function xu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>Xe()-zl?fu(e,0):$l|=n),iu(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ls(e,t))&&(vt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tu(e,n)}function Pu(e,t){return We(e,t)}function Ru(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Au(e,t,n,r){return new Ru(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fu(e,t){var n=e.alternate;return null===n?((n=Au(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Du(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Ou(n.children,i,o,t);case E:a=8,i|=8;break;case C:return(e=Au(12,n,t,2|i)).elementType=C,e.lanes=o,e;case N:return(e=Au(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Au(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Mu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case T:a=9;break e;case I:a=11;break e;case R:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Au(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ou(e,t,n,r){return(e=Au(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Au(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Au(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Au(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,s,o,a,l){return e=new Vu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Au(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zu(e){if(!e)return Ii;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Oi(e,n,t)}return t}function Bu(e,t,n,r,i,s,o,a,l){return(e=Uu(n,r,!0,e,0,s,0,a,l)).context=zu(null),n=e.current,(s=$s(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function qu(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=$s(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,o))&&(ru(e,i,o,s),Us(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),ps();break;case 5:Js(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ks,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ti(eo,1&eo.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ss&&0!==(1048576&t.flags)&&es(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ai(t,Ni.current);Ps(t,n),i=vo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ua(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,ss&&o&&ts(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,js(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ca(Error(s(424)),t));break e}for(is=ci(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,os=null,n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ha(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),xa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ks,r._currentValue),r._currentValue=a,null!==o)if(lr(o.value,a)){if(o.children===i.children&&!Pi.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=$s(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ns(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ns(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Rs(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),ka(e,t,r,i=ra(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),qa(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ps(t,n),aa(t,r,i),ua(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Qu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hu(o);a.call(e)}}qu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hu(o);s.call(e)}}var o=Bu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[gi]=o.current,Br(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hu(l);a.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[gi]=l.current,Br(8===e.nodeType?e.parentNode:e),hu((function(){qu(t,l,n,r)})),l}(n,t,e,i,r);return Hu(o)}Xu.prototype.render=Qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qu(e,t,null,null)},Xu.prototype.unmount=Qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){qu(null,e,null,null)})),t[gi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),iu(t,Xe()),0===(6&Nl)&&(Bl=Xe()+500,Bi()))}break;case 13:hu((function(){var t=Ls(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Gu(e,1)}},St=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)ru(t,e,134217728,tu());Gu(e,134217728)}},kt=function(e){if(13===e.tag){var t=nu(e),n=Ls(e,t);if(null!==n)ru(n,e,t,tu());Gu(e,t)}},Et=function(){return yt},Ct=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cu,Ie=hu;var tc={usingClientEntryPoint:!1,Events:[bi,wi,Si,Ce,xe,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{rt=ic.inject(rc),it=ic}catch(Oc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(s(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bu(t,null,e,1,null!=n?n:null,i,0,o,a),e[gi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[gi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function _(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var b=y.prototype=new _;b.constructor=y,g(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var u=0;u<e.length;u++){var c=s+I(a=e[u],u);l+=N(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,c=s+I(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},F={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(m=!1,b(e),!g)if(null!==r(u))g=!0,D(S);else{var t=r(c);null!==t&&F(w,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,_(x),x=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&F(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,C=null,x=-1,T=5,I=-1;function N(){return!(t.unstable_now()-I<T)}function P(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?k():(E=!1,C=null)}}else E=!1}if("function"===typeof y)k=function(){y(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,k=function(){A.postMessage(null)}}else k=function(){v(P,0)};function D(e){C=e,E||(E=!0,k())}function F(e,n){x=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(_(x),x=-1):m=!0,F(w,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".6bd6aeb1.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(Nc){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="fingercomps-extended:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/fingercomps-extended/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkfingercomps_extended=self.webpackChunkfingercomps_extended||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(Nc){console.error("base64Decode failed: ",Nc)}return null};const c=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return c()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/fingercomps-extended",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Nc){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(Nc){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Nc}`)}},d=e=>{const t=(e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Nc){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v(){try{return"object"===typeof indexedDB}catch(Nc){return!1}}class _ extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.create)}}class y{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(b,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new _(n,s,t)}}const b=/\{\$([^}]+)}/g;function w(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!w(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function k(e){return e&&e._delegate?e._delegate:e}class E{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const C="[DEFAULT]";class x{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new p;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Nc){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Nc){if(r)return null;throw Nc}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:C})}catch(Nc){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Nc){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===C?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;return this.component?this.component.multipleInstances?e:C:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const I=[];var N;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(N||(N={}));const P={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},R=N.INFO,A={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},D=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=A[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class F{constructor(e){this.name=e,this._logLevel=R,this._logHandler=D,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in N))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?P[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...t),this._logHandler(this,N.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...t),this._logHandler(this,N.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,N.INFO,...t),this._logHandler(this,N.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,N.WARN,...t),this._logHandler(this,N.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,N.ERROR,...t),this._logHandler(this,N.ERROR,...t)}}let L,O;const M=new WeakMap,j=new WeakMap,$=new WeakMap,V=new WeakMap,U=new WeakMap;let z={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return j.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function B(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(W(this),n),H(M.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H(e.apply(W(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(W(this),t,...r);return $.set(s,t.sort?t.sort():[t]),H(s)}}function q(e){return"function"===typeof e?B(e):(e instanceof IDBTransaction&&function(e){if(j.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));j.set(e,t)}(e),t=e,(L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,z):e);var t}function H(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(H(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&M.set(t,e)})).catch((()=>{})),U.set(t,e),t}(e);if(V.has(e))return V.get(e);const t=q(e);return t!==e&&(V.set(e,t),U.set(t,e)),t}const W=e=>U.get(e);const G=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],Q=new Map;function X(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Q.get(t))return Q.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=K.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!G.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Q.set(t,s),s}z=(e=>({...e,get:(t,n,r)=>X(t,n)||e.get(t,n,r),has:(t,n)=>!!X(t,n)||e.has(t,n)}))(z);class Y{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const J="@firebase/app",Z="0.11.2",ee=new F("@firebase/app"),te="@firebase/app-compat",ne="@firebase/analytics-compat",re="@firebase/analytics",ie="@firebase/app-check-compat",se="@firebase/app-check",oe="@firebase/auth",ae="@firebase/auth-compat",le="@firebase/database",ue="@firebase/data-connect",ce="@firebase/database-compat",he="@firebase/functions",de="@firebase/functions-compat",fe="@firebase/installations",pe="@firebase/installations-compat",ge="@firebase/messaging",me="@firebase/messaging-compat",ve="@firebase/performance",_e="@firebase/performance-compat",ye="@firebase/remote-config",be="@firebase/remote-config-compat",we="@firebase/storage",Se="@firebase/storage-compat",ke="@firebase/firestore",Ee="@firebase/vertexai",Ce="@firebase/firestore-compat",xe="firebase",Te="[DEFAULT]",Ie={[J]:"fire-core",[te]:"fire-core-compat",[re]:"fire-analytics",[ne]:"fire-analytics-compat",[se]:"fire-app-check",[ie]:"fire-app-check-compat",[oe]:"fire-auth",[ae]:"fire-auth-compat",[le]:"fire-rtdb",[ue]:"fire-data-connect",[ce]:"fire-rtdb-compat",[he]:"fire-fn",[de]:"fire-fn-compat",[fe]:"fire-iid",[pe]:"fire-iid-compat",[ge]:"fire-fcm",[me]:"fire-fcm-compat",[ve]:"fire-perf",[_e]:"fire-perf-compat",[ye]:"fire-rc",[be]:"fire-rc-compat",[we]:"fire-gcs",[Se]:"fire-gcs-compat",[ke]:"fire-fst",[Ce]:"fire-fst-compat",[Ee]:"fire-vertex","fire-js":"fire-js",[xe]:"fire-js-all"},Ne=new Map,Pe=new Map,Re=new Map;function Ae(e,t){try{e.container.addComponent(t)}catch(Nc){ee.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Nc)}}function De(e){const t=e.name;if(Re.has(t))return ee.debug(`There were multiple attempts to register component ${t}.`),!1;Re.set(t,e);for(const n of Ne.values())Ae(n,e);for(const n of Pe.values())Ae(n,e);return!0}function Fe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Le=new y("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Oe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new E("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Le.create("app-deleted",{appName:this._name})}}function Me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Te,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Le.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Le.create("no-options");const s=Ne.get(i);if(s){if(w(n,s.options)&&w(r,s.config))return s;throw Le.create("duplicate-app",{appName:i})}const o=new T(i);for(const l of Re.values())o.addComponent(l);const a=new Oe(n,r,o);return Ne.set(i,a),a}function je(e,t,n){var r;let i=null!==(r=Ie[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ee.warn(e.join(" "))}De(new E(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const $e="firebase-heartbeat-store";let Ve=null;function Ue(){return Ve||(Ve=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=H(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(H(o.result),e.oldVersion,e.newVersion,H(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore($e)}catch(Nc){console.warn(Nc)}}}).catch((e=>{throw Le.create("idb-open",{originalErrorMessage:e.message})}))),Ve}async function ze(e,t){try{const n=(await Ue()).transaction($e,"readwrite"),r=n.objectStore($e);await r.put(t,Be(e)),await n.done}catch(Nc){if(Nc instanceof _)ee.warn(Nc.message);else{const t=Le.create("idb-set",{originalErrorMessage:null===Nc||void 0===Nc?void 0:Nc.message});ee.warn(t.message)}}}function Be(e){return`${e.name}!${e.options.appId}`}class qe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new We(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=He();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Nc){ee.warn(Nc)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=He(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ge(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ge(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(Nc){return ee.warn(Nc),""}}}function He(){return(new Date).toISOString().substring(0,10)}class We{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!v()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ue()).transaction($e),n=await t.objectStore($e).get(Be(e));return await t.done,n}catch(Nc){if(Nc instanceof _)ee.warn(Nc.message);else{const t=Le.create("idb-get",{originalErrorMessage:null===Nc||void 0===Nc?void 0:Nc.message});ee.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ze(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ze(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ge(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Ke;Ke="",De(new E("platform-logger",(e=>new Y(e)),"PRIVATE")),De(new E("heartbeat",(e=>new qe(e)),"PRIVATE")),je(J,Z,Ke),je(J,Z,"esm2017"),je("fire-js","");var Qe,Xe,Ye="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Je={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=_(n,1),s=_(r,1);for(r=_(r,2),n=_(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=_(r,1),n=_(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function _(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Xe=Je.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},Qe=Je.Integer=r}).apply("undefined"!==typeof Ye?Ye:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ze,et,tt,nt,rt,it,st,ot,at="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},lt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof at&&at];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function y(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new x),(e=>e.reset()));class x{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(jc){k(jc)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function A(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(jc){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var O={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),j=0;function $(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}U.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new $(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new U(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)F||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof U?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new U(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}h(le,A);var ue=[];function ce(e){_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&X(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){D.call(this,"d")}function ye(){D.call(this,"c")}h(_e,D),h(ye,D);var be={},we=null;function Se(){return we=we||new ne}function ke(e){D.call(this,be.La,e)}function Ee(e){const t=Se();re(t,new ke(t))}function Ce(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function xe(e){const t=Se();re(t,new Ce(t,e))}function Te(e,t){D.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(Wc){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(ke,D),be.STAT_EVENT="statevent",h(Ce,D),be.Ma="timingevent",h(Te,D),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Fe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(Fe,pe),Fe.prototype.g=function(){return new XMLHttpRequest},Fe.prototype.i=function(){return{}},Re=new Fe;var Me={},je={};function $e(e,t,n){e.L=1,e.v=St(vt(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=kn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||_n(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(Mc){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),an(n)}pn(n),xe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(Mc){}n.ca=void 0}}else bn(n,11)}else if((e.K||n.g==e)&&vn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ht(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),Be(a)),r.g=o}else fn(r);0<n.i.length&&un(n)}else"stop"!=u[0]&&"close"!=u[0]||bn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?bn(n,7):on(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ee()}catch(Mc){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=d||7==t||Ee(),He(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,xe(12),Ge(this),We(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==je){4==d&&(this.s=4,xe(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,xe(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ke(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,xe(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),gn(h),h.M=!0,xe(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),We(this)}else Pe(this.i,this.l,a,null),Ke(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?_n(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Ge(this),We(this)}}}catch(Qc){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),xe(17)),Ge(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ht(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ft(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Xe.prototype.cancel=function(){if(this.i=ft(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,_t(this,e.j),this.o=e.o,this.g=e.g,yt(this,e.s),this.l=e.l;var t=e.i,n=new Rt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,_t(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),yt(this,t[4]),this.l=kt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Rt(null,this.h))}function vt(e){return new mt(e)}function _t(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof Rt?(e.i=t,function(e,t){t&&!e.j&&(At(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Dt(this,t),Lt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,Nt)),e.i=new Rt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function St(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,xt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?It:Tt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,Pt)),e.join("")};var xt=/[#\/\?@]/g,Tt=/[#\?:]/g,It=/[#\?]/g,Nt=/[#\?@]/g,Pt=/#/g;function Rt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function At(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Dt(e,t){At(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ft(e,t){return At(e),t=Ot(e,t),e.g.has(t)}function Lt(e,t,n){Dt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),d(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function jt(){this.g=new fe}function $t(e,t,n){const r=n||"";try{pt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Nc){throw t.push(r+"type="+encodeURIComponent("_badmap")),Nc}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ut(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function zt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return _(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Gt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Rt.prototype).add=function(e,t){At(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){At(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){At(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){At(this);let t=[];if("string"===typeof e)Ft(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return At(this),this.i=null,Ft(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Vt,pe),Vt.prototype.g=function(){return new Ut(this.l,this.j)},Vt.prototype.i=function(e){return function(){return e}}({}),h(Ut,ne),(e=Ut.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):qt(this),3==this.readyState&&zt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ut.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Gt,ne);var Kt=/^https?$/i,Qt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),Zt(e)}function Yt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(gt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Kt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(Wc){a=""}e.l=a+" ["+e.Z()+"]",Yt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Nc){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ut){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=vt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),hn(e,n),(t=new Le(e,e.j,t)).L=2,t.v=St(vt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(Vc){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=kn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}wn(e)}function an(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function un(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),I||(T(),I=!0),N.add(t,e),e.B=0}}function cn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),hn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=dn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ht(e.h,n),$e(n,r,t)}function hn(e,t){e.H&&_(e.H,(function(e,n){wt(t,n,e)})),e.l&&pt({},(function(e,n){wt(t,n,e)}))}function dn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{$t(a,e,"req"+n+"_")}catch(Qc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),I||(T(),I=!0),N.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(u(e.Fa,e),yn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function mn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),hn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=St(vt(t)),n.m=null,n.P=!0,Ve(n,e)}function vn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function _n(e,t){var n=null;if(e.g==t){vn(e),gn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Te(r,n)),un(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(u(e.Ga,e,t),yn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:bn(e,5);break;case 4:bn(e,10);break;case 3:bn(e,6);break;default:bn(e,2)}}function yn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function bn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||_t(r,"https"),St(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=c(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Mt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Mt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Mt(0,0,!1,t)}))}(r.toString(),n)}else xe(2);e.G=0,e.l&&e.l.sa(t),wn(e),ln(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=ft(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof mt?vt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new mt(null);r&&_t(o,r),t&&(o.g=t),s&&yt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),hn(e,r),r}function kn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Vt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function Cn(){}function xn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nn(this)}function Tn(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){ye.call(this),this.status=1}function Nn(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Xt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Xt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Oc){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Oc){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){xe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),un(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=y(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dn(this,i,t),wt(n=vt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),hn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&Wt(n,this.m,s)),ht(this.h,i),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),i.T=!0,$e(i,n,null)):$e(i,n,t),this.G=2}}else 3==this.G&&(e?cn(this,e):0==this.i.length||Ye(this.h)||cn(this))},e.Fa=function(){if(this.u=null,mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),an(this),mn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),xe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new xn(e,t)},h(xn,ne),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){on(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&un(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,xn.aa.N.call(this)},h(Tn,_e),h(In,ye),h(Nn,En),Nn.prototype.ua=function(){re(this.g,"a")},Nn.prototype.ta=function(e){re(this.g,new Tn(e))},Nn.prototype.sa=function(e){re(this.g,new In)},Nn.prototype.ra=function(){re(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,ot=lt.createWebChannelTransport=function(){return new Cn},st=lt.getStatEventTarget=function(){return Se()},it=lt.Event=be,rt=lt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,nt=lt.ErrorCode=Ae,De.COMPLETE="complete",tt=lt.EventType=De,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,et=lt.WebChannel=me,lt.FetchXmlHttpFactory=Vt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,Ze=lt.XhrIo=Gt}).apply("undefined"!==typeof at?at:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ut="@firebase/firestore",ct="4.7.9";class ht{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");let dt="11.4.0";const ft=new F("@firebase/firestore");function pt(){return ft.logLevel}function gt(e){if(ft.logLevel<=N.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_t);ft.debug(`Firestore (${dt}): ${e}`,...i)}}function mt(e){if(ft.logLevel<=N.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_t);ft.error(`Firestore (${dt}): ${e}`,...i)}}function vt(e){if(ft.logLevel<=N.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(_t);ft.warn(`Firestore (${dt}): ${e}`,...i)}}function _t(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Pc){return e}}function yt(){const e=`FIRESTORE (${dt}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw mt(e),new Error(e)}function bt(e,t){e||yt()}function wt(e,t){return e}const St={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends _{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Et{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ct{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ht.UNAUTHENTICATED)))}shutdown(){}}class Tt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class It{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Et,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Et)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(bt("string"==typeof t.accessToken),new Ct(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new ht(e)}}class Nt{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Pt{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Nt(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ht.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class At{constructor(e,t){var n;this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){bt(void 0===this.o);const n=e=>{null!=e.error&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,gt("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Rt(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(bt("string"==typeof e.token),this.R=e.token,new Rt(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Dt(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ft{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Dt(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Lt(e,t){return e<t?-1:e>t?1:0}function Ot(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const Mt=-62135596800,jt=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*jt);return new $t(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new kt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new kt(St.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mt)throw new kt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kt(St.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jt}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Mt;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new $t(0,0))}static max(){return new Vt(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ut="__name__";class zt{constructor(e,t,n){void 0===t?t=0:t>e.length&&yt(),void 0===n?n=e.length-t:n>e.length-t&&yt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===zt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zt?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=zt.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=zt.isNumericId(e),r=zt.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?zt.extractNumericId(e).compare(zt.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qe.fromString(e.substring(4,e.length-2))}}class Bt extends zt{construct(e,t,n){return new Bt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new kt(St.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Bt(e)}static emptyPath(){return new Bt([])}}const qt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends zt{construct(e,t,n){return new Ht(e,t,n)}static isValidIdentifier(e){return qt.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ut}static keyField(){return new Ht([Ut])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new kt(St.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new kt(St.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new kt(St.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new kt(St.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(Bt.fromString(e))}static fromName(e){return new Wt(Bt.fromString(e).popFirst(5))}static empty(){return new Wt(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new Bt(e.slice()))}}const Gt=-1;class Kt{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Kt.UNKNOWN_ID=-1;function Qt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new $t(n+1,0):new $t(n,r));return new Yt(i,Wt.empty(),t)}function Xt(e){return new Yt(e.readTime,e.key,Gt)}class Yt{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yt(Vt.min(),Wt.empty(),Gt)}static max(){return new Yt(Vt.max(),Wt.empty(),Gt)}}function Jt(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Wt.comparator(e.documentKey,t.documentKey),0!==n?n:Lt(e.largestBatchId,t.largestBatchId))}const Zt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class en{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tn(e){if(e.code!==St.FAILED_PRECONDITION||e.message!==Zt)throw e;gt("LocalStore","Unexpectedly lost primary lease")}class nn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new nn(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof nn?t:nn.resolve(t)}catch(e){return nn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):nn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):nn.reject(t)}static resolve(e){return new nn(((t,n)=>{t(e)}))}static reject(e){return new nn(((t,n)=>{n(e)}))}static waitFor(e){return new nn(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=nn.resolve(!1);for(const n of e)t=t.next((e=>e?nn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new nn(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new nn(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function rn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sn(e){return"IndexedDbTransactionError"===e.name}class on{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}on.ae=-1;const an=-1;function ln(e){return null==e}function un(e){return 0===e&&1/e==-1/0}function cn(e){return"number"==typeof e&&Number.isInteger(e)&&!un(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const hn="\x01";function dn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=pn(t)),t=fn(e.get(n),t);return pn(t)}function fn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case hn:n+="\x01\x11";break;default:n+=t}}return n}function pn(e){return e+hn+"\x01"}const gn="remoteDocuments",mn="owner",vn="mutationQueues",_n="mutations";const yn="documentMutations",bn="remoteDocumentsV14",wn="remoteDocumentGlobal",Sn="targets",kn="targetDocuments",En="targetGlobal",Cn="collectionParents",xn="clientMetadata",Tn="bundles",In="namedQueries",Nn="indexConfiguration",Pn="indexState",Rn="indexEntries",An="documentOverlays",Dn="globals",Fn=[vn,_n,yn,gn,Sn,mn,En,kn,xn,wn,Cn,Tn,In],Ln=[vn,_n,yn,bn,Sn,mn,En,kn,xn,wn,Cn,Tn,In,An],On=Ln,Mn=[...On,Nn,Pn,Rn];function jn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $n(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Un{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zn(this.root,e,this.comparator,!1)}getReverseIterator(){return new zn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zn(this.root,e,this.comparator,!0)}}class zn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Bn.RED,this.left=null!=r?r:Bn.EMPTY,this.right=null!=i?i:Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Bn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Bn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt();if(this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1,Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hn(this.data.getIterator())}getIteratorFrom(e){return new Hn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof qn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class Hn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new qn(Ht.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ot(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Gn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Gn("Invalid base64 string: "+e):e}}(e);return new Kn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const Qn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(e){if(bt(!!e),"string"==typeof e){let t=0;const n=Qn.exec(e);if(bt(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yn(e.seconds),nanos:Yn(e.nanos)}}function Yn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jn(e){return"string"==typeof e?Kn.fromBase64String(e):Kn.fromUint8Array(e)}const Zn="server_timestamp",er="__type__",tr="__previous_value__",nr="__local_write_time__";function rr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[er])||void 0===n?void 0:n.stringValue)===Zn}function ir(e){const t=e.mapValue.fields[tr];return rr(t)?ir(t):t}function sr(e){const t=Xn(e.mapValue.fields[nr].timestampValue);return new $t(t.seconds,t.nanos)}class or{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const ar="(default)";class lr{constructor(e,t){this.projectId=e,this.database=t||ar}static empty(){return new lr("","")}get isDefaultDatabase(){return this.database===ar}isEqual(e){return e instanceof lr&&e.projectId===this.projectId&&e.database===this.database}}const ur="__type__",cr="__max__",hr={mapValue:{fields:{__type__:{stringValue:cr}}}},dr="__vector__",fr="value";function pr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rr(e)?4:Rr(e)?9007199254740991:Nr(e)?10:11:yt()}function gr(e,t){if(e===t)return!0;const n=pr(e);if(n!==pr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return sr(e).isEqual(sr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xn(e.timestampValue),r=Xn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jn(e.bytesValue).isEqual(Jn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yn(e.geoPointValue.latitude)===Yn(t.geoPointValue.latitude)&&Yn(e.geoPointValue.longitude)===Yn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yn(e.integerValue)===Yn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yn(e.doubleValue),r=Yn(t.doubleValue);return n===r?un(n)===un(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ot(e.arrayValue.values||[],t.arrayValue.values||[],gr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jn(n)!==jn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gr(n[i],r[i])))return!1;return!0}(e,t);default:return yt()}}function mr(e,t){return void 0!==(e.values||[]).find((e=>gr(e,t)))}function vr(e,t){if(e===t)return 0;const n=pr(e),r=pr(t);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yn(e.integerValue||e.doubleValue),r=Yn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _r(e.timestampValue,t.timestampValue);case 4:return _r(sr(e),sr(t));case 5:return Lt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jn(e),r=Jn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Lt(n[i],r[i]);if(0!==e)return e}return Lt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Lt(Yn(e.latitude),Yn(t.latitude));return 0!==n?n:Lt(Yn(e.longitude),Yn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return yr(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[fr])||void 0===n?void 0:n.arrayValue,u=null===(r=a[fr])||void 0===r?void 0:r.arrayValue,c=Lt((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:yr(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===hr.mapValue&&t===hr.mapValue)return 0;if(e===hr.mapValue)return 1;if(t===hr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Lt(r[o],s[o]);if(0!==e)return e;const t=vr(n[r[o]],i[s[o]]);if(0!==t)return t}return Lt(r.length,s.length)}(e.mapValue,t.mapValue);default:throw yt()}}function _r(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lt(e,t);const n=Xn(e),r=Xn(t),i=Lt(n.seconds,r.seconds);return 0!==i?i:Lt(n.nanos,r.nanos)}function yr(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=vr(n[i],r[i]);if(e)return e}return Lt(n.length,r.length)}function br(e){return wr(e)}function wr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xn(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Jn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Wt.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=wr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${wr(e.fields[i])}`;return n+"}"}(e.mapValue):yt()}function Sr(e){switch(pr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ir(e);return t?16+Sr(t):16;case 5:return 2*e.stringValue.length;case 6:return Jn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Sr(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return $n(e.fields,((e,n)=>{t+=e.length+Sr(n)})),t}(e.mapValue);default:throw yt()}}function kr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Er(e){return!!e&&"integerValue"in e}function Cr(e){return!!e&&"arrayValue"in e}function xr(e){return!!e&&"nullValue"in e}function Tr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ir(e){return!!e&&"mapValue"in e}function Nr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ur])||void 0===n?void 0:n.stringValue)===dr}function Pr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $n(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Pr(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Pr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Rr(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===cr}class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ir(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pr(t)}setAll(e){let t=Ht.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Pr(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ir(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ir(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){$n(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Ar(Pr(this.value))}}class Dr{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Dr(e,0,Vt.min(),Vt.min(),Vt.min(),Ar.empty(),0)}static newFoundDocument(e,t,n,r){return new Dr(e,1,t,Vt.min(),n,r,0)}static newNoDocument(e,t){return new Dr(e,2,t,Vt.min(),Vt.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,Vt.min(),Vt.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fr{constructor(e,t){this.position=e,this.inclusive=t}}function Lr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Wt.comparator(Wt.fromName(o.referenceValue),n.key):vr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Or(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!gr(e.position[n],t.position[n]))return!1;return!0}class Mr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function jr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class $r{}class Vr extends $r{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Kr(e,t,n):"array-contains"===t?new Jr(e,n):"in"===t?new Zr(e,n):"not-in"===t?new ei(e,n):"array-contains-any"===t?new ti(e,n):new Vr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Qr(e,n):new Xr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vr(t,this.value)):null!==t&&pr(this.value)===pr(t)&&this.matchesComparison(vr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends $r{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ur(e,t)}matches(e){return zr(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function zr(e){return"and"===e.op}function Br(e){return qr(e)&&zr(e)}function qr(e){for(const t of e.filters)if(t instanceof Ur)return!1;return!0}function Hr(e){if(e instanceof Vr)return e.field.canonicalString()+e.op.toString()+br(e.value);if(Br(e))return e.filters.map((e=>Hr(e))).join(",");{const t=e.filters.map((e=>Hr(e))).join(",");return`${e.op}(${t})`}}function Wr(e,t){return e instanceof Vr?function(e,t){return t instanceof Vr&&e.op===t.op&&e.field.isEqual(t.field)&&gr(e.value,t.value)}(e,t):e instanceof Ur?function(e,t){return t instanceof Ur&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Wr(n,t.filters[r])),!0)}(e,t):void yt()}function Gr(e){return e instanceof Vr?function(e){return`${e.field.canonicalString()} ${e.op} ${br(e.value)}`}(e):e instanceof Ur?function(e){return e.op.toString()+" {"+e.getFilters().map(Gr).join(" ,")+"}"}(e):"Filter"}class Kr extends Vr{constructor(e,t,n){super(e,t,n),this.key=Wt.fromName(n.referenceValue)}matches(e){const t=Wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qr extends Vr{constructor(e,t){super(e,"in",t),this.keys=Yr("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Xr extends Vr{constructor(e,t){super(e,"not-in",t),this.keys=Yr("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Wt.fromName(e.referenceValue)))}class Jr extends Vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cr(t)&&mr(t.arrayValue,this.value)}}class Zr extends Vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&mr(this.value.arrayValue,t)}}class ei extends Vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(mr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!mr(this.value.arrayValue,t)}}class ti extends Vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>mr(this.value.arrayValue,e)))}}class ni{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function ri(e){return new ni(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ii(e){const t=wt(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Hr(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ln(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>br(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>br(e))).join(",")),t.le=e}return t.le}function si(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Wr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Or(e.startAt,t.startAt)&&Or(e.endAt,t.endAt)}function oi(e){return Wt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ai{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function li(e,t,n,r,i,s,o,a){return new ai(e,t,n,r,i,s,o,a)}function ui(e){return new ai(e)}function ci(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hi(e){return null!==e.collectionGroup}function di(e){const t=wt(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new qn(Ht.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Mr(r,n))})),e.has(Ht.keyField().canonicalString())||t.he.push(new Mr(Ht.keyField(),n))}return t.he}function fi(e){const t=wt(e);return t.Pe||(t.Pe=pi(t,di(e))),t.Pe}function pi(e,t){if("F"===e.limitType)return ri(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Mr(e.field,t)}));const n=e.endAt?new Fr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Fr(e.startAt.position,e.startAt.inclusive):null;return ri(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function gi(e,t){const n=e.filters.concat([t]);return new ai(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function mi(e,t,n){return new ai(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function vi(e,t){return si(fi(e),fi(t))&&e.limitType===t.limitType}function _i(e){return`${ii(fi(e))}|lt:${e.limitType}`}function yi(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Gr(e))).join(", ")}]`),ln(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>br(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>br(e))).join(",")),`Target(${t})`}(fi(e))}; limitType=${e.limitType})`}function bi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Wt.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of di(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Lr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,di(e),t))&&!(e.endAt&&!function(e,t,n){const r=Lr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,di(e),t))}(e,t)}function wi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Si(e){return(t,n)=>{let r=!1;for(const i of di(e)){const e=ki(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ki(e,t,n){const r=e.field.isKeyField()?Wt.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vr(r,i):yt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}class Ei{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){$n(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Vn(this.inner)}size(){return this.innerSize}}const Ci=new Un(Wt.comparator);function xi(){return Ci}const Ti=new Un(Wt.comparator);function Ii(){let e=Ti;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ni(e){let t=Ti;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Pi(){return Ai()}function Ri(){return Ai()}function Ai(){return new Ei((e=>e.toString()),((e,t)=>e.isEqual(t)))}new Un(Wt.comparator);const Di=new qn(Wt.comparator);function Fi(){let e=Di;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Li=new qn(Lt);function Oi(){return Li}function Mi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:un(t)?"-0":t}}function ji(e){return{integerValue:""+e}}function $i(e,t){return cn(t)?ji(t):Mi(e,t)}class Vi{constructor(){this._=void 0}}function Ui(e,t,n){return e instanceof qi?function(e,t){const n={fields:{[er]:{stringValue:Zn},[nr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&rr(t)&&(t=ir(t)),t&&(n.fields[tr]=t),{mapValue:n}}(n,t):e instanceof Hi?Wi(e,t):e instanceof Gi?Ki(e,t):function(e,t){const n=Bi(e,t),r=Xi(n)+Xi(e.Ie);return Er(n)&&Er(e.Ie)?ji(r):Mi(e.serializer,r)}(e,t)}function zi(e,t,n){return e instanceof Hi?Wi(e,t):e instanceof Gi?Ki(e,t):n}function Bi(e,t){return e instanceof Qi?function(e){return Er(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class qi extends Vi{}class Hi extends Vi{constructor(e){super(),this.elements=e}}function Wi(e,t){const n=Yi(t);for(const r of e.elements)n.some((e=>gr(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Gi extends Vi{constructor(e){super(),this.elements=e}}function Ki(e,t){let n=Yi(t);for(const r of e.elements)n=n.filter((e=>!gr(e,r)));return{arrayValue:{values:n}}}class Qi extends Vi{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Xi(e){return Yn(e.integerValue||e.doubleValue)}function Yi(e){return Cr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zi(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class es{}function ts(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cs(e.key,Ji.none()):new ss(e.key,e.data,Ji.none());{const n=e.data,r=Ar.empty();let i=new qn(Ht.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new os(e.key,r,new Wn(i.toArray()),Ji.none())}}function ns(e,t,n){e instanceof ss?function(e,t,n){const r=e.value.clone(),i=ls(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof os?function(e,t,n){if(!Zi(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ls(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(as(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rs(e,t,n,r){return e instanceof ss?function(e,t,n,r){if(!Zi(e.precondition,t))return n;const i=e.value.clone(),s=us(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof os?function(e,t,n,r){if(!Zi(e.precondition,t))return n;const i=us(e.fieldTransforms,r,t),s=t.data;return s.setAll(as(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Zi(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function is(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ot(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hi&&t instanceof Hi||e instanceof Gi&&t instanceof Gi?Ot(e.elements,t.elements,gr):e instanceof Qi&&t instanceof Qi?gr(e.Ie,t.Ie):e instanceof qi&&t instanceof qi}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ss extends es{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class os extends es{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function as(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ls(e,t,n){const r=new Map;bt(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,zi(o,a,n[i]))}return r}function us(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ui(e,s,t))}return r}class cs extends es{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ns(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rs(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rs(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ri();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ts(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Vt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fi())}isEqual(e){return this.batchId===e.batchId&&Ot(this.mutations,e.mutations,((e,t)=>is(e,t)))&&Ot(this.baseMutations,e.baseMutations,((e,t)=>is(e,t)))}}class ds{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fs{constructor(e,t){this.count=e,this.unchangedNames=t}}var ps,gs;function ms(e){if(void 0===e)return mt("GRPC error has no .code"),St.UNKNOWN;switch(e){case ps.OK:return St.OK;case ps.CANCELLED:return St.CANCELLED;case ps.UNKNOWN:return St.UNKNOWN;case ps.DEADLINE_EXCEEDED:return St.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return St.RESOURCE_EXHAUSTED;case ps.INTERNAL:return St.INTERNAL;case ps.UNAVAILABLE:return St.UNAVAILABLE;case ps.UNAUTHENTICATED:return St.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return St.INVALID_ARGUMENT;case ps.NOT_FOUND:return St.NOT_FOUND;case ps.ALREADY_EXISTS:return St.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return St.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return St.FAILED_PRECONDITION;case ps.ABORTED:return St.ABORTED;case ps.OUT_OF_RANGE:return St.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return St.UNIMPLEMENTED;case ps.DATA_LOSS:return St.DATA_LOSS;default:return yt()}}(gs=ps||(ps={}))[gs.OK=0]="OK",gs[gs.CANCELLED=1]="CANCELLED",gs[gs.UNKNOWN=2]="UNKNOWN",gs[gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gs[gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gs[gs.NOT_FOUND=5]="NOT_FOUND",gs[gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",gs[gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",gs[gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",gs[gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gs[gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gs[gs.ABORTED=10]="ABORTED",gs[gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",gs[gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",gs[gs.INTERNAL=13]="INTERNAL",gs[gs.UNAVAILABLE=14]="UNAVAILABLE",gs[gs.DATA_LOSS=15]="DATA_LOSS";let vs=null;function _s(){return new TextEncoder}const ys=new Qe([4294967295,4294967295],0);function bs(e){const t=_s().encode(e),n=new Xe;return n.update(t),new Uint8Array(n.digest())}function ws(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Qe([n,r],0),new Qe([i,s],0)]}class Ss{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ks(`Invalid padding: ${t}`);if(n<0)throw new ks(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ks(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ks(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Qe.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Qe.fromNumber(n)));return 1===r.compare(ys)&&(r=new Qe([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=bs(e),[n,r]=ws(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ss(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=bs(e),[n,r]=ws(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ks extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Es{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Cs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Es(Vt.min(),r,new Un(Lt),xi(),Fi())}}class Cs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Cs(n,t,Fi(),Fi(),Fi())}}class xs{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Ts{constructor(e,t){this.targetId=e,this.ge=t}}class Is{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ns{constructor(){this.pe=0,this.ye=As(),this.we=Kn.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Fi(),t=Fi(),n=Fi();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yt()}})),new Cs(this.we,this.be,e,t,n)}Me(){this.Se=!1,this.ye=As()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,bt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Ps{constructor(e){this.ke=e,this.qe=new Map,this.Qe=xi(),this.$e=Rs(),this.Ke=Rs(),this.Ue=new Un(Lt)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:yt()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(oi(i))if(0===n){const e=new Wt(i.path);this.ze(t,e,Dr.newNoDocument(e,Vt.min()))}else bt(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,e)}null==vs||vs.rt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Jn(n).toUint8Array()}catch(e){if(e instanceof Gn)return vt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Ss(s,r,i)}catch(e){return vt(e instanceof ks?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&oi(i.target)){const t=new Wt(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,Dr.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Fi();this.Ke.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Es(e,t,this.Ue,this.Qe,n);return this.Qe=xi(),this.$e=Rs(),this.Ke=Rs(),this.Ue=new Un(Lt),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Ns,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new qn(Lt),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new qn(Lt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||gt("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Ns),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Rs(){return new Un(Wt.comparator)}function As(){return new Un(Wt.comparator)}const Ds={asc:"ASCENDING",desc:"DESCENDING"},Fs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ls={and:"AND",or:"OR"};class Os{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ms(e,t){return e.useProto3Json||ln(t)?t:{value:t}}function js(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $s(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vs(e){return bt(!!e),Vt.fromTimestamp(function(e){const t=Xn(e);return new $t(t.seconds,t.nanos)}(e))}function Us(e,t){return zs(e,t).canonicalString()}function zs(e,t){const n=function(e){return new Bt(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Bs(e){const t=Bt.fromString(e);return bt(so(t)),t}function qs(e,t){const n=Bs(t);if(n.get(1)!==e.databaseId.projectId)throw new kt(St.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kt(St.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Wt(Ks(n))}function Hs(e,t){return Us(e.databaseId,t)}function Ws(e){const t=Bs(e);return 4===t.length?Bt.emptyPath():Ks(t)}function Gs(e){return new Bt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ks(e){return bt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qs(e,t){return{documents:[Hs(e,t.path)]}}function Xs(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hs(e,i);const s=function(e){if(0!==e.length)return io(Ur.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:no(e.field),direction:Zs(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ms(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Ys(e){let t=Ws(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){bt(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Js(e);return t instanceof Ur&&Br(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Mr(ro(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ln(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Fr(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Fr(n,t)}(n.endAt)),li(t,i,o,s,a,"F",l,u)}function Js(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ro(e.unaryFilter.field);return Vr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ro(e.unaryFilter.field);return Vr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ro(e.unaryFilter.field);return Vr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ro(e.unaryFilter.field);return Vr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}(e):void 0!==e.fieldFilter?function(e){return Vr.create(ro(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ur.create(e.compositeFilter.filters.map((e=>Js(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return yt()}}(e.compositeFilter.op))}(e):yt()}function Zs(e){return Ds[e]}function eo(e){return Fs[e]}function to(e){return Ls[e]}function no(e){return{fieldPath:e.canonicalString()}}function ro(e){return Ht.fromServerFormat(e.fieldPath)}function io(e){return e instanceof Vr?function(e){if("=="===e.op){if(Tr(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NAN"}};if(xr(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Tr(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NOT_NAN"}};if(xr(e.value))return{unaryFilter:{field:no(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(e.field),op:eo(e.op),value:e.value}}}(e):e instanceof Ur?function(e){const t=e.getFilters().map((e=>io(e)));return 1===t.length?t[0]:{compositeFilter:{op:to(e.op),filters:t}}}(e):yt()}function so(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class oo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vt.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vt.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kn.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ao{constructor(e){this.Tt=e}}function lo(e){const t=Ys({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?mi(t,t.limit,"L"):t}class uo{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Yn(e.integerValue));else if("doubleValue"in e){const n=Yn(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),un(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=Xn(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Jn(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Rr(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Nr(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):yt()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=fr,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(Yn(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),Wt.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}uo.xt=new uo;class co{constructor(){this.Tn=new ho}addToCollectionParentIndex(e,t){return this.Tn.add(t),nn.resolve()}getCollectionParents(e,t){return nn.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return nn.resolve()}deleteFieldIndex(e,t){return nn.resolve()}deleteAllFieldIndexes(e){return nn.resolve()}createTargetIndexes(e,t){return nn.resolve()}getDocumentsMatchingTarget(e,t){return nn.resolve(null)}getIndexType(e,t){return nn.resolve(0)}getFieldIndexes(e,t){return nn.resolve([])}getNextCollectionGroupToUpdate(e){return nn.resolve(null)}getMinOffset(e,t){return nn.resolve(Yt.min())}getMinOffsetFromCollectionGroup(e,t){return nn.resolve(Yt.min())}updateCollectionGroup(e,t,n){return nn.resolve()}updateIndexEntries(e,t){return nn.resolve()}}class ho{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new qn(Bt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new qn(Bt.comparator)).toArray()}}new Uint8Array(0);const fo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},po=41943040;class go{static withCacheSize(e){return new go(e,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}go.DEFAULT_COLLECTION_PERCENTILE=10,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,go.DEFAULT=new go(po,go.DEFAULT_COLLECTION_PERCENTILE,go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),go.DISABLED=new go(-1,0,0);class mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new mo(0)}static Un(){return new mo(-1)}}const vo="LruGarbageCollector",_o=1048576;function yo(e,t){let[n,r]=e,[i,s]=t;const o=Lt(n,i);return 0===o?Lt(r,s):o}class bo{constructor(e){this.Hn=e,this.buffer=new qn(yo),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();yo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){gt(vo,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){sn(e)?gt(vo,"Ignoring IndexedDB error during garbage collection: ",e):await tn(e)}await this.er(3e5)}))}}class So{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return nn.resolve(on.ae);const n=new bo(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),nn.resolve(fo)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fo):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),pt()<=N.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),nn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ko(e,t){return new So(e,t)}class Eo{constructor(){this.changes=new Ei((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?nn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Co{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&rs(n.mutation,e,Wn.empty(),$t.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Fi()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fi();const r=Pi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ii();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Pi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Fi())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=xi();const s=Ai(),o=Ai();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof os)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),rs(o.mutation,t,o.mutation.getFieldMask(),$t.now())):s.set(t.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Co(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ai();let r=new Un(((e,t)=>e-t)),i=Fi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Wn.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Fi()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Ri();l.forEach((e=>{if(!i.has(e)){const r=ts(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return nn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Wt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):nn.resolve(Pi());let o=Gt,a=i;return s.next((t=>nn.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?nn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Fi()))).next((e=>({batchId:o,changes:Ni(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wt(t)).next((e=>{let t=Ii();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ii();return this.indexManager.getCollectionParents(e,i).next((o=>nn.forEach(o,(o=>{const a=function(e,t){return new ai(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Dr.newInvalidDocument(r)))}));let n=Ii();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&rs(s.mutation,r,Wn.empty(),$t.now()),bi(t,r)&&(n=n.insert(e,r))})),n}))}}class To{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return nn.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vs(e.createTime)}}(t)),nn.resolve()}getNamedQuery(e,t){return nn.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:lo(e.bundledQuery),readTime:Vs(e.readTime)}}(t)),nn.resolve()}}class Io{constructor(){this.overlays=new Un(Wt.comparator),this.Rr=new Map}getOverlay(e,t){return nn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Pi();return nn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),nn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),nn.resolve()}getOverlaysForCollection(e,t,n){const r=Pi(),i=t.length+1,s=new Wt(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return nn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Un(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Pi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Pi(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return nn.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ds(t,n));let i=this.Rr.get(t);void 0===i&&(i=Fi(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class No{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return nn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,nn.resolve()}}class Po{constructor(){this.Vr=new qn(Ro.mr),this.gr=new qn(Ro.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Ro(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new Ro(e,t))}br(e,t){e.forEach((e=>this.removeReference(e,t)))}Sr(e){const t=new Wt(new Bt([])),n=new Ro(t,e),r=new Ro(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Wt(new Bt([])),n=new Ro(t,e),r=new Ro(t,e+1);let i=Fi();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ro(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ro{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Wt.comparator(e.key,t.key)||Lt(e.Cr,t.Cr)}static pr(e,t){return Lt(e.Cr,t.Cr)||Wt.comparator(e.key,t.key)}}class Ao{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new qn(Ro.mr)}checkEmpty(e){return nn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new hs(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new Ro(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return nn.resolve(s)}lookupMutationBatch(e,t){return nn.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return nn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return nn.resolve(0===this.mutationQueue.length?an:this.Fr-1)}getAllMutationBatches(e){return nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ro(t,0),r=new Ro(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),nn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new qn(Lt);return t.forEach((e=>{const t=new Ro(e,0),r=new Ro(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),nn.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Wt.isDocumentKey(i)||(i=i.child(""));const s=new Ro(new Wt(i),0);let o=new qn(Lt);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),nn.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){bt(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return nn.forEach(t.mutations,(r=>{const i=new Ro(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new Ro(t,0),r=this.Mr.firstAfterOrEqual(n);return nn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,nn.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Do{constructor(e){this.kr=e,this.docs=new Un(Wt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return nn.resolve(n?n.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let n=xi();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Dr.newInvalidDocument(e))})),nn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=xi();const s=t.path,o=new Wt(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Jt(Xt(o),n)<=0||(r.has(o.key)||bi(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return nn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){yt()}qr(e,t){return nn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Fo(this)}getSize(e){return nn.resolve(this.size)}}class Fo extends Eo{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),nn.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class Lo{constructor(e){this.persistence=e,this.Qr=new Ei((e=>ii(e)),si),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Po,this.targetCount=0,this.Ur=mo.Kn()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),nn.resolve()}getLastRemoteSnapshotVersion(e){return nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nn.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),nn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),nn.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new mo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,nn.resolve()}updateTargetData(e,t){return this.zn(t),nn.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,nn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),nn.waitFor(i).next((()=>r))}getTargetCount(e){return nn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return nn.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),nn.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),nn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),nn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return nn.resolve(n)}containsKey(e,t){return nn.resolve(this.Kr.containsKey(t))}}class Oo{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new on(0),this.zr=!1,this.zr=!0,this.jr=new No,this.referenceDelegate=e(this),this.Hr=new Lo(this),this.indexManager=new co,this.remoteDocumentCache=function(e){return new Do(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new ao(t),this.Yr=new To(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Io,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Ao(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){gt("MemoryPersistence","Starting transaction:",e);const r=new Mo(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return nn.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Mo extends en{constructor(e){super(),this.currentSequenceNumber=e}}class jo{constructor(e){this.persistence=e,this.ti=new Po,this.ni=null}static ri(e){return new jo(e)}get ii(){if(this.ni)return this.ni;throw yt()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),nn.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),nn.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),nn.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nn.forEach(this.ii,(n=>{const r=Wt.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,Vt.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return nn.or([()=>nn.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class $o{constructor(e,t){this.persistence=e,this.oi=new Ei((e=>dn(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=ko(this,t)}static ri(e,t){return new $o(e,t)}Zr(){}Xr(e){return nn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return nn.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?nn.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Vt.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),nn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),nn.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),nn.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),nn.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sr(e.data.value)),t}ar(e,t,n){return nn.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return nn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vo{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Fi(),r=Fi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vo(e,t.fromCache,n,r)}}class Uo{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class zo{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=m()?8:rn(g())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Uo;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(pt()<=N.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",yi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),nn.resolve()):(pt()<=N.DEBUG&&gt("QueryEngine","Query:",yi(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(pt()<=N.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",yi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(t))):nn.resolve())}rs(e,t){if(ci(t))return nn.resolve(null);let n=fi(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=mi(t,null,"F"),n=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Fi(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,mi(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return ci(t)||r.isEqual(Vt.min())?nn.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?nn.resolve(null):(pt()<=N.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yi(t)),this.hs(e,s,t,Qt(r,Gt)).next((e=>e)))}))}cs(e,t){let n=new qn(Si(e));return t.forEach(((t,r)=>{bi(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return pt()<=N.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",yi(t)),this.ns.getDocumentsMatchingQuery(e,t,Yt.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Bo="LocalStore";class qo{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Un(Lt),this.Is=new Ei((e=>ii(e)),si),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xo(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function Ho(e,t,n,r){return new qo(e,t,n,r)}async function Wo(e,t){const n=wt(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Fi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Go(e){const t=wt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Ko(e,t,n){let r=Fi(),i=Fi();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=xi();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Vt.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):gt(Bo,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Qo(e,t){const n=wt(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,nn.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new oo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Xo(e,t,n){const r=wt(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!sn(e))throw e;gt(Bo,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Yo(e,t,n){const r=wt(e);let i=Vt.min(),s=Fi();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=wt(e),i=r.Is.get(n);return void 0!==i?nn.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,fi(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Vt.min(),n?s:Fi()))).next((e=>(Jo(r,wi(t),e),{documents:e,gs:s})))))}function Jo(e,t,n){let r=e.Es.get(t)||Vt.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class Zo{constructor(){this.activeTargetIds=Oi()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ea{constructor(){this.ho=new Zo,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Zo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ta{To(e){}shutdown(){}}const na="ConnectivityMonitor";class ra{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){gt(na,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){gt(na,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ia=null;function sa(){return null===ia?ia=268435456+Math.round(2147483648*Math.random()):ia++,"0x"+ia.toString(16)}const oa="RestConnection",aa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class la{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===ar?`project_id=${n}`:`project_id=${n}&database_id=${r}`}bo(e,t,n,r,i){const s=sa(),o=this.So(e,t.toUriEncodedString());gt(oa,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(gt(oa,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw vt(oa,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.bo(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=aa[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class ua{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}const ca="WebChannelConnection";class ha extends la{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=sa();return new Promise(((s,o)=>{const a=new Ze;a.setWithCredentials(!0),a.listenOnce(tt.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case nt.NO_ERROR:const t=a.getResponseJson();gt(ca,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case nt.TIMEOUT:gt(ca,`RPC '${e}' ${i} timed out`),o(new kt(St.DEADLINE_EXCEEDED,"Request time out"));break;case nt.HTTP_ERROR:const n=a.getStatus();if(gt(ca,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(St).indexOf(t)>=0?t:St.UNKNOWN}(t.status);o(new kt(e,t.message))}else o(new kt(St.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new kt(St.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{gt(ca,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);gt(ca,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=sa(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ot(),o=st(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");gt(ca,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new ua({Fo:t=>{d?gt(ca,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(gt(ca,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),gt(ca,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Mo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,et.EventType.OPEN,(()=>{d||(gt(ca,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),p(c,et.EventType.CLOSE,(()=>{d||(d=!0,gt(ca,`RPC '${e}' stream ${r} transport closed`),f.Ko())})),p(c,et.EventType.ERROR,(t=>{d||(d=!0,vt(ca,`RPC '${e}' stream ${r} transport errored:`,t),f.Ko(new kt(St.UNAVAILABLE,"The operation could not be completed")))})),p(c,et.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];bt(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){gt(ca,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ps[e];if(void 0!==t)return ms(t)}(t),i=o.message;void 0===n&&(n=St.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ko(new kt(n,i)),c.close()}else gt(ca,`RPC '${e}' stream ${r} received:`,i),f.Uo(i)}})),p(o,it.STAT_EVENT,(t=>{t.stat===rt.PROXY?gt(ca,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===rt.NOPROXY&&gt(ca,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function da(){return"undefined"!=typeof document?document:null}function fa(e){return new Os(e,!0)}class pa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&gt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const ga="PersistentStream";class ma{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new pa(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===St.RESOURCE_EXHAUSTED?(mt(t.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===St.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new kt(St.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return gt(ga,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(gt(ga,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class va extends ma{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(bt(void 0===t||"string"==typeof t),Kn.fromBase64String(t||"")):(bt(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Kn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?St.UNKNOWN:ms(e.code);return new kt(t,e.message||"")}(o);n=new Is(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=qs(e,r.document.name),s=Vs(r.document.updateTime),o=r.document.createTime?Vs(r.document.createTime):Vt.min(),a=new Ar({mapValue:{fields:r.document.fields}}),l=Dr.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new xs(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=qs(e,r.document),s=r.readTime?Vs(r.readTime):Vt.min(),o=Dr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xs([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=qs(e,r.document),s=r.removedTargetIds||[];n=new xs([],s,i,null)}else{if(!("filter"in t))return yt();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new fs(r,i),o=e.targetId;n=new Ts(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vt.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vt.min():t.readTime?Vs(t.readTime):Vt.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=Gs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=oi(r)?{documents:Qs(e,r)}:{query:Xs(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=$s(e,t.resumeToken);const r=Ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Vt.min())>0){n.readTime=js(e,t.snapshotVersion.toTimestamp());const r=Ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=Gs(this.serializer),t.removeTarget=e,this.I_(t)}}class _a{}class ya extends _a{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new kt(St.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.bo(e,zs(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new kt(St.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,zs(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===St.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new kt(St.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class ba{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(mt(t),this.N_=!1):gt("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const wa="RemoteStore";class Sa{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Ra(this)&&(gt(wa,"Restarting streams for network reachability change."),await async function(e){const t=wt(e);t.W_.add(4),await Ea(t),t.j_.set("Unknown"),t.W_.delete(4),await ka(t)}(this))}))})),this.j_=new ba(n,r)}}async function ka(e){if(Ra(e))for(const t of e.G_)await t(!0)}async function Ea(e){for(const t of e.G_)await t(!1)}function Ca(e,t){const n=wt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),Pa(n)?Na(n):Va(n).c_()&&Ta(n,t))}function xa(e,t){const n=wt(e),r=Va(n);n.U_.delete(t),r.c_()&&Ia(n,t),0===n.U_.size&&(r.c_()?r.P_():Ra(n)&&n.j_.set("Unknown"))}function Ta(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Va(e).y_(t)}function Ia(e,t){e.H_.Ne(t),Va(e).w_(t)}function Na(e){e.H_=new Ps({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Va(e).start(),e.j_.B_()}function Pa(e){return Ra(e)&&!Va(e).u_()&&e.U_.size>0}function Ra(e){return 0===wt(e).W_.size}function Aa(e){e.H_=void 0}async function Da(e){e.j_.set("Online")}async function Fa(e){e.U_.forEach(((t,n)=>{Ta(e,t)}))}async function La(e,t){Aa(e),Pa(e)?(e.j_.q_(t),Na(e)):e.j_.set("Unknown")}async function Oa(e,t,n){if(e.j_.set("Online"),t instanceof Is&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.U_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.U_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){gt(wa,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ma(e,n)}else if(t instanceof xs?e.H_.We(t):t instanceof Ts?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Vt.min()))try{const t=await Go(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.U_.get(r);i&&e.U_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.U_.get(t);if(!r)return;e.U_.set(t,r.withResumeToken(Kn.EMPTY_BYTE_STRING,r.snapshotVersion)),Ia(e,t);const i=new oo(r.target,t,n,r.sequenceNumber);Ta(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){gt(wa,"Failed to raise snapshot:",t),await Ma(e,t)}}async function Ma(e,t,n){if(!sn(t))throw t;e.W_.add(1),await Ea(e),e.j_.set("Offline"),n||(n=()=>Go(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{gt(wa,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await ka(e)}))}async function ja(e,t){const n=wt(e);n.asyncQueue.verifyOperationInProgress(),gt(wa,"RemoteStore received new credentials");const r=Ra(n);n.W_.add(3),await Ea(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await ka(n)}async function $a(e,t){const n=wt(e);t?(n.W_.delete(2),await ka(n)):t||(n.W_.add(2),await Ea(n),n.j_.set("Unknown"))}function Va(e){return e.J_||(e.J_=function(e,t,n){const r=wt(e);return r.M_(),new va(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Da.bind(null,e),No:Fa.bind(null,e),Lo:La.bind(null,e),p_:Oa.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Pa(e)?Na(e):e.j_.set("Unknown")):(await e.J_.stop(),Aa(e))}))),e.J_}class Ua{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ua(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kt(St.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(e,t){if(mt("AsyncQueue",`${t}: ${e}`),sn(e))return new kt(St.UNAVAILABLE,`${t}: ${e}`);throw e}class Ba{static emptySet(e){return new Ba(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Wt.comparator(t.key,n.key):(e,t)=>Wt.comparator(e.key,t.key),this.keyedMap=Ii(),this.sortedSet=new Un(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ba))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ba;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qa{constructor(){this.Z_=new Un(Wt.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):yt():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ha{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ha(e,t,Ba.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wa{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Ga{constructor(){this.queries=Ka(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=wt(e),r=n.queries;n.queries=Ka(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new kt(St.ABORTED,"Firestore shutting down"))}}function Ka(){return new Ei((e=>_i(e)),vi)}async function Qa(e,t){const n=wt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new Wa,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=za(e,`Initialization of query '${yi(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&Za(n)}async function Xa(e,t){const n=wt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ya(e,t){const n=wt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&Za(n)}function Ja(e,t,n){const r=wt(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function Za(e){e.ia.forEach((e=>{e.next()}))}var el,tl;(tl=el||(el={}))._a="default",tl.Cache="cache";class nl{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ha(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==el.Cache}}class rl{constructor(e){this.key=e}}class il{constructor(e){this.key=e}}class sl{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fi(),this.mutatedKeys=Fi(),this.ya=Si(e),this.wa=new Ba(this.ya)}get ba(){return this.fa}Sa(e,t){const n=t?t.Da:new qa,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=bi(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.va(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ya(c,a)>0||l&&this.ya(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new Ha(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new qa,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fi(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new il(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new rl(n))})),t}Oa(e){this.fa=e.gs,this.pa=Fi();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Ha.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const ol="SyncEngine";class al{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ll{constructor(e){this.key=e,this.Ba=!1}}class ul{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Ei((e=>_i(e)),vi),this.qa=new Map,this.Qa=new Set,this.$a=new Un(Wt.comparator),this.Ka=new Map,this.Ua=new Po,this.Wa={},this.Ga=new Map,this.za=mo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function cl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Tl(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await dl(r,t,n,!0),i}async function hl(e,t){const n=Tl(e);await dl(n,t,!0,!1)}async function dl(e,t,n,r){const i=await Qo(e.localStore,fi(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await fl(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ca(e.remoteStore,i),a}async function fl(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.Sa(n);i.ls&&(i=await Yo(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Sa(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return wl(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await Yo(e.localStore,t,!0),o=new sl(t,s.gs),a=o.Sa(s.documents),l=Cs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);wl(e,n,u.Ma);const c=new al(t,n,o);return e.ka.set(t,c),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),u.snapshot}async function pl(e,t,n){const r=wt(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!vi(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xo(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xa(r.remoteStore,i.targetId),yl(r,i.targetId)})).catch(tn)):(yl(r,i.targetId),await Xo(r.localStore,i.targetId,!0))}async function gl(e,t){const n=wt(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xa(n.remoteStore,r.targetId))}async function ml(e,t){const n=wt(e);try{const e=await function(e,t){const n=wt(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Kn.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,s)&&o.push(n.Hr.updateTargetData(e,u))}));let a=xi(),l=Fi();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ko(e,s,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual(Vt.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return nn.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ka.get(t);r&&(bt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?bt(r.Ba):e.removedDocuments.size>0&&(bt(r.Ba),r.Ba=!1))})),await El(n,e,t)}catch(e){await tn(e)}}function vl(e,t,n){const r=wt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=wt(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Za(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _l(e,t,n){const r=wt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ka.get(t),s=i&&i.key;if(s){let e=new Un(Wt.comparator);e=e.insert(s,Dr.newNoDocument(s,Vt.min()));const n=Fi().add(s),i=new Es(Vt.min(),new Map,new Un(Lt),e,n);await ml(r,i),r.$a=r.$a.remove(s),r.Ka.delete(t),kl(r)}else await Xo(r.localStore,t,!1).then((()=>yl(r,t,n))).catch(tn)}function yl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.Sr(t).forEach((t=>{e.Ua.containsKey(t)||bl(e,t)}))}function bl(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(xa(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),kl(e))}function wl(e,t,n){for(const r of n)r instanceof rl?(e.Ua.addReference(r.key,t),Sl(e,r)):r instanceof il?(gt(ol,"Document no longer in limbo: "+r.key),e.Ua.removeReference(r.key,t),e.Ua.containsKey(r.key)||bl(e,r.key)):yt()}function Sl(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(gt(ol,"New document in limbo: "+n),e.Qa.add(r),kl(e))}function kl(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Wt(Bt.fromString(t)),r=e.za.next();e.Ka.set(r,new ll(n)),e.$a=e.$a.insert(n,r),Ca(e.remoteStore,new oo(fi(ui(n.path)),r,"TargetPurposeLimboResolution",on.ae))}}async function El(e,t,n){const r=wt(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Vo.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=wt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>nn.forEach(t,(t=>nn.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>nn.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!sn(e))throw e;gt(Bo,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function Cl(e,t){const n=wt(e);if(!n.currentUser.isEqual(t)){gt(ol,"User change. New user:",t.toKey());const e=await Wo(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new kt(St.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await El(n,e.Rs)}}function xl(e,t){const n=wt(e),r=n.Ka.get(t);if(r&&r.Ba)return Fi().add(r.key);{let e=Fi();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.ba)}return e}}function Tl(e){const t=wt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ml.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_l.bind(null,t),t.La.p_=Ya.bind(null,t.eventManager),t.La.Ja=Ja.bind(null,t.eventManager),t}class Il{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fa(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return Ho(this.persistence,new zo,e.initialUser,this.serializer)}Xa(e){return new Oo(jo.ri,this.serializer)}Za(e){return new ea}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Il.provider={build:()=>new Il};class Nl extends Il{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){bt(this.persistence.referenceDelegate instanceof $o);const n=this.persistence.referenceDelegate.garbageCollector;return new wo(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?go.withCacheSize(this.cacheSizeBytes):go.DEFAULT;return new Oo((e=>$o.ri(e,t)),this.serializer)}}class Pl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>vl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cl.bind(null,this.syncEngine),await $a(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ga}createDatastore(e){const t=fa(e.databaseInfo.databaseId),n=function(e){return new ha(e)}(e.databaseInfo);return function(e,t,n,r){return new ya(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Sa(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>vl(this.syncEngine,e,0)),ra.D()?new ra:new ta)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ul(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=wt(e);gt(wa,"RemoteStore shutting down."),t.W_.add(5),await Ea(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Pl.provider={build:()=>new Pl};class Rl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Al="FirestoreClient";class Dl{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ht.UNAUTHENTICATED,this.clientId=Ft.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{gt(Al,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(gt(Al,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Pc){const n=za(Pc,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Fl(e,t){e.asyncQueue.verifyOperationInProgress(),gt(Al,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Wo(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ll(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ol(e);gt(Al,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ja(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ja(t.remoteStore,n))),e._onlineComponents=t}async function Ol(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){gt(Al,"Using user provided OfflineComponentProvider");try{await Fl(e,e._uninitializedComponentsProvider._offline)}catch(Pc){const n=Pc;if(!function(e){return"FirebaseError"===e.name?e.code===St.FAILED_PRECONDITION||e.code===St.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;vt("Error using user provided cache. Falling back to memory cache: "+n),await Fl(e,new Il)}}else gt(Al,"Using default OfflineComponentProvider"),await Fl(e,new Nl(void 0));return e._offlineComponents}async function Ml(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(gt(Al,"Using user provided OnlineComponentProvider"),await Ll(e,e._uninitializedComponentsProvider._online)):(gt(Al,"Using default OnlineComponentProvider"),await Ll(e,new Pl))),e._onlineComponents}async function jl(e){const t=await Ml(e),n=t.eventManager;return n.onListen=cl.bind(null,t.syncEngine),n.onUnlisten=pl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=hl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=gl.bind(null,t.syncEngine),n}function $l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Et;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Rl({next:n=>{s.su(),t.enqueueAndForget((()=>Xa(e,o))),n.fromCache&&"server"===r.source?i.reject(new kt(St.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new nl(n,s,{includeMetadataChanges:!0,Ta:!0});return Qa(e,o)}(await jl(e),e.asyncQueue,t,n,r))),r.promise}function Vl(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ul=new Map;function zl(e,t,n){if(!n)throw new kt(St.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bl(e){if(Wt.isDocumentKey(e))throw new kt(St.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ql(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":yt()}function Hl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kt(St.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ql(e);throw new kt(St.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const Wl="firestore.googleapis.com",Gl=!0;class Kl{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new kt(St.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wl,this.ssl=Gl}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Gl;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=po;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<_o)throw new kt(St.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new kt(St.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vl(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new kt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new kt(St.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ql{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(St.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new kt(St.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kl(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xt;switch(e.type){case"firstParty":return new Pt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kt(St.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ul.get(e);t&&(gt("ComponentProvider","Removing Datastore"),Ul.delete(e),t.terminate())}(this),Promise.resolve()}}function Xl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Hl(e,Ql))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==Wl&&s.host!==a&&vt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!w(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ht.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new kt(St.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ht(s)}e._authCredentials=new Tt(new Ct(t,n))}}class Yl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class Jl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jl(this.firestore,e,this._key)}}class Zl extends Yl{constructor(e,t,n){super(e,t,ui(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jl(this.firestore,null,new Wt(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function eu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=k(e),zl("collection","path",t),e instanceof Ql){const n=Bt.fromString(t,...r);return Bl(n),new Zl(e,null,n)}{if(!(e instanceof Jl||e instanceof Zl))throw new kt(St.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Bt.fromString(t,...r));return Bl(n),new Zl(e.firestore,null,n)}}const tu="AsyncQueue";class nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new pa(this,"async_queue_retry"),this.bu=()=>{const e=da();e&&gt(tu,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.Su=e;const t=da();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=da();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Et;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(Nc){if(!sn(Nc))throw Nc;gt(tu,"Operation failed with retryable error: "+Nc)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.Su.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw mt("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Ua.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&yt()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.Su,await e}while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class ru extends Ql{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nu(e),this._firestoreClient=void 0,await e}}}function iu(e){if(e._terminated)throw new kt(St.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||su(e),e._firestoreClient}function su(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new or(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Vl(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Dl(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ou{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ou(Kn.fromBase64String(e))}catch(e){throw new kt(St.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ou(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class au{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new kt(St.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lu{constructor(e){this._methodName=e}}class uu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new kt(St.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new kt(St.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}class cu{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const hu=/^__.*__$/;function du(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class fu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new fu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Ku(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ku(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(du(this.Lu)&&hu.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class pu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||fa(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fu({Lu:e,methodName:t,zu:n,path:Ht.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gu(e){const t=e._freezeSettings(),n=fa(e._databaseId);return new pu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vu(n,e.ju(r?4:3,t))}function vu(e,t){if(yu(e=k(e)))return bu("Unsupported field value:",t,e),_u(e,t);if(e instanceof lu)return function(e,t){if(!du(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vu(i,t.Uu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=k(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $i(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=$t.fromDate(e);return{timestampValue:js(t.serializer,n)}}if(e instanceof $t){const n=new $t(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:js(t.serializer,n)}}if(e instanceof uu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ou)return{bytesValue:$s(t.serializer,e._byteString)};if(e instanceof Jl){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Us(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof cu)return function(e,t){return{mapValue:{fields:{[ur]:{stringValue:dr},[fr]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return Mi(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${ql(e)}`)}(e,t)}function _u(e,t){const n={};return Vn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$n(e,((e,r)=>{const i=vu(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof $t||e instanceof uu||e instanceof ou||e instanceof Jl||e instanceof lu||e instanceof cu)}function bu(e,t,n){if(!yu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ql(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}const wu=new RegExp("[~\\*/\\[\\]]");function Su(e,t,n){if(t.search(wu)>=0)throw ku(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new au(...t.split("."))._internalPath}catch(Ac){throw ku(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ku(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new kt(St.INVALID_ARGUMENT,a+e+l)}class Eu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Jl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cu extends Eu{data(){return super.data()}}function xu(e,t){return"string"==typeof t?Su(e,t):t instanceof au?t._internalPath:t._delegate._internalPath}function Tu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kt(St.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iu{}class Nu extends Iu{}function Pu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Iu&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Au)).length,n=e.filter((e=>e instanceof Ru)).length;if(t>1||t>0&&n>0)throw new kt(St.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ru extends Nu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ru(e,t,n)}_apply(e){const t=this._parse(e);return Mu(e._query,t),new Yl(e.firestore,e.converter,gi(e._query,t))}_parse(e){const t=gu(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new kt(St.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Ou(o,s);const t=[];for(const n of o)t.push(Lu(r,e,n));a={arrayValue:{values:t}}}else a=Lu(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Ou(o,s),a=mu(n,t,o,"in"===s||"not-in"===s);return Vr.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Au extends Iu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Au(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Mu(n,i),n=gi(n,i)}(e._query,t),new Yl(e.firestore,e.converter,gi(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Du extends Nu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Du(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new kt(St.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kt(St.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mr(t,n)}(e._query,this._field,this._direction);return new Yl(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ai(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Fu(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xu("orderBy",e);return Du._create(n,t)}function Lu(e,t,n){if("string"==typeof(n=k(n))){if(""===n)throw new kt(St.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hi(t)&&-1!==n.indexOf("/"))throw new kt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Bt.fromString(n));if(!Wt.isDocumentKey(r))throw new kt(St.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kr(e,new Wt(r))}if(n instanceof Jl)return kr(e,n._key);throw new kt(St.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ql(n)}.`)}function Ou(e,t){if(!Array.isArray(e)||0===e.length)throw new kt(St.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Mu(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new kt(St.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new kt(St.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ju{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return $n(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[fr].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Yn(e.doubleValue)));return new cu(i)}convertGeoPoint(e){return new uu(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ir(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sr(e));default:return null}}convertTimestamp(e){const t=Xn(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bt.fromString(e);bt(so(n));const r=new lr(n.get(1),n.get(3)),i=new Wt(n.popFirst(5));return r.isEqual(t)||mt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class $u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vu extends Eu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(xu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Uu extends Vu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class zu{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $u(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Uu(this._firestore,this._userDataWriter,n.key,n,new $u(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kt(St.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Uu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $u(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Uu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $u(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Bu(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Bu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}class qu extends ju{constructor(e){super(),this.firestore=e}convertBytes(e){return new ou(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jl(this.firestore,null,t)}}function Hu(e){e=Hl(e,Yl);const t=Hl(e.firestore,ru),n=iu(t),r=new qu(t);return Tu(e._query),$l(n,e._query).then((n=>new zu(t,r,e,n)))}new WeakMap;function Wu(e){const t=new Date-new Date(e),n=Math.floor(t/1e3)%60,r=Math.floor(t/6e4)%60,i=Math.floor(t/36e5)%24,s=Math.floor(t/864e5),o=[];return s>0?o.push(`${s} day${s>1?"s":""}`):i>0?o.push(`${i} hr${i>1?"s":""}`):r>0?o.push(`${r} min${r>1?"s":""}`):n>0&&o.push(`${n} second${n>1?"s":""}`),o.length>0?o.join(" ")+" ago":"just now"}function Gu(e){return new Date(e).toLocaleString("en-AU",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dt=e}("11.4.0"),De(new E("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new ru(new It(e.getProvider("auth-internal")),new At(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kt(St.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lr(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),je(ut,ct,e),je(ut,ct,"esm2017")}();je("firebase","11.4.0","app");const Ku=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;const t=Ne.get(e);if(!t&&e===Te&&f())return Me();if(!t)throw Le.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:t||ar,i=Fe(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=d("firestore");e&&Xl(i,...e)}return i}(Me({projectId:"fingercomps-lite-au"})),Qu=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const n=Pu(eu(Ku,e),...t),r=(await Hu(n)).docs.map((e=>({id:e.id,...e.data(),ref:e.ref})));return r}catch(n){throw console.error("Error fetching data:",n),n}},Xu=e=>e?e.toDate().toISOString():null,Yu=async()=>{try{const t=(e=function(){const e=new Date;return e.setMonth(e.getMonth()-2),e.toISOString()}())?$t.fromDate(new Date(e)):null,n=Pu(eu(Ku,"competitions"),function(e,t,n){const r=t,i=xu("where",e);return Ru._create(i,r,n)}("modified",">=",t),Fu("modified","desc"),Fu("__name__","desc")),r=await Hu(n);return(await Promise.all(r.docs.map((async e=>{const t=e.id,n=e.data(),r=Pu(eu(Ku,`competitions/${t}/links`)),i=(await Hu(r)).docs.map((e=>({id:e.id,...e.data()})));return{document:{name:`competitions/${t}`,fields:Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return r instanceof $t?e[n]={timestampValue:Xu(r)}:"string"===typeof r?e[n]={stringValue:r}:"number"===typeof r?e[n]={integerValue:r.toString()}:"boolean"===typeof r&&(e[n]={booleanValue:r}),e}),{}),links:i.length>0?i:void 0}}})))).filter((e=>{var t;return null===(t=e.document)||void 0===t?void 0:t.links}))||[]}catch(t){throw console.error("Error fetching competitions:",t),t}var e},Ju=async e=>{try{const t=`competitions/${e}/categories`;return(await Qu(t)).reduce(((e,t)=>(e[t.code]={name:t.name,code:t.code,disableFlash:t.disableFlash,flashExtraPoints:t.flashExtraPoints,scalePoints:t.scalePoints,pumpfestTopScores:t.pumpfestTopScores},e)),{})}catch(t){throw console.error("Error fetching categories:",t),t}},Zu=async e=>{try{const t=`competitions/${e}/competitors`;return(await Qu(t)).reduce(((e,t)=>(e[t.competitorNo]={name:`${t.firstName.trim()} ${t.lastName.trim()}`,category:t.category,competitorNo:t.competitorNo},e)),{})}catch(t){throw console.error("Error fetching competitors:",t),t}},ec=async e=>{try{const t=`competitions/${e}/qualificationScores`;return(await Qu(t)).reduce(((e,t)=>{const n=t.competitorNo;return e[n]=e[n]||[],e[n].push({climbNo:t.climbNo,category:t.category,flashed:t.flash,topped:t.topped,competitorNo:n,createdAt:Xu(t.created)}),e}),{})}catch(t){throw console.error("Error fetching scores:",t),t}},tc=async e=>{try{const t=`competitions/${e}/climbs`;return(await Qu(t)).reduce(((e,t)=>(e[t.climbNo]={score:t.score,station:t.station,marking:t.marking,climbNo:t.climbNo,createdAt:Xu(t.created)},e)),{})}catch(t){throw console.error("Error fetching problems:",t),t}};var nc=n(579);const rc=(0,r.createContext)(),ic=()=>{const e=(0,r.useContext)(rc);if(!e)throw new Error("useApp must be used within an AppProvider");return e},sc=e=>{let{children:t}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null),[u,c]=(0,r.useState)((()=>localStorage.getItem("lastSelectedComp")||"")),[h,d]=(0,r.useState)((()=>localStorage.getItem("lastSelectedCompId")||"")),[f,p]=(0,r.useState)(""),g=(0,r.useCallback)((e=>{if(!e)return{category:"",categoryCode:""};return{category:localStorage.getItem(`category_${e}`)||"",categoryCode:localStorage.getItem(`categoryCode_${e}`)||""}}),[]),[m,v]=(0,r.useState)((()=>{const e=localStorage.getItem("lastSelectedCompId");return g(e).category})),[_,y]=(0,r.useState)((()=>{const e=localStorage.getItem("lastSelectedCompId");return g(e).categoryCode})),[b,w]=(0,r.useState)("user"),[S,k]=(0,r.useState)(!0),[E,C]=(0,r.useState)(window.innerWidth<768),[x,T]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=()=>{C(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const I=(0,r.useCallback)((async()=>{o(!0),l(null);try{const e=await Yu();if(i(e),h){e.some((e=>{var t;return(null===(t=e.document)||void 0===t?void 0:t.name.split("/").pop())===h}))||(p(`The competition "${u}" is no longer available for viewing as it has been archived.`),c(""),d(""),localStorage.removeItem("lastSelectedComp"),localStorage.removeItem("lastSelectedCompId"))}const{category:t,categoryCode:n}=g(h);v(t),y(n)}catch(e){l(e.message),console.error("Error fetching competitions:",e)}finally{o(!1)}}),[u,h,g]);(0,r.useEffect)((()=>{I()}),[I]);const N={comps:n,selectedComp:u,selectedCompId:h,compNotFoundMessage:f,selectedCategory:m,selectedCategoryCode:_,focusView:b,limitScores:S,isMobile:E,recommendModalUser:x,loading:s,error:a,setSelectedCategory:v,setSelectedCategoryCode:y,setFocusView:w,setLimitScores:k,setRecommendModalUser:T,handleCompetitionChange:(e,t)=>{c(e),d(t),localStorage.setItem("lastSelectedComp",e),localStorage.setItem("lastSelectedCompId",t),p("");const{category:n,categoryCode:r}=g(t);v(n),y(r)}};return(0,nc.jsx)(rc.Provider,{value:N,children:t})},oc=(e,t,n,r)=>{const i=Object.entries(t).map((t=>{let[i,s]=t;const o=e[s.category],a=(null===o||void 0===o?void 0:o.flashExtraPoints)||0,l=(r[i]||[]).map((e=>({...n[null===e||void 0===e?void 0:e.climbNo],...e}))),u=[],c=new Set;l.sort(((e,t)=>{const n=e.score+(e.flashed?a:0);return t.score+(t.flashed?a:0)-n})),l.forEach((e=>{e.climbNo&&(c.has(e.climbNo)||(c.add(e.climbNo),u.push(e)))}));const h={...s,scores:u},{tops:d,flashes:f,total:p}=((e,t,n)=>{let r=0,i=0;const s=e.slice(0,n).reduce(((e,n)=>n?(r+=1,n.flashed&&(i+=1),e+(n.score+(n.flashed?t:0))):e),0);return{tops:r,flashes:i,total:s}})(h.scores,a,(null===o||void 0===o?void 0:o.pumpfestTopScores)||0);return{...h,tops:d,flashes:f,total:p,bonus:a*f,flashExtraPoints:a,categoryFullName:null===o||void 0===o?void 0:o.name}}));let s=0,o=null;return i.sort(((e,t)=>t.total-e.total)).forEach(((e,n)=>{null!==o&&e.total===o||(s=n+1,o=e.total),e.rank=s,t[e.competitorNo].rank=s})),i},ac=(0,r.createContext)(),lc=()=>{const e=(0,r.useContext)(ac);if(!e)throw new Error("useCompetition must be used within a CompetitionProvider");return e},uc=e=>{let{children:t,competitionId:n}=e;const[i,s]=(0,r.useState)({}),[o,a]=(0,r.useState)({}),[l,u]=(0,r.useState)({}),[c,h]=(0,r.useState)({}),[d,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[m,v]=(0,r.useState)(""),[_,y]=(0,r.useState)({categories:{loading:!1,progress:0,complete:!1,error:null},competitors:{loading:!1,progress:0,complete:!1,error:null},scores:{loading:!1,progress:0,complete:!1,error:null},problems:{loading:!1,progress:0,complete:!1,error:null}}),b=(0,r.useMemo)((()=>{const{categories:e,competitors:t,scores:n,problems:r}=_,i=e.progress+t.progress+n.progress+r.progress,s=Math.round(i/4);return s>=100&&d&&setTimeout((()=>f(!1)),0),s}),[_,d]),w=(0,r.useMemo)((()=>Object.keys(i).length>0||Object.keys(o).length>0),[i,o]),S=(0,r.useCallback)((async()=>{if(n){s({}),a({}),u({}),h({}),f(!0),g(null),y({categories:{loading:!0,progress:0,complete:!1,error:null},competitors:{loading:!0,progress:0,complete:!1,error:null},scores:{loading:!0,progress:0,complete:!1,error:null},problems:{loading:!0,progress:0,complete:!1,error:null}});try{try{y((e=>({...e,categories:{...e.categories,progress:10}})));const e=await Ju(n);y((e=>({...e,categories:{loading:!1,progress:100,complete:!0,error:null}}))),s(e)}catch(e){y((t=>({...t,categories:{loading:!1,progress:0,complete:!1,error:e.message}}))),console.error("Error fetching categories:",e)}try{y((e=>({...e,competitors:{...e.competitors,progress:10}})));const e=await Zu(n);y((e=>({...e,competitors:{loading:!1,progress:100,complete:!0,error:null}}))),a(e)}catch(e){y((t=>({...t,competitors:{loading:!1,progress:0,complete:!1,error:e.message}}))),console.error("Error fetching competitors:",e)}try{y((e=>({...e,scores:{...e.scores,progress:10}})));const e=await ec(n);y((e=>({...e,scores:{loading:!1,progress:100,complete:!0,error:null}}))),u(e)}catch(e){y((t=>({...t,scores:{loading:!1,progress:0,complete:!1,error:e.message}}))),console.error("Error fetching scores:",e)}try{y((e=>({...e,problems:{...e.problems,progress:10}})));const e=await tc(n);y((e=>({...e,problems:{loading:!1,progress:100,complete:!0,error:null}}))),h(e)}catch(e){y((t=>({...t,problems:{loading:!1,progress:0,complete:!1,error:e.message}}))),console.error("Error fetching problems:",e)}}catch(e){g(e.message),console.error("Error fetching competition data:",e)}finally{y((e=>(Object.values(e).every((e=>e.complete||e.error))&&setTimeout((()=>f(!1)),0),e)))}}}),[n]);(0,r.useEffect)((()=>{S()}),[S]);const k=(0,r.useMemo)((()=>{if(Object.keys(i).length&&Object.keys(o).length){const e=oc(i,o,c,l);return((e,t,n,r)=>{const i=new Set;Object.entries(e).forEach((e=>{let[s,o]=e;o.forEach((e=>{const o=`${s},${e.climbNo}`;if(i.has(o))return void console.warn(`Duplicate climb detected: ${o}`);i.add(o);const a=t[e.climbNo];if(a){if(a.stats||(a.stats={},Object.keys(n).forEach((e=>{a.stats[e]={tops:0,flashes:0}}))),a.sends||(a.sends=[]),e.flashed){if(!a.stats.hasOwnProperty(e.category))return void console.warn(`Unrecognised category (${e.category}) in categories set (${Object.keys(n)})`);a.stats[e.category].flashes+=1}if(e.topped){var l,u,c;if(!a.stats.hasOwnProperty(e.category))return void console.warn(`Unrecognised category (${e.category}) in categories set (${Object.keys(n)})`);a.stats[e.category].tops+=1,a.sends.push({competitorNo:e.competitorNo,rank:null===(l=r[e.competitorNo])||void 0===l?void 0:l.rank,category:null===(u=n[e.category])||void 0===u?void 0:u.name,categoryCode:e.category,name:null===(c=r[e.competitorNo])||void 0===c?void 0:c.name,flashed:e.flashed,createdAt:e.createdAt})}}}))}))})(l,c,i,o),e}return[]}),[i,o,c,l]),E=(0,r.useMemo)((()=>((e,t)=>{const n={};return Object.keys(e).forEach((e=>{n[e]=[]})),Object.values(t).forEach((e=>{var t;e.length>0&&(null===(t=n[e[0].category])||void 0===t||t.push(e.length))})),n})(i,l)),[i,l]),C=(0,r.useCallback)((e=>{var t;return((null===(t=E[e])||void 0===t?void 0:t.reduce(((e,t)=>t>=1?e+1:e),0))||0)/100}),[E]),x=(0,r.useCallback)(((e,t)=>[...e].sort(((e,n)=>"asc"===t?e.total-n.total:n.total-e.total))),[]),T=(0,r.useMemo)((()=>{const e=Object.values(l).flat().filter((e=>!m||e.category===m)).sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));return e.length>0?e[0]:null}),[l,m]),I=(0,r.useCallback)((e=>{v(e)}),[]),N={categories:i,competitors:o,scores:l,problems:c,userTableData:k,categoryTops:E,loading:d,loadingProgress:b,loadingState:_,partialDataAvailable:w,error:p,lastSubmittedScore:T,selectedCategoryCode:m,countCompetitors:C,sortUserTableData:e=>x(k,e),updateSelectedCategoryCode:I};return(0,nc.jsx)(ac.Provider,{value:N,children:t})};const cc=function(){const{selectedCategory:e,setSelectedCategory:t,setSelectedCategoryCode:n,selectedCompId:r}=ic(),{categories:i}=lc();return(0,nc.jsxs)("div",{children:[(0,nc.jsx)("label",{htmlFor:"filterCategory",children:"Show Category:"}),(0,nc.jsxs)("select",{id:"filterCategory",value:e,onChange:e=>{const i=e.target.value,s=e.target.selectedOptions[0].dataset.code||"";t(i),n(s),r&&(localStorage.setItem(`category_${r}`,i),localStorage.setItem(`categoryCode_${r}`,s))},children:[(0,nc.jsx)("option",{value:"",children:"All"}),Object.values(i).map(((e,t)=>(0,nc.jsx)("option",{value:e.name,"data-code":e.code,children:e.name||"TBC"},t)))]})]})};const hc=function(){const{focusView:e,setFocusView:t,loading:n}=ic(),r=e=>{t(e)},i={padding:"4px 8px",margin:"0px 4px",borderWidth:"1px",borderStyle:"solid",borderColor:"#FFD68A",borderRadius:"4px",background:"white",cursor:n?"not-allowed":"pointer",opacity:n?.7:1},s={...i,background:"#118eff",color:"white",borderColor:"#FFD68A"};return(0,nc.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,nc.jsxs)("div",{children:[(0,nc.jsx)("button",{id:"users-button",style:"user"===e?s:i,onClick:()=>r("user"),disabled:n,children:"Competitor View"}),(0,nc.jsx)("button",{id:"problems-button",style:"problems"===e?s:i,onClick:()=>r("problems"),disabled:n,children:"Routesetter View"})]})})};const dc=function(){const{comps:e,selectedCompId:t,loading:n,handleCompetitionChange:r}=ic(),i=[...e].sort(((e,t)=>{var n,r,i,s,o,a;return((null===(n=e.document)||void 0===n||null===(r=n.fields)||void 0===r||null===(i=r.name)||void 0===i?void 0:i.stringValue)||"").localeCompare((null===(s=t.document)||void 0===s||null===(o=s.fields)||void 0===o||null===(a=o.name)||void 0===a?void 0:a.stringValue)||"")}));return(0,nc.jsxs)("div",{children:[(0,nc.jsx)("label",{htmlFor:"selectComp",children:"Select Competition:"}),(0,nc.jsxs)("select",{id:"selectComp",value:t,onChange:e=>{const t=e.target.options[e.target.selectedIndex].text,n=e.target.value;r(t,n)},disabled:n,children:[(0,nc.jsx)("option",{value:"",children:"Select a competition"}),i.map(((e,t)=>{var n,r,i,s;return(0,nc.jsx)("option",{value:null===(n=e.document)||void 0===n?void 0:n.name.split("/").pop(),children:null===(r=e.document)||void 0===r||null===(i=r.fields)||void 0===i||null===(s=i.name)||void 0===s?void 0:s.stringValue},t)}))]})]})};function fc(){const[e,t]=(0,r.useState)(new Set),n=(0,r.useCallback)((e=>{t((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))}),[]),i=(0,r.useCallback)((t=>e.has(t)),[e]),s=(0,r.useCallback)((()=>{t(new Set)}),[]);return{expandedRows:e,toggleRow:n,isRowExpanded:i,collapseAllRows:s}}const pc=(e,t,n,r)=>{const i=[...e];return i.push({score:t,flashed:!1}),i.sort(((e,t)=>t.score+(t.flashed?n:0)-(e.score+(e.flashed?n:0)))).slice(0,r).reduce(((e,t)=>e+t.score+(t.flashed?n:0)),0)},gc=(e,t,n)=>{const r=e.findIndex((e=>e.competitorNo===t.competitorNo)),i=e.map((e=>e.competitorNo===t.competitorNo?{...e,total:n}:e));i.sort(((e,t)=>t.total-e.total));const s=i.findIndex((e=>e.competitorNo===t.competitorNo))+1;return r+1-s},mc=e=>{if(!e)return"";const t=e.split(/[-/,\s]/)[0].trim();return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},vc=function(e,t,n,r,i){var s;let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";const u=(null===i||void 0===i?void 0:i.flashExtraPoints)||0,c=(null===i||void 0===i?void 0:i.pumpfestTopScores)||0,h=[...t||[]].map((t=>({...e[null===t||void 0===t?void 0:t.climbNo],...t}))).sort(((e,t)=>{const n=e.score+(e.flashed?u:0);return t.score+(t.flashed?u:0)-n})),d=(null===(s=h[c-1])||void 0===s?void 0:s.score)||0,f=h.slice(0,c).reduce(((e,t)=>e+t.score+(t.flashed?u:0)),0),p=r.findIndex((e=>e.competitorNo===n.competitorNo)),g=p>0?r[p-1].total-n.total:0,m=e=>{var t,n;return o?Object.values(e.stats||{}).reduce(((e,t)=>e+(t.tops||0)),0):(null===(t=e.stats)||void 0===t||null===(n=t[i.code])||void 0===n?void 0:n.tops)||0},v=Object.values(e).filter((e=>{const n=null===t||void 0===t?void 0:t.some((t=>t.climbNo===e.climbNo&&t.topped));if(n)return!1;if(e.score<=d)return!1;if(p>0){if(pc(h,e.score,u,c)-f<.5*g)return!1}return!l||mc(e.station)===l})).map((e=>{const t=pc(h,e.score,u,c);return{...e,additionalPoints:t-f,rankImprovement:gc(r,n,t)}})).sort(((e,t)=>{const n=m(e),r=m(t);return r!==n?r-n:t.score-e.score}));return v.filter((e=>a||e.rankImprovement>0))};const _c=function(e){let{sends:t=[],categoryCode:n="",isMobile:r=!1}=e;const i=[...n?t.filter((e=>e.categoryCode===n)):t].sort(((e,t)=>e.rank-t.rank));return(0,nc.jsxs)("table",{border:"1",className:"subTable",style:{width:"100%"},children:[(0,nc.jsx)("thead",{children:(0,nc.jsxs)("tr",{className:"subTableHeader",children:[(0,nc.jsxs)("th",{children:[!r&&"Overall ","Rank"]}),(0,nc.jsx)("th",{children:"Category"}),(0,nc.jsx)("th",{children:"Name"}),(0,nc.jsx)("th",{children:"Flashed?"}),(0,nc.jsx)("th",{children:"Sent"})]})}),(0,nc.jsx)("tbody",{children:i.length>0?i.map(((e,t)=>(0,nc.jsxs)("tr",{children:[(0,nc.jsx)("td",{children:e.rank}),(0,nc.jsx)("td",{children:e.category||"TBC"}),(0,nc.jsx)("td",{children:e.name}),(0,nc.jsx)("td",{children:e.flashed?"Y":""}),(0,nc.jsx)("td",{title:Gu(e.createdAt),children:Wu(e.createdAt)})]},t))):(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:"5",children:"No sends available"})})})]})};const yc=function(e){let{onClose:t,user:n}=e;const{isMobile:i}=ic(),{problems:s,scores:o,categories:a,userTableData:l}=lc(),{expandedRows:u,toggleRow:c}=fc(),h=l.filter((e=>e.category===n.category)),d=h.findIndex((e=>e.competitorNo===n.competitorNo)),f=(0,r.useMemo)((()=>{const e=o[n.competitorNo]||[],t=a[n.category];return vc(s,e,n,h,t,!1,!0,"").some((e=>e.rankImprovement>0))}),[s,o,n,h,a]),[p,g]=(0,r.useState)(0===d||!f),[m,v]=(0,r.useState)(!1),[_,y]=(0,r.useState)(""),b=o[n.competitorNo]||[],w=a[n.category],S=(0,r.useMemo)((()=>{const e=new Set;Object.values(s).forEach((t=>{t.station&&e.add(t.station)}));const t=Array.from(e),n={};return t.forEach((e=>{const t=mc(e);n[t]||(n[t]={name:t,locations:[]}),n[t].locations.push(e)})),Object.values(n).forEach((e=>{e.locations.sort(((e,t)=>mc(e)===e&&mc(t)!==t?-1:mc(e)!==e&&mc(t)===t?1:e.localeCompare(t)))})),Object.values(n).sort(((e,t)=>e.name.localeCompare(t.name)))}),[s]),k=vc(s,b,n,h,w,m,p,_),E=d>0?h[d-1].total-n.total:0,C=e=>{var t,r;return m?Object.values(e.stats||{}).reduce(((e,t)=>e+(t.tops||0)),0):(null===(t=e.stats)||void 0===t||null===(r=t[n.category])||void 0===r?void 0:r.tops)||0};return(0,nc.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,nc.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,nc.jsxs)("div",{className:"modal-header",children:[(0,nc.jsxs)("h2",{children:["Recommended Problems for ",n.name]}),(0,nc.jsx)("button",{onClick:t,children:"\xd7"})]}),(0,nc.jsxs)("div",{className:"modal-body",children:[(0,nc.jsxs)("div",{style:{marginBottom:"20px",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,nc.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,nc.jsx)("input",{type:"checkbox",checked:p,onChange:e=>g(e.target.checked)}),"Show problems that don't change rank"]}),(0,nc.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,nc.jsx)("input",{type:"checkbox",checked:m,onChange:e=>v(e.target.checked)}),"Use overall tops instead of category tops"]}),(0,nc.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,nc.jsx)("label",{htmlFor:"location-filter",children:"Filter by location:"}),(0,nc.jsxs)("select",{id:"location-filter",value:_,onChange:e=>y(e.target.value),style:{padding:"4px",borderRadius:"4px"},children:[(0,nc.jsx)("option",{value:"",children:"All locations"}),S.map((e=>(0,nc.jsxs)(r.Fragment,{children:[(0,nc.jsx)("option",{value:e.name,children:e.name}),(0,nc.jsx)("optgroup",{label:"Includes:",children:e.locations.filter((t=>t!==e.name)).map((e=>(0,nc.jsx)("option",{value:e,disabled:!0,children:e},e)))})]},e.name)))]})]})]}),d>0&&(0,nc.jsxs)("div",{style:{marginBottom:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:[(0,nc.jsxs)("strong",{children:[E," points"]})," till next rank (#",d,")"]}),(0,nc.jsxs)("table",{border:"1",className:"mainTable",children:[(0,nc.jsx)("thead",{className:"tableHeader",children:(0,nc.jsxs)("tr",{children:[(0,nc.jsxs)("th",{children:["Problem",!i&&" No."]}),(0,nc.jsxs)("th",{children:["Name",!i&&"/Grade"]}),!i&&(0,nc.jsx)("th",{children:"Points"}),(0,nc.jsxs)("th",{children:[!i&&"Additional ","Points"]}),(0,nc.jsx)("th",{children:"Rank Change"}),(0,nc.jsxs)("th",{children:[m?"Overall":n.category||"Category"," Tops"]})]})}),(0,nc.jsx)("tbody",{children:k.length>0?k.map((e=>{const t=u.has(e.climbNo),s=i?5:6;return(0,nc.jsxs)(r.Fragment,{children:[(0,nc.jsxs)("tr",{onClick:()=>c(e.climbNo),style:{cursor:"pointer"},children:[(0,nc.jsx)("td",{children:e.climbNo}),(0,nc.jsx)("td",{children:e.marking}),!i&&(0,nc.jsx)("td",{children:e.score}),(0,nc.jsxs)("td",{children:["+",e.additionalPoints]}),(0,nc.jsx)("td",{style:{backgroundColor:e.rankImprovement>0?"#e6ffe6":"transparent"},children:e.rankImprovement>0?`+${e.rankImprovement}`:"0"}),(0,nc.jsx)("td",{children:C(e)})]}),t&&(0,nc.jsx)("tr",{className:"subTableContainer",children:(0,nc.jsx)("td",{colSpan:s,children:(0,nc.jsx)(_c,{sends:e.sends,categoryCode:m?"":n.category,isMobile:i})})})]},e.climbNo)})):(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:i?5:6,children:"No recommendations available"})})})]}),(0,nc.jsx)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"4px"},children:(0,nc.jsxs)("p",{children:[(0,nc.jsx)("strong",{children:"How does this work?"}),(0,nc.jsx)("br",{}),"Recommended problems are sorted by most tops, then greatest rank change, then most points. Clicking a row will show other competitors who have topped that problem."]})})]})]})})};const bc=class{constructor(e,t,n,r,i){this.categories=e,this.competitors=t,this.problems=n,this.scores=r,this.competitionId=i,this.timeline=this._buildTimeline(),this.rankingsCache=new Map}_buildTimeline(){const e=[];return Object.entries(this.scores).forEach((t=>{let[n,r]=t;r.forEach((t=>{e.push({timestamp:new Date(t.createdAt),competitorNo:n,score:t})}))})),e.sort(((e,t)=>e.timestamp-t.timestamp))}async getRankingsAtTime(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=`${e.toISOString()}_${t}`;if(this.rankingsCache.has(n))return this.rankingsCache.get(n);const r={};Object.entries(this.scores).forEach((n=>{var i;let[s,o]=n;t&&(null===(i=this.competitors[s])||void 0===i?void 0:i.category)!==t||(r[s]=o.filter((t=>new Date(t.createdAt)<=e)))}));const i=oc(this.categories,this.competitors,this.problems,r);if(t){const e=[...i].sort(((e,t)=>t.total-e.total));return e.forEach(((e,t)=>{e.categoryPosition=t+1})),this.rankingsCache.set(n,e),e}return this.rankingsCache.set(n,i),i}getKeyTimepoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"daily";if(0===this.timeline.length)return[];const t=this.timeline[0].timestamp,n=new Date,r=[];let i=new Date(t);for(;i<=n;)switch(r.push(new Date(i)),e){case"hourly":i.setHours(i.getHours()+1);break;case"daily":default:i.setDate(i.getDate()+1);break;case"weekly":i.setDate(i.getDate()+7)}return r}async getRankChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=await this.getRankingsAtTime(e,n),i=await this.getRankingsAtTime(t,n),s=n?r.filter((e=>e.category===n)).length:r.length;return r.map((e=>{const t=i.find((t=>t.competitorNo===e.competitorNo));if(!t)return{...e,rankChange:"new",previousRank:null,scoreChange:e.total};const r=n?e.categoryPosition:e.rank,o=n?t.categoryPosition:t.rank;let a=o-r;if(a>0){const e=s-r;a>e&&(a=e)}else if(a<0){const e=-(r-1);a<e&&(a=e)}return{...e,rankChange:a,previousRank:o,scoreChange:e.total-t.total}}))}async getCompetitorRankHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"daily",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=this.getKeyTimepoints(t),i=[];for(const s of r){const t=(await this.getRankingsAtTime(s,n)).find((t=>t.competitorNo===e));if(t){const e=n?t.categoryPosition:t.rank;i.push({timestamp:s,rank:e,total:t.total})}}return i}async getSignificantChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=await this.getRankChanges(e,t,r),s=i.filter((e=>"number"===typeof e.rankChange&&e.rankChange>n)).sort(((e,t)=>t.rankChange-e.rankChange)),o=i.filter((e=>"number"===typeof e.rankChange&&e.rankChange<-n)).sort(((e,t)=>e.rankChange-t.rankChange));return{risers:s,fallers:o}}async clearCache(){this.rankingsCache.clear(),console.log("In-memory rankings cache cleared")}},wc=(0,r.createContext)(),Sc=()=>{const e=(0,r.useContext)(wc);if(!e)throw new Error("useRankHistory must be used within a RankHistoryProvider");return e},kc=e=>{let{children:t}=e;const{categories:n,competitors:i,problems:s,scores:o}=lc(),{selectedCompId:a,selectedCategory:l,loading:u}=ic(),[c,h]=(0,r.useState)("daily"),d=r.useRef(null),f=(0,r.useCallback)((e=>{h(e),a&&localStorage.setItem(`timeframe_${a}`,e)}),[a]),[p,g]=(0,r.useState)([]),[m,v]=(0,r.useState)({risers:[],fallers:[]}),[_,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(a&&!u&&d.current!==a){const e=localStorage.getItem(`timeframe_${a}`);e&&h(e),d.current=a}}),[a,u]);const b=(0,r.useMemo)((()=>Object.keys(n).length&&Object.keys(i).length&&a?new bc(n,i,s,o,a):null),[n,i,s,o,a]),w=(0,r.useMemo)((()=>{const e=new Date;let t;switch(c){case"hourly":t=new Date(e),t.setHours(t.getHours()-1);break;case"halfday":t=new Date(e),t.setHours(t.getHours()-12);break;case"daily":default:t=new Date(e),t.setDate(t.getDate()-1);break;case"threedays":t=new Date(e),t.setDate(t.getDate()-3);break;case"weekly":t=new Date(e),t.setDate(t.getDate()-7)}return{current:e,previous:t}}),[c]);(0,r.useEffect)((()=>{(async()=>{if(b){y(!0);try{const e=await b.getRankChanges(w.current,w.previous,l);g(e);const t=await b.getSignificantChanges(w.current,w.previous,3,l);v(t)}catch(e){console.error("Error updating rank changes:",e)}finally{y(!1)}}})()}),[b,w,c,l]),(0,r.useEffect)((()=>()=>{b&&b.clearCache()}),[a,b]);const S={rankChanges:p,significantChanges:m,timeframe:c,setTimeframe:f,loading:_,getCompetitorRankHistory:async e=>{if(!b)return[];try{return await b.getCompetitorRankHistory(e,c,l)}catch(t){return console.error("Error getting competitor rank history:",t),[]}}};return(0,nc.jsx)(wc.Provider,{value:S,children:t})};const Ec=function(){var e;const{lastSubmittedScore:t,competitors:n,loading:r}=lc();if(r)return(0,nc.jsx)(nc.Fragment,{});if(!t)return(0,nc.jsx)("div",{style:{marginTop:"20px"},children:(0,nc.jsx)("p",{children:"No scores available for the selected category."})});const i=(null===(e=n[t.competitorNo])||void 0===e?void 0:e.name)||"Unknown";return(0,nc.jsx)("div",{style:{marginTop:"20px"},children:(0,nc.jsxs)("p",{children:["Last score in this category was submitted at: ",Wu(t.createdAt)," by ",i]})})};const Cc=function(e){let{progress:t,hideOnComplete:n=!0}=e;return n&&100===t?(0,nc.jsx)(nc.Fragment,{}):(0,nc.jsxs)("div",{className:"loading-progress-container",children:[(0,nc.jsx)("div",{className:"loading-progress-bar",children:(0,nc.jsx)("div",{className:"loading-progress-fill",style:{width:`${t}%`}})}),(0,nc.jsxs)("div",{className:"loading-progress-text",children:[t,"% loaded"]})]})};const xc=function(e){let{columns:t,data:n,initialSort:i={key:null,direction:"desc"},rowKey:s="id",onRowClick:o,renderExpandedContent:a,expandedRows:l=new Set,loading:u=!1,loadingProgress:c=0,partialDataAvailable:h=!1,emptyMessage:d="No data available"}=e;const{items:f,requestSort:p,sortConfig:g}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{key:null,direction:"desc"};const[n,i]=(0,r.useState)(t),[s,o]=(0,r.useState)(e),[a,l]=(0,r.useState)(e);e!==a&&(l(e),o(e));const u=(0,r.useCallback)((e=>{let t="asc";n.key===e&&"asc"===n.direction&&(t="desc"),i({key:e,direction:t})}),[n]),c=(0,r.useMemo)((()=>n.key?[...s].sort(((e,t)=>{let r=e[n.key],i=t[n.key];return r instanceof Date&&i instanceof Date?"asc"===n.direction?r.getTime()-i.getTime():i.getTime()-r.getTime():"number"===typeof r&&"number"===typeof i?"asc"===n.direction?r-i:i-r:"string"===typeof r&&"string"===typeof i?"asc"===n.direction?r.localeCompare(i):i.localeCompare(r):r<i?"asc"===n.direction?-1:1:r>i?"asc"===n.direction?1:-1:0})):s),[s,n.key,n.direction]),h=(0,r.useCallback)((e=>{o(e)}),[]);return{items:c,requestSort:u,sortConfig:n,setData:h}}(n,i);return u?(0,nc.jsxs)("div",{className:"loading-container",children:[(0,nc.jsx)(Cc,{progress:c}),(0,nc.jsxs)("table",{className:"mainTable",children:[(0,nc.jsx)("thead",{className:"tableHeader",children:(0,nc.jsx)("tr",{children:t.map((e=>(0,nc.jsx)("th",{children:e.label},e.key)))})}),(0,nc.jsx)("tbody",{children:(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:t.length,className:"loading-message",children:(0,nc.jsxs)("span",{className:"loading-text",children:["Loading data (",c,"%)"]})})})})]})]}):(0,nc.jsxs)("table",{className:"mainTable",children:[(0,nc.jsx)("thead",{className:"tableHeader",children:(0,nc.jsx)("tr",{children:t.map((e=>(0,nc.jsxs)("th",{onClick:()=>!1!==e.sortable&&p(e.key),style:{cursor:!1!==e.sortable?"pointer":"default"},children:[e.label,g.key===e.key&&(0,nc.jsx)("span",{children:"asc"===g.direction?" \ud83d\udd3c":" \ud83d\udd3d"})]},e.key)))})}),(0,nc.jsx)("tbody",{children:f.length>0?f.map((e=>{const n=l.has(e[s]);return(0,nc.jsxs)(r.Fragment,{children:[(0,nc.jsx)("tr",{onClick:()=>o&&o(e[s]),style:{cursor:o?"pointer":"default"},children:t.map((t=>(0,nc.jsx)("td",{children:t.render?t.render(e):e[t.key]},`${e[s]}-${t.key}`)))}),n&&a&&(0,nc.jsx)("tr",{className:"subTableContainer",children:(0,nc.jsx)("td",{colSpan:t.length,children:a(e)})})]},e[s])})):(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:t.length,children:d})})})]})};const Tc=function(){const{isMobile:e,selectedCategoryCode:t}=ic(),{categories:n,categoryTops:i,problems:s,loading:o,loadingProgress:a,partialDataAvailable:l,countCompetitors:u}=lc(),{expandedRows:c,toggleRow:h}=fc(),[d,f]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!0),m=(0,r.useMemo)((()=>Object.values(n).filter((e=>{var n;return(null===(n=i[e.code])||void 0===n?void 0:n.length)>0&&(!t||e.code===t)}))),[n,i,t]),v=(0,r.useMemo)((()=>[...[{key:"climbNo",label:"Problem"+(e?"":" No."),sortable:!0},{key:"marking",label:"Name"+(e?"":"/Grade"),sortable:!0},{key:"score",label:"Points",sortable:!0},{key:"createdAt",label:"Date Set",sortable:!0,render:e=>(0,nc.jsx)("span",{title:Gu(e.createdAt),children:Wu(e.createdAt)})}],...m.map((e=>({key:`stat-${e.code}`,label:e.name||"TBC",sortable:!0,render:t=>{const n=`stat-${e.code}`;return t[n]?(0,nc.jsx)("span",{children:t[n].rawValue}):(0,nc.jsx)("span",{children:"-"})}})))]),[m,e]),_=(0,r.useMemo)((()=>{let e=[...Object.values(s)];return p&&(e=e.filter((e=>!!e.stats&&Object.entries(e.stats).filter((e=>{var n;let[r,s]=e;return(null===(n=i[r])||void 0===n?void 0:n.length)>0&&(!t||r===t)})).some((e=>{let[t,n]=e;return n.tops>0}))))),e.map((e=>({...e,...m.reduce(((t,n)=>{const r=`stat-${n.code}`,i=e.stats&&e.stats[n.code];return t[r]=i?{tops:i.tops,flashes:i.flashes,rawValue:d?`${i.tops} (${i.flashes})`:`${(i.tops/u(n.code)).toFixed(0)}% (${(i.flashes/u(n.code)).toFixed(0)}%)`,sortValue:d?i.tops:i.tops/u(n.code)}:{rawValue:"-",sortValue:0},t}),{})})))}),[s,p,m,i,t,d,u]);return(0,nc.jsxs)(nc.Fragment,{children:[(0,nc.jsxs)("div",{className:"filters",children:[(0,nc.jsxs)("label",{children:[(0,nc.jsx)("input",{type:"checkbox",checked:d,onChange:()=>f(!d),disabled:o&&a<100}),"Show raw counts for tops and flashes"]}),(0,nc.jsxs)("label",{children:[(0,nc.jsx)("input",{type:"checkbox",checked:p,onChange:()=>g(!p),disabled:o&&a<100}),"Hide problems with no tops"]})]}),(0,nc.jsx)(xc,{columns:v,data:_,initialSort:{key:"score",direction:"desc"},rowKey:"climbNo",onRowClick:e=>h(e),renderExpandedContent:n=>(0,nc.jsx)(_c,{sends:n.sends,categoryCode:t,isMobile:e}),expandedRows:c,loading:o,loadingProgress:a,partialDataAvailable:l,emptyMessage:"No problems available"})]})};const Ic=function(){return(0,nc.jsxs)(nc.Fragment,{children:[(0,nc.jsx)(Tc,{}),(0,nc.jsx)(Ec,{})]})};var Nc,Pc="undefined"!=typeof window?window:void 0,Rc="undefined"!=typeof globalThis?globalThis:Pc,Ac=Array.prototype,Dc=Ac.forEach,Fc=Ac.indexOf,Lc=null==Rc?void 0:Rc.navigator,Oc=null==Rc?void 0:Rc.document,Mc=null==Rc?void 0:Rc.location,jc=null==Rc?void 0:Rc.fetch,$c=null!=Rc&&Rc.XMLHttpRequest&&"withCredentials"in new Rc.XMLHttpRequest?Rc.XMLHttpRequest:void 0,Vc=null==Rc?void 0:Rc.AbortController,Uc=null==Lc?void 0:Lc.userAgent,zc=null!=Pc?Pc:{},Bc={DEBUG:!1,LIB_VERSION:"1.218.2"},qc="$copy_autocapture",Hc=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(Nc||(Nc={}));var Wc={};function Gc(e,t,n){if(fh(e))if(Dc&&e.forEach===Dc)e.forEach(t,n);else if("length"in e&&e.length===+e.length)for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===Wc)return}function Kc(e,t,n){if(!wh(e)){if(fh(e))return Gc(e,t,n);if(Eh(e)){for(var r of e.entries())if(t.call(n,r[1],r[0])===Wc)return}else for(var i in e)if(hh.call(e,i)&&t.call(n,e[i],i)===Wc)return}}var Qc=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gc(n,(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},Xc=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gc(n,(function(t){Gc(t,(function(t){e.push(t)}))})),e};function Yc(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var Jc=function(e){try{return e()}catch(e){return}},Zc=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(e){Ih.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ih.critical(e)}}},eh=function(e){var t={};return Kc(e,(function(e,n){_h(e)&&e.length>0&&(t[n]=e)})),t};var th=["herokuapp.com","vercel.app","netlify.app"];function nh(e){var t=null==e?void 0:e.hostname;if(!_h(t))return!1;var n=t.split(".").slice(-2).join(".");for(var r of th)if(n===r)return!1;return!0}function rh(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function ih(e,t,n,r){var{capture:i=!1,passive:s=!0}=null!=r?r:{};null==e||e.addEventListener(t,n,{capture:i,passive:s})}function sh(e,t){return-1!==e.indexOf(t)}var oh=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},ah=function(e){return e.replace(/^\$/,"")},lh=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}},uh=Array.isArray,ch=Object.prototype,hh=ch.hasOwnProperty,dh=ch.toString,fh=uh||function(e){return"[object Array]"===dh.call(e)},ph=e=>"function"==typeof e,gh=e=>e===Object(e)&&!fh(e),mh=e=>{if(gh(e)){for(var t in e)if(hh.call(e,t))return!1;return!0}return!1},vh=e=>void 0===e,_h=e=>"[object String]"==dh.call(e),yh=e=>_h(e)&&0===e.trim().length,bh=e=>null===e,wh=e=>vh(e)||bh(e),Sh=e=>"[object Number]"==dh.call(e),kh=e=>"[object Boolean]"===dh.call(e),Eh=e=>e instanceof FormData,Ch=e=>e instanceof Error,xh=e=>sh(Hc,e),Th=e=>{var t={_log:function(t){if(Pc&&(Bc.DEBUG||zc.POSTHOG_DEBUG)&&!vh(Pc.console)&&Pc.console){for(var n=("__rrweb_original__"in Pc.console[t]?Pc.console[t].__rrweb_original__:Pc.console[t]),r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];n(e,...i)}},info:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log("log",...n)},warn:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log("warn",...n)},error:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._log("error",...n)},critical:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.error(e,...n)},uninitializedWarning:e=>{t.error("You must initialize PostHog before calling ".concat(e))},createLogger:t=>Th("".concat(e," ").concat(t))};return t},Ih=Th("[PostHog.js]"),Nh=Ih.createLogger,Ph=Nh("[ExternalScriptsLoader]"),Rh=(e,t,n)=>{if(e.config.disable_external_dependency_loading)return Ph.warn("".concat(t," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var r=()=>{if(!Oc)return n("document not found");var r=Oc.createElement("script");if(r.type="text/javascript",r.crossOrigin="anonymous",r.src=t,r.onload=e=>n(void 0,e),r.onerror=e=>n(e),e.config.prepare_external_dependency_script&&(r=e.config.prepare_external_dependency_script(r)),!r)return n("prepare_external_dependency_script returned null");var i,s=Oc.querySelectorAll("body > script");s.length>0?null===(i=s[0].parentNode)||void 0===i||i.insertBefore(r,s[0]):Oc.body.appendChild(r)};null!=Oc&&Oc.body?r():null==Oc||Oc.addEventListener("DOMContentLoaded",r)};function Ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(n),!0).forEach((function(t){Fh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lh(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}zc.__PosthogExtensions__=zc.__PosthogExtensions__||{},zc.__PosthogExtensions__.loadExternalDependency=(e,t,n)=>{var r="/static/".concat(t,".js")+"?v=".concat(e.version);if("remote-config"===t&&(r="/array/".concat(e.config.token,"/config.js")),"toolbar"===t){var i=3e5,s=Math.floor(Date.now()/i)*i;r="".concat(r,"&t=").concat(s)}var o=e.requestRouter.endpointFor("assets",r);Rh(e,o,n)},zc.__PosthogExtensions__.loadSiteApp=(e,t,n)=>{var r=e.requestRouter.endpointFor("api",t);Rh(e,r,n)};var Oh="$people_distinct_id",Mh="__alias",jh="__timers",$h="$autocapture_disabled_server_side",Vh="$heatmaps_enabled_server_side",Uh="$exception_capture_enabled_server_side",zh="$web_vitals_enabled_server_side",Bh="$dead_clicks_enabled_server_side",qh="$web_vitals_allowed_metrics",Hh="$session_recording_enabled_server_side",Wh="$console_log_recording_enabled_server_side",Gh="$session_recording_network_payload_capture",Kh="$session_recording_canvas_recording",Qh="$replay_sample_rate",Xh="$replay_minimum_duration",Yh="$replay_script_config",Jh="$sesid",Zh="$session_is_sampled",ed="$session_recording_url_trigger_activated_session",td="$session_recording_event_trigger_activated_session",nd="$enabled_feature_flags",rd="$early_access_features",id="$stored_person_properties",sd="$stored_group_properties",od="$surveys",ad="$surveys_activated",ld="$flag_call_reported",ud="$user_state",cd="$client_session_props",hd="$capture_rate_limit",dd="$initial_campaign_params",fd="$initial_referrer_info",pd="$initial_person_info",gd="$epp",md="__POSTHOG_TOOLBAR__",vd="$posthog_cookieless",_d=[Oh,Mh,"__cmpns",jh,Hh,Vh,Jh,nd,ud,rd,sd,id,od,ld,cd,hd,dd,fd,gd],yd=Nh("[FeatureFlags]"),bd="$active_feature_flags",wd="$override_feature_flags",Sd="$feature_flag_payloads",kd="$override_feature_flag_payloads",Ed=e=>{var t={};for(var[n,r]of Yc(e||{}))r&&(t[n]=r);return t};class Cd{constructor(e){Fh(this,"_override_warning",!1),Fh(this,"_hasLoadedFlags",!1),Fh(this,"_requestInFlight",!1),Fh(this,"_reloadingDisabled",!1),Fh(this,"_additionalReloadRequested",!1),Fh(this,"_decideCalled",!1),Fh(this,"_flagsLoadedFromRemote",!1),this.instance=e,this.featureFlagEventHandlers=[]}decide(){if(this.instance.config.__preview_remote_config)this._decideCalled=!0;else{var e=!this._reloadDebouncer&&(this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load);this._callDecideEndpoint({disableFlags:e})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(nd),t=this.instance.get_property(wd);if(!t)return e||{};for(var n=Qc({},e),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(yd.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:n}),this._override_warning=!0),n}getFlagPayloads(){var e=this.instance.get_property(Sd),t=this.instance.get_property(kd);if(!t)return e||{};for(var n=Qc({},e||{}),r=Object.keys(t),i=0;i<r.length;i++)n[r[i]]=t[r[i]];return this._override_warning||(yd.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:n}),this._override_warning=!0),n}reloadFeatureFlags(){this._reloadingDisabled||this.instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout((()=>{this._callDecideEndpoint()}),5))}clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this._reloadingDisabled=e}_callDecideEndpoint(e){if(this.clearDebouncer(),!this.instance.config.advanced_disable_decide)if(this._requestInFlight)this._additionalReloadRequested=!0;else{var t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:this.instance.get_property(id),group_properties:this.instance.get_property(sd)};(null!=e&&e.disableFlags||this.instance.config.advanced_disable_feature_flags)&&(t.disable_flags=!0),this._requestInFlight=!0,this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:Nc.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:e=>{var n,r,i=!0;200===e.statusCode&&(this.$anon_distinct_id=void 0,i=!1),this._requestInFlight=!1,this._decideCalled||(this._decideCalled=!0,this.instance._onRemoteConfig(null!==(r=e.json)&&void 0!==r?r:{})),t.disable_flags||(this._flagsLoadedFromRemote=!i,this.receivedFeatureFlags(null!==(n=e.json)&&void 0!==n?n:{},i),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callDecideEndpoint()))}})}}getFeatureFlag(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var n,r,i,s,o,a=this.getFlagVariants()[e],l="".concat(a),u=this.instance.get_property(ld)||{};return!t.send_event&&"send_event"in t||e in u&&u[e].includes(l)||(fh(u[e])?u[e].push(l):u[e]=[l],null===(n=this.instance.persistence)||void 0===n||n.register({[ld]:u}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:a,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_bootstrapped_response:(null===(r=this.instance.config.bootstrap)||void 0===r||null===(i=r.featureFlags)||void 0===i?void 0:i[e])||null,$feature_flag_bootstrapped_payload:(null===(s=this.instance.config.bootstrap)||void 0===s||null===(o=s.featureFlagPayloads)||void 0===o?void 0:o[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote})),a}yd.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var n=this.instance.config.token;this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:{distinct_id:this.instance.get_distinct_id(),token:n},compression:this.instance.config.disable_compression?void 0:Nc.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:n=>{var r,i=null===(r=n.json)||void 0===r?void 0:r.featureFlagPayloads;t((null==i?void 0:i[e])||void 0)}})}isFeatureEnabled(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);yd.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((t=>t!==e))}receivedFeatureFlags(e,t){if(this.instance.persistence){this._hasLoadedFlags=!0;var n=this.getFlagVariants(),r=this.getFlagPayloads();!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.featureFlags,s=e.featureFlagPayloads;if(i)if(fh(i)){var o={};if(i)for(var a=0;a<i.length;a++)o[i[a]]=!0;t&&t.register({[bd]:i,[nd]:o})}else{var l=i,u=s;e.errorsWhileComputingFlags&&(l=Dh(Dh({},n),l),u=Dh(Dh({},r),u)),t&&t.register({[bd]:Object.keys(Ed(l)),[nd]:l||{},[Sd]:u||{}})}}(e,this.instance.persistence,n,r),this._fireFeatureFlagsCallbacks(t)}}override(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];yd.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this.instance.__loaded||!this.instance.persistence)return yd.uninitializedWarning("posthog.feature_flags.overrideFeatureFlags");if(!1===e)return this.instance.persistence.unregister(wd),this.instance.persistence.unregister(kd),void this._fireFeatureFlagsCallbacks();if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,n=e;if(this._override_warning=Boolean(null!==(t=n.suppressWarning)&&void 0!==t&&t),"flags"in n)if(!1===n.flags)this.instance.persistence.unregister(wd);else if(n.flags)if(fh(n.flags)){for(var r={},i=0;i<n.flags.length;i++)r[n.flags[i]]=!0;this.instance.persistence.register({[wd]:r})}else this.instance.persistence.register({[wd]:n.flags});return"payloads"in n&&(!1===n.payloads?this.instance.persistence.unregister(kd):n.payloads&&this.instance.persistence.register({[kd]:n.payloads})),void this._fireFeatureFlagsCallbacks()}this._fireFeatureFlagsCallbacks()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();e(t,n)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var n,r=(this.instance.get_property(rd)||[]).find((t=>t.flagKey===e)),i={["$feature_enrollment/".concat(e)]:t},s={$feature_flag:e,$feature_enrollment:t,$set:i};r&&(s.$early_access_feature_name=r.name),this.instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(i,!1);var o=Dh(Dh({},this.getFlagVariants()),{},{[e]:t});null===(n=this.instance.persistence)||void 0===n||n.register({[bd]:Object.keys(Ed(o)),[nd]:o}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.instance.get_property(rd);if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{var n;if(t.json){var r=t.json.earlyAccessFeatures;return null===(n=this.instance.persistence)||void 0===n||n.register({[rd]:r}),e(r)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((e=>t[e])),flagVariants:Object.keys(t).filter((e=>t[e])).reduce(((e,n)=>(e[n]=t[n],e)),{})}}_fireFeatureFlagsCallbacks(e){var{flags:t,flagVariants:n}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach((r=>r(t,n,{errorsLoading:e})))}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(id)||{};this.instance.register({[id]:Dh(Dh({},n),e)}),t&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(id)}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.instance.get_property(sd)||{};0!==Object.keys(n).length&&Object.keys(n).forEach((t=>{n[t]=Dh(Dh({},n[t]),e[t]),delete e[t]})),this.instance.register({[sd]:Dh(Dh({},n),e)}),t&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this.instance.get_property(sd)||{};this.instance.register({[sd]:Dh(Dh({},t),{},{[e]:{}})})}else this.instance.unregister(sd)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Sh(e)&&isFinite(e)&&Math.floor(e)===e});var xd="0123456789abcdef";class Td{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,n,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||e<0||t<0||n<0||r<0||e>0xffffffffffff||t>4095||n>1073741823||r>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|t>>>8,i[7]=t,i[8]=128|n>>>24,i[9]=n>>>16,i[10]=n>>>8,i[11]=n,i[12]=r>>>24,i[13]=r>>>16,i[14]=r>>>8,i[15]=r,new Td(i)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+xd.charAt(this.bytes[t]>>>4)+xd.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Td(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var n=this.bytes[t]-e.bytes[t];if(0!==n)return Math.sign(n)}return 0}}class Id{constructor(){Fh(this,"timestamp",0),Fh(this,"counter",0),Fh(this,"random",new Rd)}generate(){var e=this.generateOrAbort();if(vh(e)){this.timestamp=0;var t=this.generateOrAbort();if(vh(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Td.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}var Nd,Pd=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};Pc&&!vh(Pc.crypto)&&crypto.getRandomValues&&(Pd=e=>crypto.getRandomValues(e));class Rd{constructor(){Fh(this,"buffer",new Uint32Array(8)),Fh(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(Pd(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}var Ad=()=>Dd().toString(),Dd=()=>(Nd||(Nd=new Id)).generate(),Fd="",Ld=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var Od={is_supported:()=>!!Oc,error:function(e){Ih.error("cookieStore error: "+e)},get:function(e){if(Oc){try{for(var t=e+"=",n=Oc.cookie.split(";").filter((e=>e.length)),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null}},parse:function(e){var t;try{t=JSON.parse(Od.get(e))||{}}catch(e){}return t},set:function(e,t,n,r,i){if(Oc)try{var s="",o="",a=function(e,t){if(t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oc;if(Fd)return Fd;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var n=e.split("."),r=Math.min(n.length,8),i="dmn_chk_"+Ad(),s=new RegExp("(^|;)\\s*"+i+"=1");!Fd&&r--;){var o=n.slice(r).join("."),a=i+"=1;domain=."+o;t.cookie=a,s.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",Fd=o)}return Fd}(e);if(!n){var r=(e=>{var t=e.match(Ld);return t?t[0]:""})(e);r!==n&&Ih.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}(Oc.location.hostname,r);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}i&&(o="; secure");var u=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&Ih.warn("cookieStore warning: large cookie, len="+u.length),Oc.cookie=u,u}catch(e){return}},remove:function(e,t){try{Od.set(e,"",-1,t)}catch(e){return}}},Md=null,jd={is_supported:function(){if(!bh(Md))return Md;var e=!0;if(vh(Pc))e=!1;else try{var t="__mplssupport__";jd.set(t,"xyz"),'"xyz"'!==jd.get(t)&&(e=!1),jd.remove(t)}catch(Pc){e=!1}return e||Ih.error("localStorage unsupported; falling back to cookie store"),Md=e,e},error:function(e){Ih.error("localStorage error: "+e)},get:function(e){try{return null==Pc?void 0:Pc.localStorage.getItem(e)}catch(e){jd.error(e)}return null},parse:function(e){try{return JSON.parse(jd.get(e))||{}}catch(e){}return null},set:function(e,t){try{null==Pc||Pc.localStorage.setItem(e,JSON.stringify(t))}catch(e){jd.error(e)}},remove:function(e){try{null==Pc||Pc.localStorage.removeItem(e)}catch(e){jd.error(e)}}},$d=["distinct_id",Jh,Zh,gd,pd],Vd=Dh(Dh({},jd),{},{parse:function(e){try{var t={};try{t=Od.parse(e)||{}}catch(e){}var n=Qc(t,JSON.parse(jd.get(e)||"{}"));return jd.set(e,n),n}catch(e){}return null},set:function(e,t,n,r,i,s){try{jd.set(e,t,void 0,void 0,s);var o={};$d.forEach((e=>{t[e]&&(o[e]=t[e])})),Object.keys(o).length&&Od.set(e,o,n,r,i,s)}catch(e){jd.error(e)}},remove:function(e,t){try{null==Pc||Pc.localStorage.removeItem(e),Od.remove(e,t)}catch(e){jd.error(e)}}}),Ud={},zd={is_supported:function(){return!0},error:function(e){Ih.error("memoryStorage error: "+e)},get:function(e){return Ud[e]||null},parse:function(e){return Ud[e]||null},set:function(e,t){Ud[e]=t},remove:function(e){delete Ud[e]}},Bd=null,qd={is_supported:function(){if(!bh(Bd))return Bd;if(Bd=!0,vh(Pc))Bd=!1;else try{var e="__support__";qd.set(e,"xyz"),'"xyz"'!==qd.get(e)&&(Bd=!1),qd.remove(e)}catch(e){Bd=!1}return Bd},error:function(e){Ih.error("sessionStorage error: ",e)},get:function(e){try{return null==Pc?void 0:Pc.sessionStorage.getItem(e)}catch(e){qd.error(e)}return null},parse:function(e){try{return JSON.parse(qd.get(e))||null}catch(e){}return null},set:function(e,t){try{null==Pc||Pc.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){qd.error(e)}},remove:function(e){try{null==Pc||Pc.sessionStorage.removeItem(e)}catch(e){qd.error(e)}}},Hd=["localhost","127.0.0.1"],Wd=e=>{var t=null==Oc?void 0:Oc.createElement("a");return vh(t)?null:(t.href=e,t)},Gd=function(e,t){for(var n,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===t){n=s;break}}if(!fh(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch(e){Ih.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Kd=function(e,t,n){if(!e||!t||!t.length)return e;for(var r=e.split("#"),i=r[0]||"",s=r[1],o=i.split("?"),a=o[1],l=o[0],u=(a||"").split("&"),c=[],h=0;h<u.length;h++){var d=u[h].split("=");fh(d)&&(t.includes(d[0])?c.push(d[0]+"="+n):c.push(u[h]))}var f=l;return null!=a&&(f+="?"+c.join("&")),null!=s&&(f+="#"+s),f},Qd=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},Xd="Mobile",Yd="iOS",Jd="Android",Zd="Tablet",ef=Jd+" "+Zd,tf="iPad",nf="Apple",rf=nf+" Watch",sf="Safari",of="BlackBerry",af="Samsung",lf=af+"Browser",uf=af+" Internet",cf="Chrome",hf=cf+" OS",df=cf+" "+Yd,ff="Internet Explorer",pf=ff+" "+Xd,gf="Opera",mf=gf+" Mini",vf="Edge",_f="Microsoft "+vf,yf="Firefox",bf=yf+" "+Yd,wf="Nintendo",Sf="PlayStation",kf="Xbox",Ef=Jd+" "+Xd,Cf=Xd+" "+sf,xf="Windows",Tf=xf+" Phone",If="Nokia",Nf="Ouya",Pf="Generic",Rf=Pf+" "+Xd.toLowerCase(),Af=Pf+" "+Zd.toLowerCase(),Df="Konqueror",Ff="(\\d+(\\.\\d+)?)",Lf=new RegExp("Version/"+Ff),Of=new RegExp(kf,"i"),Mf=new RegExp(Sf+" \\w+","i"),jf=new RegExp(wf+" \\w+","i"),$f=new RegExp(of+"|PlayBook|BB10","i"),Vf={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Uf=function(e,t){return t=t||"",sh(e," OPR/")&&sh(e,"Mini")?mf:sh(e," OPR/")?gf:$f.test(e)?of:sh(e,"IE"+Xd)||sh(e,"WPDesktop")?pf:sh(e,lf)?uf:sh(e,vf)||sh(e,"Edg/")?_f:sh(e,"FBIOS")?"Facebook "+Xd:sh(e,"UCWEB")||sh(e,"UCBrowser")?"UC Browser":sh(e,"CriOS")?df:sh(e,"CrMo")||sh(e,cf)?cf:sh(e,Jd)&&sh(e,sf)?Ef:sh(e,"FxiOS")?bf:sh(e.toLowerCase(),Df.toLowerCase())?Df:((e,t)=>t&&sh(t,nf)||function(e){return sh(e,sf)&&!sh(e,cf)&&!sh(e,Jd)}(e))(e,t)?sh(e,Xd)?Cf:sf:sh(e,yf)?yf:sh(e,"MSIE")||sh(e,"Trident/")?ff:sh(e,"Gecko")?yf:""},zf={[pf]:[new RegExp("rv:"+Ff)],[_f]:[new RegExp(vf+"?\\/"+Ff)],[cf]:[new RegExp("("+cf+"|CrMo)\\/"+Ff)],[df]:[new RegExp("CriOS\\/"+Ff)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Ff)],[sf]:[Lf],[Cf]:[Lf],[gf]:[new RegExp("(Opera|OPR)\\/"+Ff)],[yf]:[new RegExp(yf+"\\/"+Ff)],[bf]:[new RegExp("FxiOS\\/"+Ff)],[Df]:[new RegExp("Konqueror[:/]?"+Ff,"i")],[of]:[new RegExp(of+" "+Ff),Lf],[Ef]:[new RegExp("android\\s"+Ff,"i")],[uf]:[new RegExp(lf+"\\/"+Ff)],[ff]:[new RegExp("(rv:|MSIE )"+Ff)],Mozilla:[new RegExp("rv:"+Ff)]},Bf=[[new RegExp(kf+"; "+kf+" (.*?)[);]","i"),e=>[kf,e&&e[1]||""]],[new RegExp(wf,"i"),[wf,""]],[new RegExp(Sf,"i"),[Sf,""]],[$f,[of,""]],[new RegExp(xf,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Tf,""];if(new RegExp(Xd).test(t)&&!/IEMobile\b/.test(t))return[xf+" "+Xd,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=Vf[r]||"";return/arm/i.test(t)&&(i="RT"),[xf,i]}return[xf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Yd,t.join(".")]}return[Yd,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=vh(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+Jd+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Jd+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[Jd,t.join(".")]}return[Jd,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[hf,""]],[/Linux|debian/i,["Linux",""]]],qf=function(e){return jf.test(e)?wf:Mf.test(e)?Sf:Of.test(e)?kf:new RegExp(Nf,"i").test(e)?Nf:new RegExp("("+Tf+"|WPDesktop)","i").test(e)?Tf:/iPad/.test(e)?tf:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?rf:$f.test(e)?of:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(If,"i").test(e)?If:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(Xd).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?Jd:ef:Jd:new RegExp("(pda|"+Xd+")","i").test(e)?Rf:new RegExp(Zd,"i").test(e)&&!new RegExp(Zd+" pc","i").test(e)?Af:""},Hf="https?://(.*)",Wf=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","irclid","_kx"],Gf=Xc(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Wf),Kf="<masked>",Qf={campaignParams:function(){var{customTrackedParams:e,maskPersonalDataProperties:t,customPersonalDataProperties:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Oc)return{};var r=t?Xc([],Wf,n||[]):[];return this._campaignParamsFromUrl(Kd(Oc.URL,r,Kf),e)},_campaignParamsFromUrl:function(e,t){var n=Gf.concat(t||[]),r={};return Kc(n,(function(t){var n=Gd(e,t);r[t]=n||null})),r},_searchEngine:function(e){return e?0===e.search(Hf+"google.([^/?]*)")?"google":0===e.search(Hf+"bing.com")?"bing":0===e.search(Hf+"yahoo.com")?"yahoo":0===e.search(Hf+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(e){var t=Qf._searchEngine(e),n="yahoo"!=t?"q":"p",r={};if(!bh(t)){r.$search_engine=t;var i=Oc?Gd(Oc.referrer,n):"";i.length&&(r.ph_keyword=i)}return r},searchInfo:function(){var e=null==Oc?void 0:Oc.referrer;return e?this._searchInfoFromReferrer(e):{}},browser:Uf,browserVersion:function(e,t){var n=Uf(e,t),r=zf[n];if(vh(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=e.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},browserLanguagePrefix:function(){var e=this.browserLanguage();return"string"==typeof e?e.split("-")[0]:void 0},os:function(e){for(var t=0;t<Bf.length;t++){var[n,r]=Bf[t],i=n.exec(e),s=i&&(ph(r)?r(i,e):r);if(s)return s}return["",""]},device:qf,deviceType:function(e){var t=qf(e);return t===tf||t===ef||"Kobo"===t||"Kindle Fire"===t||t===Af?Zd:t===wf||t===kf||t===Sf||t===Nf?"Console":t===rf?"Wearable":t?Xd:"Desktop"},referrer:function(){return(null==Oc?void 0:Oc.referrer)||"$direct"},referringDomain:function(){var e;return null!=Oc&&Oc.referrer&&(null===(e=Wd(Oc.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:null==Mc?void 0:Mc.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(e){var t,{r:n,u:r}=e,i={$initial_referrer:n,$initial_referring_domain:null==n?void 0:"$direct"==n?"$direct":null===(t=Wd(n))||void 0===t?void 0:t.host};if(r){i.$initial_current_url=r;var s=Wd(r);i.$initial_host=null==s?void 0:s.host,i.$initial_pathname=null==s?void 0:s.pathname,Kc(this._campaignParamsFromUrl(r),(function(e,t){i["$initial_"+ah(t)]=e}))}return n&&Kc(this._searchInfoFromReferrer(n),(function(e,t){i["$initial_"+ah(t)]=e})),i},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(Nc){return}},timezoneOffset:function(){try{return(new Date).getTimezoneOffset()}catch(Nc){return}},properties:function(){var{maskPersonalDataProperties:e,customPersonalDataProperties:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Uc)return{};var n=e?Xc([],Wf,t||[]):[],[r,i]=Qf.os(Uc);return Qc(eh({$os:r,$os_version:i,$browser:Qf.browser(Uc,navigator.vendor),$device:Qf.device(Uc),$device_type:Qf.deviceType(Uc),$timezone:Qf.timezone(),$timezone_offset:Qf.timezoneOffset()}),{$current_url:Kd(null==Mc?void 0:Mc.href,n,Kf),$host:null==Mc?void 0:Mc.host,$pathname:null==Mc?void 0:Mc.pathname,$raw_user_agent:Uc.length>1e3?Uc.substring(0,997)+"...":Uc,$browser_version:Qf.browserVersion(Uc,navigator.vendor),$browser_language:Qf.browserLanguage(),$browser_language_prefix:Qf.browserLanguagePrefix(),$screen_height:null==Pc?void 0:Pc.screen.height,$screen_width:null==Pc?void 0:Pc.screen.width,$viewport_height:null==Pc?void 0:Pc.innerHeight,$viewport_width:null==Pc?void 0:Pc.innerWidth,$lib:"web",$lib_version:Bc.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!Uc)return{};var[e,t]=Qf.os(Uc);return Qc(eh({$os:e,$os_version:t,$browser:Qf.browser(Uc,navigator.vendor)}),{$browser_version:Qf.browserVersion(Uc,navigator.vendor)})}},Xf=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Yf{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&Ih.info("Persistence loaded",e.persistence,Dh({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){-1===Xf.indexOf(e.persistence.toLowerCase())&&(Ih.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&jd.is_supported()?jd:"localstorage+cookie"===t&&Vd.is_supported()?Vd:"sessionstorage"===t&&qd.is_supported()?qd:"memory"===t?zd:"cookie"===t?Od:Vd.is_supported()?Vd:Od}properties(){var e={};return Kc(this.props,(function(t,n){if(n===nd&&gh(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e["$feature/".concat(r[i])]=t[r[i]];else o=n,a=!1,(bh(s=_d)?a:Fc&&s.indexOf===Fc?-1!=s.indexOf(o):(Kc(s,(function(e){if(a||(a=e===o))return Wc})),a))||(e[n]=t);var s,o,a})),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=Qc({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,n){if(gh(e)){vh(t)&&(t="None"),this.expire_days=vh(n)?this.default_expiry:n;var r=!1;if(Kc(e,((e,n)=>{this.props.hasOwnProperty(n)&&this.props[n]!==t||(this.props[n]=e,r=!0)})),r)return this.save(),!0}return!1}register(e,t){if(gh(e)){this.expire_days=vh(t)?this.default_expiry:t;var n=!1;if(Kc(e,((t,r)=>{e.hasOwnProperty(r)&&this.props[r]!==t&&(this.props[r]=t,n=!0)})),n)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=Qf.campaignParams({customTrackedParams:this.config.custom_campaign_params,maskPersonalDataProperties:this.config.mask_personal_data_properties,customPersonalDataProperties:this.config.custom_personal_data_properties});mh(eh(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(Qf.searchInfo())}update_referrer_info(){this.register_once(Qf.referrerInfo(),void 0)}set_initial_person_info(){this.props[dd]||this.props[fd]||this.register_once({[pd]:Qf.initialPersonInfo()},void 0)}get_referrer_info(){return eh({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};Kc([fd,dd],(t=>{var n=this.props[t];n&&Kc(n,(function(t,n){e["$initial_"+ah(n)]=t}))}));var t=this.props[pd];if(t){var n=Qf.initialPersonPropsFromInfo(t);Qc(e,n)}return e}safe_merge(e){return Kc(this.props,(function(t,n){n in e||(e[n]=t)})),e}update_config(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.buildStorage(e),r=this.props;this.clear(),this.storage=n,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,t){var n=this.props[jh]||{};n[e]=t,this.props[jh]=n,this.save()}remove_event_timer(e){var t=(this.props[jh]||{})[e];return vh(t)||(delete this.props[jh][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}function Jf(e){var t,n;return(null===(t=JSON.stringify(e,(n=[],function(e,t){if(gh(t)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(t)?"[Circular]":(n.push(t),t)}return t})))||void 0===t?void 0:t.length)||0}function Zf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Zf({size:Jf(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Zf({size:Jf(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap((e=>e))}return[e]}var ep=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(ep||{}),tp=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(tp||{});function np(e){var t;return e instanceof Element&&(e.id===md||!(null===(t=e.closest)||void 0===t||!t.call(e,".toolbar-global-fade-container")))}function rp(e){return!!e&&1===e.nodeType}function ip(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function sp(e){return!!e&&3===e.nodeType}function op(e){return!!e&&11===e.nodeType}function ap(e){return e?oh(e).split(/\s+/):[]}function lp(e){var t=null==Pc?void 0:Pc.location.href;return!!(t&&e&&e.some((e=>t.match(e))))}function up(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return ap(t)}function cp(e){return wh(e)?null:oh(e).split(/(\s+)/).filter((e=>kp(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function hp(e){var t="";return gp(e)&&!mp(e)&&e.childNodes&&e.childNodes.length&&Kc(e.childNodes,(function(e){var n;sp(e)&&e.textContent&&(t+=null!==(n=cp(e.textContent))&&void 0!==n?n:"")})),oh(t)}function dp(e){return vh(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var fp=["a","button","form","input","select","textarea","label"];function pp(e){var t=e.parentNode;return!(!t||!rp(t))&&t}function gp(e){for(var t=e;t.parentNode&&!ip(t,"body");t=t.parentNode){var n=up(t);if(sh(n,"ph-sensitive")||sh(n,"ph-no-capture"))return!1}if(sh(up(e),"ph-include"))return!0;var r=e.type||"";if(_h(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!_h(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function mp(e){return!!(ip(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||ip(e,"select")||ip(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var vp="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",_p=new RegExp("^(?:".concat(vp,")$")),yp=new RegExp(vp),bp="\\d{3}-?\\d{2}-?\\d{4}",wp=new RegExp("^(".concat(bp,")$")),Sp=new RegExp("(".concat(bp,")"));function kp(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(wh(e))return!1;if(_h(e)){if(e=oh(e),(t?_p:yp).test((e||"").replace(/[- ]/g,"")))return!1;if((t?wp:Sp).test(e))return!1}return!0}function Ep(e){var t=hp(e);return kp(t="".concat(t," ").concat(Cp(e)).trim())?t:""}function Cp(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Kc(e.childNodes,(function(e){var n;if(e&&"span"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase()))try{var r=hp(e);t="".concat(t," ").concat(r).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(Cp(e)).trim())}catch(e){Ih.error("[AutoCapture]",e)}})),t}function xp(e){return function(e){var t=e.map((e=>{var t,n,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class)for(var i of(e.attr_class.sort(),e.attr_class))r+=".".concat(i.replace(/"/g,""));var s=Dh(Dh(Dh(Dh({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(n=e.nth_of_type)&&void 0!==n?n:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),o={};return Yc(s).sort(((e,t)=>{var[n]=e,[r]=t;return n.localeCompare(r)})).forEach((e=>{var[t,n]=e;return o[Tp(t.toString())]=Tp(n.toString())})),(r+=":")+Yc(s).map((e=>{var[t,n]=e;return"".concat(t,'="').concat(n,'"')})).join("")}));return t.join(";")}(function(e){return e.map((e=>{var t,n,r={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(n=e.attr__href)||void 0===n?void 0:n.slice(0,2048),attr_class:Ip(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Yc(e).filter((e=>{var[t]=e;return 0===t.indexOf("attr__")})).forEach((e=>{var[t,n]=e;return r.attributes[t]=n})),r}))}(e))}function Tp(e){return e.replace(/"|\\"/g,'\\"')}function Ip(e){var t=e.attr__class;return t?fh(t)?t:ap(t):void 0}var Np="[SessionRecording]",Pp="redacted",Rp={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},Ap=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Dp=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Fp=["/s/","/e/","/i/"];function Lp(e,t,n,r){if(wh(e))return e;var i=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return _h(i)&&(i=parseInt(i)),i>n?Np+" ".concat(r," body too large to record (").concat(i," bytes)"):e}function Op(e,t){if(wh(e))return e;var n=e;return kp(n,!1)||(n=Np+" "+t+" body "+Pp),Kc(Dp,(e=>{var r,i;null!==(r=n)&&void 0!==r&&r.length&&-1!==(null===(i=n)||void 0===i?void 0:i.indexOf(e))&&(n=Np+" "+t+" body "+Pp+" as might contain: "+e)})),n}function Mp(e,t,n,r,i){return t>n&&(Ih.warn("min cannot be greater than max."),t=n),Sh(e)?e>n?(r&&Ih.warn(r+" cannot be  greater than max: "+n+". Using max value instead."),n):e<t?(r&&Ih.warn(r+" cannot be less than min: "+t+". Using min value instead."),t):e:(r&&Ih.warn(r+" must be a number. using max or fallback. max: "+n+", fallback: "+i),Mp(i||n,t,n,r))}class jp{constructor(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fh(this,"bucketSize",100),Fh(this,"refillRate",10),Fh(this,"mutationBuckets",{}),Fh(this,"loggedTracker",{}),Fh(this,"refillBuckets",(()=>{Object.keys(this.mutationBuckets).forEach((e=>{this.mutationBuckets[e]=this.mutationBuckets[e]+this.refillRate,this.mutationBuckets[e]>=this.bucketSize&&delete this.mutationBuckets[e]}))})),Fh(this,"getNodeOrRelevantParent",(e=>{var t=this.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var n=t.closest("svg");if(n)return[this.rrweb.mirror.getId(n),n]}return[e,t]})),Fh(this,"numberOfChanges",(e=>{var t,n,r,i,s,o,a,l;return(null!==(t=null===(n=e.removes)||void 0===n?void 0:n.length)&&void 0!==t?t:0)+(null!==(r=null===(i=e.attributes)||void 0===i?void 0:i.length)&&void 0!==r?r:0)+(null!==(s=null===(o=e.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(l=e.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)})),Fh(this,"throttleMutations",(e=>{if(3!==e.type||0!==e.data.source)return e;var t=e.data,n=this.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((e=>{var t,n,r,[i,s]=this.getNodeOrRelevantParent(e.id);return 0!==this.mutationBuckets[i]&&(this.mutationBuckets[i]=null!==(t=this.mutationBuckets[i])&&void 0!==t?t:this.bucketSize,this.mutationBuckets[i]=Math.max(this.mutationBuckets[i]-1,0),0===this.mutationBuckets[i]&&(this.loggedTracker[i]||(this.loggedTracker[i]=!0,null===(n=(r=this.options).onBlockedNode)||void 0===n||n.call(r,i,s))),e)})));var r=this.numberOfChanges(t);return 0!==r||n===r?e:void 0})),this.rrweb=e,this.options=r,this.refillRate=Mp(null!==(t=this.options.refillRate)&&void 0!==t?t:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=Mp(null!==(n=this.options.bucketSize)&&void 0!==n?n:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval((()=>{this.refillBuckets()}),1e3)}}var $p=Uint8Array,Vp=Uint16Array,Up=Uint32Array,zp=new $p([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bp=new $p([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qp=new $p([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hp=function(e,t){for(var n=new Vp(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Up(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Wp=Hp(zp,2),Gp=Wp[0],Kp=Wp[1];Gp[28]=258,Kp[258]=28;for(var Qp=Hp(Bp,0)[1],Xp=new Vp(32768),Yp=0;Yp<32768;++Yp){var Jp=(43690&Yp)>>>1|(21845&Yp)<<1;Jp=(61680&(Jp=(52428&Jp)>>>2|(13107&Jp)<<2))>>>4|(3855&Jp)<<4,Xp[Yp]=((65280&Jp)>>>8|(255&Jp)<<8)>>>1}var Zp=function(e,t,n){for(var r=e.length,i=0,s=new Vp(t);i<r;++i)++s[e[i]-1];var o,a=new Vp(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new Vp(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],h=a[e[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[Xp[h]>>>l]=u}else for(o=new Vp(r),i=0;i<r;++i)o[i]=Xp[a[e[i]-1]++]>>>15-e[i];return o},eg=new $p(288);for(Yp=0;Yp<144;++Yp)eg[Yp]=8;for(Yp=144;Yp<256;++Yp)eg[Yp]=9;for(Yp=256;Yp<280;++Yp)eg[Yp]=7;for(Yp=280;Yp<288;++Yp)eg[Yp]=8;var tg=new $p(32);for(Yp=0;Yp<32;++Yp)tg[Yp]=5;var ng=Zp(eg,9,0),rg=Zp(tg,5,0),ig=function(e){return(e/8|0)+(7&e&&1)},sg=function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Vp?Vp:e instanceof Up?Up:$p)(n-t);return r.set(e.subarray(t,n)),r},og=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},ag=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},lg=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,s=n.slice();if(!i)return[new $p(0),0];if(1==i){var o=new $p(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};var d=s[0].s;for(r=1;r<i;++r)s[r].s>d&&(d=s[r].s);var f=new Vp(d+1),p=ug(n[c-1],f,0);if(p>t){r=0;var g=0,m=p-t,v=1<<m;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));r<i;++r){var _=s[r].s;if(!(f[_]>t))break;g+=v-(1<<p-f[_]),f[_]=t}for(g>>>=m;g>0;){var y=s[r].s;f[y]<t?g-=1<<t-f[y]++-1:++r}for(;r>=0&&g;--r){var b=s[r].s;f[b]==t&&(--f[b],++g)}p=t}return[new $p(f),p]},ug=function(e,t,n){return-1==e.s?Math.max(ug(e.l,t,n+1),ug(e.r,t,n+1)):t[e.s]=n},cg=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Vp(++t),r=0,i=e[0],s=1,o=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[a]}return[n.subarray(0,r),t]},hg=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},dg=function(e,t,n){var r=n.length,i=ig(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<r;++s)e[i+s+4]=n[s];return 8*(i+4+r)},fg=function(e,t,n,r,i,s,o,a,l,u,c){og(t,c++,n),++i[256];for(var h=lg(i,15),d=h[0],f=h[1],p=lg(s,15),g=p[0],m=p[1],v=cg(d),_=v[0],y=v[1],b=cg(g),w=b[0],S=b[1],k=new Vp(19),E=0;E<_.length;++E)k[31&_[E]]++;for(E=0;E<w.length;++E)k[31&w[E]]++;for(var C=lg(k,7),x=C[0],T=C[1],I=19;I>4&&!x[qp[I-1]];--I);var N,P,R,A,D=u+5<<3,F=hg(i,eg)+hg(s,tg)+o,L=hg(i,d)+hg(s,g)+o+14+3*I+hg(k,x)+(2*k[16]+3*k[17]+7*k[18]);if(D<=F&&D<=L)return dg(t,c,e.subarray(l,l+u));if(og(t,c,1+(L<F)),c+=2,L<F){N=Zp(d,f,0),P=d,R=Zp(g,m,0),A=g;var O=Zp(x,T,0);for(og(t,c,y-257),og(t,c+5,S-1),og(t,c+10,I-4),c+=14,E=0;E<I;++E)og(t,c+3*E,x[qp[E]]);c+=3*I;for(var M=[_,w],j=0;j<2;++j){var $=M[j];for(E=0;E<$.length;++E){var V=31&$[E];og(t,c,O[V]),c+=x[V],V>15&&(og(t,c,$[E]>>>5&127),c+=$[E]>>>12)}}}else N=ng,P=eg,R=rg,A=tg;for(E=0;E<a;++E)if(r[E]>255){V=r[E]>>>18&31,ag(t,c,N[V+257]),c+=P[V+257],V>7&&(og(t,c,r[E]>>>23&31),c+=zp[V]);var U=31&r[E];ag(t,c,R[U]),c+=A[U],U>3&&(ag(t,c,r[E]>>>5&8191),c+=Bp[U])}else ag(t,c,N[r[E]]),c+=P[r[E]];return ag(t,c,N[256]),c+P[256]},pg=new Up([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gg=function(){for(var e=new Up(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),mg=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function vg(e,t){void 0===t&&(t={});var n=function(){var e=4294967295;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=gg[255&n^t[r]]^n>>>8;e=n},d:function(){return 4294967295^e}}}(),r=e.length;n.p(e);var i=function(e,t,n,r,i){return function(e,t,n,r,i,s){var o=e.length,a=new $p(r+o+5*(1+Math.floor(o/7e3))+i),l=a.subarray(r,a.length-i),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var h=c+65535;h<o?u=dg(l,u,e.subarray(c,h)):(l[c]=s,u=dg(l,u,e.subarray(c,o)))}else{for(var d=pg[t-1],f=d>>>13,p=8191&d,g=(1<<n)-1,m=new Vp(32768),v=new Vp(g+1),_=Math.ceil(n/3),y=2*_,b=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<y)&g},w=new Up(25e3),S=new Vp(288),k=new Vp(32),E=0,C=0,x=(c=0,0),T=0,I=0;c<o;++c){var N=b(c),P=32767&c,R=v[N];if(m[P]=R,v[N]=P,T<=c){var A=o-c;if((E>7e3||x>24576)&&A>423){u=fg(e,l,0,w,S,k,C,x,I,c-I,u),x=E=C=0,I=c;for(var D=0;D<286;++D)S[D]=0;for(D=0;D<30;++D)k[D]=0}var F=2,L=0,O=p,M=P-R&32767;if(A>2&&N==b(c-M))for(var j=Math.min(f,A)-1,$=Math.min(32767,c),V=Math.min(258,A);M<=$&&--O&&P!=R;){if(e[c+F]==e[c+F-M]){for(var U=0;U<V&&e[c+U]==e[c+U-M];++U);if(U>F){if(F=U,L=M,U>j)break;var z=Math.min(M,U-2),B=0;for(D=0;D<z;++D){var q=c-M+D+32768&32767,H=q-m[q]+32768&32767;H>B&&(B=H,R=q)}}}M+=(P=R)-(R=m[P])+32768&32767}if(L){w[x++]=268435456|Kp[F]<<18|Qp[L];var W=31&Kp[F],G=31&Qp[L];C+=zp[W]+Bp[G],++S[257+W],++k[G],T=c+F,++E}else w[x++]=e[c],++S[e[c]]}}u=fg(e,l,s,w,S,k,C,x,I,c-I,u)}return sg(a,0,r+ig(u)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!i)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),s=i.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&mg(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(i,t),mg(i,s-8,n.d()),mg(i,s-4,r),i}function _g(e,t){var n=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new $p(e.length+(e.length>>>1)),i=0,s=function(e){r[i++]=e},o=0;o<n;++o){if(i+5>r.length){var a=new $p(i+8+(n-o<<1));a.set(r),r=a}var l=e.charCodeAt(o);l<128||t?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return sg(r,0,i)}var yg="[SessionRecording]",bg=Nh(yg),wg=[tp.MouseMove,tp.MouseInteraction,tp.Scroll,tp.ViewportResize,tp.Input,tp.TouchMove,tp.MediaInteraction,tp.Drag],Sg=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function kg(e){return function(e){for(var t="",n=0;n<e.length;){var r=e[n++];t+=String.fromCharCode(r)}return t}(vg(_g(JSON.stringify(e))))}function Eg(e){return e.type===ep.Custom&&"sessionIdle"===e.data.tag}function Cg(e,t){return t.some((t=>"regex"===t.matching&&new RegExp(t.url).test(e)))}class xg{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,t;return null==zc||null===(e=zc.__PosthogExtensions__)||void 0===e||null===(t=e.rrweb)||void 0===t?void 0:t.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(yg+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,t;return"trigger_pending"===this.triggerStatus?6e4:null!==(e=null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:3e5}get isSampled(){var e=this.instance.get_property(Zh);return kh(e)?e:null}get sessionDuration(){var e,t,n=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return n?n.timestamp-r:null}get isRecordingEnabled(){var e=!!this.instance.get_property(Hh),t=!this.instance.config.disable_session_recording;return Pc&&e&&t}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(Wh),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}get canvasRecording(){var e,t,n,r,i,s,o=this.instance.config.session_recording.captureCanvas,a=this.instance.get_property(Kh),l=null!==(e=null!==(t=null==o?void 0:o.recordCanvas)&&void 0!==t?t:null==a?void 0:a.enabled)&&void 0!==e&&e,u=null!==(n=null!==(r=null==o?void 0:o.canvasFps)&&void 0!==r?r:null==a?void 0:a.fps)&&void 0!==n?n:4,c=null!==(i=null!==(s=null==o?void 0:o.canvasQuality)&&void 0!==s?s:null==a?void 0:a.quality)&&void 0!==i?i:.4;if("string"==typeof c){var h=parseFloat(c);c=isNaN(h)?.4:h}return{enabled:l,fps:Mp(u,0,12,"canvas recording fps",4),quality:Mp(c,0,1,"canvas recording quality",.4)}}get networkPayloadCapture(){var e,t,n=this.instance.get_property(Gh),r={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},i=(null==r?void 0:r.recordHeaders)||(null==n?void 0:n.recordHeaders),s=(null==r?void 0:r.recordBody)||(null==n?void 0:n.recordBody),o=gh(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,a=!!(kh(o)?o:null==n?void 0:n.capturePerformance);return i||s||a?{recordHeaders:i,recordBody:s,recordPerformance:a}:void 0}get sampleRate(){var e=this.instance.get_property(Qh);return Sh(e)?e:null}get minimumDuration(){var e=this.instance.get_property(Xh);return Sh(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?!1===this.isSampled?"disabled":this._urlBlocked?"paused":wh(this._linkedFlag)||this._linkedFlagSeen?"trigger_pending"===this.triggerStatus?"buffering":kh(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return 0===this._urlTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(ed))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return 0===this._eventTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(td))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e="trigger_activated"===this.eventTriggerStatus||"trigger_activated"===this.urlTriggerStatus,t="trigger_pending"===this.eventTriggerStatus||"trigger_pending"===this.urlTriggerStatus;return e?"trigger_activated":t?"trigger_pending":"trigger_disabled"}constructor(e){if(Fh(this,"queuedRRWebEvents",[]),Fh(this,"isIdle",!1),Fh(this,"_linkedFlagSeen",!1),Fh(this,"_lastActivityTimestamp",Date.now()),Fh(this,"_linkedFlag",null),Fh(this,"_removePageViewCaptureHook",void 0),Fh(this,"_onSessionIdListener",void 0),Fh(this,"_persistDecideOnSessionListener",void 0),Fh(this,"_samplingSessionListener",void 0),Fh(this,"_urlTriggers",[]),Fh(this,"_urlBlocklist",[]),Fh(this,"_urlBlocked",!1),Fh(this,"_eventTriggers",[]),Fh(this,"_removeEventTriggerCaptureHook",void 0),Fh(this,"_forceAllowLocalhostNetworkCapture",!1),Fh(this,"_onBeforeUnload",(()=>{this._flushBuffer()})),Fh(this,"_onOffline",(()=>{this._tryAddCustomEvent("browser offline",{})})),Fh(this,"_onOnline",(()=>{this._tryAddCustomEvent("browser online",{})})),Fh(this,"_onVisibilityChange",(()=>{if(null!=Oc&&Oc.visibilityState){var e="window "+Oc.visibilityState;this._tryAddCustomEvent(e,{})}})),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw bg.error("started without valid sessionManager"),new Error(yg+" started without valid sessionManager. This is a bug.");if(this.instance.config.__preview_experimental_cookieless_mode)throw new Error(yg+" cannot be used with __preview_experimental_cookieless_mode.");var{sessionId:t,windowId:n}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=t,this.windowId=n,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&bg.warn("session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),ih(Pc,"beforeunload",this._onBeforeUnload),ih(Pc,"offline",this._onOffline),ih(Pc,"online",this._onOnline),ih(Pc,"visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),wh(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance.on("eventCaptured",(e=>{try{if("$pageview"===e.event){var t=null!=e&&e.properties.$current_url?this._maskUrl(null==e?void 0:e.properties.$current_url):"";if(!t)return;this._tryAddCustomEvent("$pageview",{href:t})}}catch(e){bg.error("Could not add $pageview to rrweb session",e)}}))),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId(((e,t,n)=>{var r,i,s,o;n&&(this._tryAddCustomEvent("$session_id_change",{sessionId:e,windowId:t,changeReason:n}),null===(r=this.instance)||void 0===r||null===(i=r.persistence)||void 0===i||i.unregister(td),null===(s=this.instance)||void 0===s||null===(o=s.persistence)||void 0===o||o.unregister(ed))})))):this.stopRecording()}stopRecording(){var e,t,n,r;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,null==Pc||Pc.removeEventListener("beforeunload",this._onBeforeUnload),null==Pc||Pc.removeEventListener("offline",this._onOffline),null==Pc||Pc.removeEventListener("online",this._onOnline),null==Pc||Pc.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),null===(e=this._removePageViewCaptureHook)||void 0===e||e.call(this),this._removePageViewCaptureHook=void 0,null===(t=this._removeEventTriggerCaptureHook)||void 0===t||t.call(this),this._removeEventTriggerCaptureHook=void 0,null===(n=this._onSessionIdListener)||void 0===n||n.call(this),this._onSessionIdListener=void 0,null===(r=this._samplingSessionListener)||void 0===r||r.call(this),this._samplingSessionListener=void 0,bg.info("stopped"))}makeSamplingDecision(e){var t,n=this.sessionId!==e,r=this.sampleRate;if(Sh(r)){var i=this.isSampled,s=n||!kh(i),o=s?function(e,t){return function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}(e)%100<Mp(100*t,0,100)}(e,r):i;s&&(o?this._reportStarted("sampled"):bg.warn("Sample rate (".concat(r,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:o})),null===(t=this.instance.persistence)||void 0===t||t.register({[Zh]:o})}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register({[Zh]:null})}}onRemoteConfig(e){var t,n,r,i,s,o;if(this._tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(n=e.sessionRecording)&&void 0!==n&&n.endpoint&&(this._endpoint=null===(o=e.sessionRecording)||void 0===o?void 0:o.endpoint),this._setupSampling(),!wh(this._linkedFlag)&&!this._linkedFlagSeen){var a=_h(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,l=_h(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags(((e,t)=>{var n=gh(t)&&a in t,r=l?t[a]===l:n;r&&this._reportStarted("linked_flag_matched",{linkedFlag:a,linkedVariant:l}),this._linkedFlagSeen=r}))}null!==(r=e.sessionRecording)&&void 0!==r&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),null!==(i=e.sessionRecording)&&void 0!==i&&i.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),null!==(s=e.sessionRecording)&&void 0!==s&&s.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){Sh(this.sampleRate)&&wh(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((e=>{this.makeSamplingDecision(e)})))}_persistRemoteConfig(e){if(this.instance.persistence){var t,n=this.instance.persistence,r=()=>{var t,r,i,s,o,a,l,u,c=null===(t=e.sessionRecording)||void 0===t?void 0:t.sampleRate,h=wh(c)?null:parseFloat(c),d=null===(r=e.sessionRecording)||void 0===r?void 0:r.minimumDurationMilliseconds;n.register({[Hh]:!!e.sessionRecording,[Wh]:null===(i=e.sessionRecording)||void 0===i?void 0:i.consoleLogRecordingEnabled,[Gh]:Dh({capturePerformance:e.capturePerformance},null===(s=e.sessionRecording)||void 0===s?void 0:s.networkPayloadCapture),[Kh]:{enabled:null===(o=e.sessionRecording)||void 0===o?void 0:o.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(l=e.sessionRecording)||void 0===l?void 0:l.canvasQuality},[Qh]:h,[Xh]:vh(d)?null:d,[Yh]:null===(u=e.sessionRecording)||void 0===u?void 0:u.scriptConfig})};r(),null===(t=this._persistDecideOnSessionListener)||void 0===t||t.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){var t,n;vh(Object.assign)||vh(Array.from)||(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():null===(t=zc.__PosthogExtensions__)||void 0===t||null===(n=t.loadExternalDependency)||void 0===n||n.call(t,this.instance,this.scriptName,(e=>{if(e)return bg.error("could not load recorder",e);this._onScriptLoaded()})),bg.info("starting"),"active"===this.status&&this._reportStarted(e||"recording_initialized"))}get scriptName(){var e,t,n;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t||null===(n=t.get_property(Yh))||void 0===n?void 0:n.script)||"recorder"}isInteractiveEvent(e){var t;return 3===e.type&&-1!==wg.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}_updateWindowAndSessionIds(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var n=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),n=!0)),!this.isIdle){var{windowId:r,sessionId:i}=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),s=this.sessionId!==i,o=this.windowId!==r;this.windowId=r,this.sessionId=i,s||o?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):n&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(Pc){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):bg.warn("could not emit queued rrweb event.",Pc,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(Sg((()=>this.rrwebRecord.addCustomEvent(e,t))))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(Sg((()=>this.rrwebRecord.takeFullSnapshot())))}_onScriptLoaded(){var e,t={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},n=this.instance.config.session_recording;for(var[r,i]of Object.entries(n||{}))r in t&&("maskInputOptions"===r?t.maskInputOptions=Dh({password:!0},i):t[r]=i);if(this.canvasRecording&&this.canvasRecording.enabled&&(t.recordCanvas=!0,t.sampling={canvas:this.canvasRecording.fps},t.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new jp(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(e,t)=>{var n="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");bg.info(n,{node:t}),this.log(yg+" "+n,"warn")}});var s=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(Dh({emit:e=>{this.onRRwebEmit(e)},plugins:s},t)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:t,activePlugins:s.map((e=>null==e?void 0:e.name))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else bg.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval((()=>{this._tryTakeFullSnapshot()}),e))}}_gatherRRWebPlugins(){var e,t,n,r,i=[],s=null===(e=zc.__PosthogExtensions__)||void 0===e||null===(t=e.rrwebPlugins)||void 0===t?void 0:t.getRecordConsolePlugin;s&&this.isConsoleLogCaptureEnabled&&i.push(s());var o=null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.rrwebPlugins)||void 0===r?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&ph(o)&&(!Hd.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(o(((e,t)=>{var n,r,i,s={payloadSizeLimitBytes:Rp.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Rp.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...Rp.payloadHostDenyList]},o=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,l=!1!==e.capture_performance&&t.recordPerformance,u=(n=s,i=Math.min(1e6,null!==(r=n.payloadSizeLimitBytes)&&void 0!==r?r:1e6),e=>(null!=e&&e.requestBody&&(e.requestBody=Lp(e.requestBody,e.requestHeaders,i,"Request")),null!=e&&e.responseBody&&(e.responseBody=Lp(e.responseBody,e.responseHeaders,i,"Response")),e)),c=t=>{return u(((e,t)=>{var n,r=Wd(e.name),i=0===t.indexOf("http")?null===(n=Wd(t))||void 0===n?void 0:n.pathname:t;"/"===i&&(i="");var s=null==r?void 0:r.pathname.replace(i||"","");if(!(r&&s&&Fp.some((e=>0===s.indexOf(e)))))return e})((r=(n=t).requestHeaders,wh(r)||Kc(Object.keys(null!=r?r:{}),(e=>{Ap.includes(e.toLowerCase())&&(r[e]=Pp)})),n),e.api_host));var n,r},h=ph(e.session_recording.maskNetworkRequestFn);return h&&ph(e.session_recording.maskCapturedNetworkRequestFn)&&Ih.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),h&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{var n=e.session_recording.maskNetworkRequestFn({url:t.name});return Dh(Dh({},t),{},{name:null==n?void 0:n.url})}),s.maskRequestFn=ph(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var n,r,i,s=c(t);return s&&null!==(n=null===(r=(i=e.session_recording).maskCapturedNetworkRequestFn)||void 0===r?void 0:r.call(i,s))&&void 0!==n?n:void 0}:e=>function(e){if(!vh(e))return e.requestBody=Op(e.requestBody,"Request"),e.responseBody=Op(e.responseBody,"Response"),e}(c(e)),Dh(Dh(Dh({},Rp),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})})(this.instance.config,this.networkPayloadCapture))):bg.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var t;if(this._processQueuedEvents(),e&&gh(e)){if(e.type===ep.Meta){var n=this._maskUrl(e.data.href);if(this._lastHref=n,!n)return;e.data.href=n}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),!this._urlBlocked||function(e){return e.type===ep.Custom&&"recording paused"===e.data.tag}(e)){e.type===ep.FullSnapshot&&this._scheduleFullSnapshot(),e.type===ep.FullSnapshot&&"trigger_pending"===this.triggerStatus&&this.clearBuffer();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(r){var i=function(e){var t=e;if(t&&gh(t)&&6===t.type&&gh(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var n=[],r=0;r<t.data.payload.payload.length;r++)t.data.payload.payload[r]&&t.data.payload.payload[r].length>2e3?n.push(t.data.payload.payload[r].slice(0,2e3)+"...[truncated]"):n.push(t.data.payload.payload[r]);return t.data.payload.payload=n,e}return e}(r);if(this._updateWindowAndSessionIds(i),!this.isIdle||Eg(i)){if(Eg(i)){var s=i.data.payload;if(s){var o=s.lastActivityTimestamp,a=s.threshold;i.timestamp=o+a}}var l=null===(t=this.instance.config.session_recording.compress_events)||void 0===t||t?function(e){if(Jf(e)<1024)return e;try{if(e.type===ep.FullSnapshot)return Dh(Dh({},e),{},{data:kg(e.data),cv:"2024-10"});if(e.type===ep.IncrementalSnapshot&&e.data.source===tp.Mutation)return Dh(Dh({},e),{},{cv:"2024-10",data:Dh(Dh({},e.data),{},{texts:kg(e.data.texts),attributes:kg(e.data.attributes),removes:kg(e.data.removes),adds:kg(e.data.adds)})});if(e.type===ep.IncrementalSnapshot&&e.data.source===tp.StyleSheetRule)return Dh(Dh({},e),{},{cv:"2024-10",data:Dh(Dh({},e.data),{},{adds:e.data.adds?kg(e.data.adds):void 0,removes:e.data.removes?kg(e.data.removes):void 0})})}catch(e){bg.error("could not compress event - will use uncompressed event",e)}return e}(i):i,u={$snapshot_bytes:Jf(l),$snapshot_data:l,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(u):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&Pc){var e=this._maskUrl(Pc.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach((e=>{Date.now()-e.enqueuedAt<=2e3&&this._tryRRWebMethod(e)}))}}_maskUrl(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var n,r={url:e};return null===(n=r=t.maskNetworkRequestFn(r))||void 0===n?void 0:n.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,t=this.sessionDuration,n=Sh(t)&&t>=0,r=Sh(e)&&n&&t<e;return"buffering"===this.status||"paused"===this.status||"disabled"===this.status||r?(this.flushBufferTimer=setTimeout((()=>{this._flushBuffer()}),2e3),this.buffer):(this.buffer.data.length>0&&Zf(this.buffer).forEach((e=>{this._captureSnapshot({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId,$lib:"web",$lib_version:Bc.LIB_VERSION})})),this.clearBuffer())}_captureSnapshotBuffered(e){var t,n=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+n>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout((()=>{this._flushBuffer()}),2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(void 0!==Pc&&Pc.location.href){var e=Pc.location.href,t=this._urlBlocked,n=Cg(e,this._urlBlocklist);n&&!t?this._pauseRecording():!n&&t&&this._resumeRecording(),Cg(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var t,n;"trigger_pending"===this.triggerStatus&&(null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n||n.register({["url"===e?ed:td]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){this._urlBlocked||(this._urlBlocked=!0,clearInterval(this._fullSnapshotTimer),bg.info("recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){this._urlBlocked&&(this._urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),bg.info("recording resumed"))}_addEventTriggerListener(){0!==this._eventTriggers.length&&wh(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",(e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(e){bg.error("Could not activate event trigger",e)}})))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._tryTakeFullSnapshot(),this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;null===(e=this.instance.persistence)||void 0===e||e.register({[Zh]:!0}),this._tryTakeFullSnapshot(),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,t){this.instance.register_for_session({$session_recording_start_reason:e}),bg.info(e.replace("_"," "),t),sh(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,t)}}var Tg=Nh("[RemoteConfig]");class Ig{constructor(e){this.instance=e}get remoteConfig(){var e,t;return null===(e=zc._POSTHOG_REMOTE_CONFIG)||void 0===e||null===(t=e[this.instance.config.token])||void 0===t?void 0:t.config}_loadRemoteConfigJs(e){var t,n,r;null!==(t=zc.__PosthogExtensions__)&&void 0!==t&&t.loadExternalDependency?null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.loadExternalDependency)||void 0===r||r.call(n,this.instance,"remote-config",(()=>e(this.remoteConfig))):(Tg.error("PostHog Extensions not found. Cannot load remote config."),e())}_loadRemoteConfigJSON(e){this.instance._send_request({method:"GET",url:this.instance.requestRouter.endpointFor("assets","/array/".concat(this.instance.config.token,"/config")),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Tg.info("Using preloaded remote config",this.remoteConfig),void this.onRemoteConfig(this.remoteConfig);if(this.instance.config.advanced_disable_decide)return void Tg.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs((e=>{if(!e)return Tg.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON((e=>{this.onRemoteConfig(e)}));this.onRemoteConfig(e)}))}catch(Nc){Tg.error("Error loading remote config",Nc)}}onRemoteConfig(e){e?this.instance.config.__preview_remote_config?(this.instance._onRemoteConfig(e),!1!==e.hasFeatureFlags&&this.instance.featureFlags.ensureFlagsLoaded()):Tg.info("__preview_remote_config is disabled. Logging config instead",e):Tg.error("Failed to fetch remote config from PostHog.")}}var Ng,Pg=null!=Pc&&Pc.location?Qd(Pc.location.hash,"__posthog")||Qd(location.hash,"state"):null,Rg="_postHogToolbarParams",Ag=Nh("[Toolbar]");!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(Ng||(Ng={}));class Dg{constructor(e){this.instance=e}setToolbarState(e){zc.ph_toolbar_state=e}getToolbarState(){var e;return null!==(e=zc.ph_toolbar_state)&&void 0!==e?e:Ng.UNINITIALIZED}maybeLoadToolbar(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!Pc||!Oc)return!1;n=null!==(e=n)&&void 0!==e?e:Pc.location,i=null!==(t=i)&&void 0!==t?t:Pc.history;try{if(!r){try{Pc.localStorage.setItem("test","test"),Pc.localStorage.removeItem("test")}catch(e){return!1}r=null==Pc?void 0:Pc.localStorage}var s,o=Pg||Qd(n.hash,"__posthog")||Qd(n.hash,"state"),a=o?Jc((()=>JSON.parse(atob(decodeURIComponent(o)))))||Jc((()=>JSON.parse(decodeURIComponent(o)))):null;return a&&"ph_authorize"===a.action?((s=a).source="url",s&&Object.keys(s).length>0&&(a.desiredHash?n.hash=a.desiredHash:i?i.replaceState(i.state,"",n.pathname+n.search):n.hash="")):((s=JSON.parse(r.getItem(Rg)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch(e){return!1}}_callLoadToolbar(e){var t=zc.ph_load_toolbar||zc.ph_load_editor;!wh(t)&&ph(t)?t(e,this.instance):Ag.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==Oc||!Oc.getElementById(md));if(!Pc||t)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=Dh(Dh({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});if(Pc.localStorage.setItem(Rg,JSON.stringify(Dh(Dh({},r),{},{source:void 0}))),this.getToolbarState()===Ng.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===Ng.UNINITIALIZED){var i,s;this.setToolbarState(Ng.LOADING),null===(i=zc.__PosthogExtensions__)||void 0===i||null===(s=i.loadExternalDependency)||void 0===s||s.call(i,this.instance,"toolbar",(e=>{if(e)return Ag.error("[Toolbar] Failed to load",e),void this.setToolbarState(Ng.UNINITIALIZED);this.setToolbarState(Ng.LOADED),this._callLoadToolbar(r)})),ih(Pc,"turbolinks:load",(()=>{this.setToolbarState(Ng.UNINITIALIZED),this.loadToolbar(r)}))}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,n)}}var Fg=3e3;class Lg{constructor(e,t){Fh(this,"isPaused",!0),Fh(this,"queue",[]),this.flushTimeoutMs=Mp((null==t?void 0:t.flush_interval_ms)||Fg,250,5e3,"flush interval",Fg),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},t=Object.values(e),n=[...t.filter((e=>0===e.url.indexOf("/e"))),...t.filter((e=>0!==e.url.indexOf("/e")))];n.map((e=>{this.sendRequest(Dh(Dh({},e),{},{transport:"sendBeacon"}))}))}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout((()=>{if(this.clearFlushTimeout(),this.queue.length>0){var t=this.formatQueue(),n=function(n){var r=t[n],i=(new Date).getTime();r.data&&fh(r.data)&&Kc(r.data,(e=>{e.offset=Math.abs(e.timestamp-i),delete e.timestamp})),e.sendRequest(r)};for(var r in t)n(r)}}),this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return Kc(this.queue,(t=>{var n,r=t,i=(r?r.batchKey:null)||r.url;vh(e[i])&&(e[i]=Dh(Dh({},r),{},{data:[]})),null===(n=e[i].data)||void 0===n||n.push(r.data)})),this.queue=[],e}}var Og=!!$c||!!jc,Mg="text/plain",jg=(e,t)=>{var[n,r]=e.split("?"),i=Dh({},t);null==r||r.split("&").forEach((e=>{var[t]=e.split("=");delete i[t]}));var s=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",i=[];return Kc(e,(function(e,r){vh(e)||vh(r)||"undefined"===r||(t=encodeURIComponent((e=>e instanceof File)(e)?e.name:e.toString()),n=encodeURIComponent(r),i[i.length]=n+"="+t)})),i.join(r)}(i);return s=s?(r?r+"&":"")+s:r,"".concat(n,"?").concat(s)},$g=(e,t)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),t),Vg=e=>{var{data:t,compression:n}=e;if(t){if(n===Nc.GZipJS){var r=vg(_g($g(t)),{mtime:0}),i=new Blob([r],{type:Mg});return{contentType:Mg,body:i,estimatedSize:i.size}}if(n===Nc.Base64){var s=function(e){var t,n,r,i,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",c=[];if(!e)return e;e=function(e){var t,n,r,i,s="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var o=e.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),bh(a)||(n>t&&(s+=e.substring(t,n)),s+=a,t=n=i+1)}return n>t&&(s+=e.substring(t,e.length)),s}(e);do{t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,n=s>>12&63,r=s>>6&63,i=63&s,c[l++]=o.charAt(t)+o.charAt(n)+o.charAt(r)+o.charAt(i)}while(a<e.length);switch(u=c.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}($g(t)),o=(e=>"data="+encodeURIComponent("string"==typeof e?e:$g(e)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=$g(t);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Ug=[];jc&&Ug.push({transport:"fetch",method:e=>{var t,n,{contentType:r,body:i,estimatedSize:s}=null!==(t=Vg(e))&&void 0!==t?t:{},o=new Headers;Kc(e.headers,(function(e,t){o.append(t,e)})),r&&o.append("Content-Type",r);var a=e.url,l=null;if(Vc){var u=new Vc;l={signal:u.signal,timeout:setTimeout((()=>u.abort()),e.timeout)}}jc(a,Dh({method:(null==e?void 0:e.method)||"GET",headers:o,keepalive:"POST"===e.method&&(s||0)<52428.8,body:i,signal:null===(n=l)||void 0===n?void 0:n.signal},e.fetchOptions)).then((t=>t.text().then((n=>{var r,i={statusCode:t.status,text:n};if(200===t.status)try{i.json=JSON.parse(n)}catch(e){Ih.error(e)}null===(r=e.callback)||void 0===r||r.call(e,i)})))).catch((t=>{var n;Ih.error(t),null===(n=e.callback)||void 0===n||n.call(e,{statusCode:0,text:t})})).finally((()=>l?clearTimeout(l.timeout):null))}}),$c&&Ug.push({transport:"XHR",method:e=>{var t,n=new $c;n.open(e.method||"GET",e.url,!0);var{contentType:r,body:i}=null!==(t=Vg(e))&&void 0!==t?t:{};Kc(e.headers,(function(e,t){n.setRequestHeader(t,e)})),r&&n.setRequestHeader("Content-Type",r),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(4===n.readyState){var t,r={statusCode:n.status,text:n.responseText};if(200===n.status)try{r.json=JSON.parse(n.responseText)}catch(e){}null===(t=e.callback)||void 0===t||t.call(e,r)}},n.send(i)}}),null!=Lc&&Lc.sendBeacon&&Ug.push({transport:"sendBeacon",method:e=>{var t=jg(e.url,{beacon:"1"});try{var n,{contentType:r,body:i}=null!==(n=Vg(e))&&void 0!==n?n:{},s="string"==typeof i?new Blob([i],{type:r}):i;Lc.sendBeacon(t,s)}catch(e){}}});var zg=["retriesPerformedSoFar"];class Bg{constructor(e){Fh(this,"isPolling",!1),Fh(this,"pollIntervalMs",3e3),Fh(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!vh(Pc)&&"onLine"in Pc.navigator&&(this.areWeOnline=Pc.navigator.onLine,ih(Pc,"online",(()=>{this.areWeOnline=!0,this.flush()})),ih(Pc,"offline",(()=>{this.areWeOnline=!1})))}retriableRequest(e){var{retriesPerformedSoFar:t}=e,n=Lh(e,zg);Sh(t)&&t>0&&(n.url=jg(n.url,{retry_count:t})),this.instance._send_request(Dh(Dh({},n),{},{callback:e=>{var r;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.enqueue(Dh({retriesPerformedSoFar:t},n)):null===(r=n.callback)||void 0===r||r.call(n,e)}}))}enqueue(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var n=function(e){var t=3e3*Math.pow(2,e),n=t/2,r=Math.min(18e5,t),i=(Math.random()-.5)*(r-n);return Math.ceil(r+i)}(t),r=Date.now()+n;this.queue.push({retryAt:r,requestOptions:e});var i="Enqueued failed request for retry in ".concat(n);navigator.onLine||(i+=" (Browser is offline)"),Ih.warn(i),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout((()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()}),this.pollIntervalMs)}flush(){var e=Date.now(),t=[],n=this.queue.filter((n=>n.retryAt<e||(t.push(n),!1)));if(this.queue=t,n.length>0)for(var{requestOptions:r}of n)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(Dh(Dh({},e),{},{transport:"sendBeacon"}))}catch(e){Ih.error(e)}this.queue=[]}}var qg,Hg=Nh("[SessionId]");class Wg{constructor(e,t,n){var r;if(Fh(this,"_sessionIdChangedHandlers",[]),!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.config=e.config,this.persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=t||Ad,this._windowIdGenerator=n||Ad;var i=this.config.persistence_name||this.config.token,s=this.config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Mp(s,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.resetIdleTimer(),this._window_id_storage_key="ph_"+i+"_window_id",this._primary_window_exists_storage_key="ph_"+i+"_primary_window_exists",this._canUseSessionStorage()){var o=qd.parse(this._window_id_storage_key),a=qd.parse(this._primary_window_exists_storage_key);o&&!a?this._windowId=o:qd.remove(this._window_id_storage_key),qd.set(this._primary_window_exists_storage_key,!0)}if(null!==(r=this.config.bootstrap)&&void 0!==r&&r.sessionID)try{var l=(()=>{var e=this.config.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){Hg.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return vh(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter((t=>t!==e))}}_canUseSessionStorage(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&qd.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&qd.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?qd.parse(this._window_id_storage_key):null}_setSessionId(e,t,n){e===this._sessionId&&t===this._sessionActivityTimestamp&&n===this._sessionStartTimestamp||(this._sessionStartTimestamp=n,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register({[Jh]:[t,e,n]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Jh];return fh(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){ih(Pc,"beforeunload",(()=>{this._canUseSessionStorage()&&qd.remove(this._primary_window_exists_storage_key)}),{capture:!1})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.config.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var n=t||(new Date).getTime(),[r,i,s]=this._getSessionId(),o=this._getWindowId(),a=Sh(s)&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!i,c=!e&&Math.abs(n-r)>this.sessionTimeoutMs;u||c||a?(i=this._sessionIdGenerator(),o=this._windowIdGenerator(),Hg.info("new session ID generated",{sessionId:i,windowId:o,changeReason:{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}}),s=n,l=!0):o||(o=this._windowIdGenerator(),l=!0);var h=0===r||!e||a?n:r,d=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(i,h,d),e||this.resetIdleTimer(),l&&this._sessionIdChangedHandlers.forEach((e=>e(i,o,l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0))),{sessionId:i,windowId:o,sessionStartTimestamp:d,changeReason:l?{noSessionId:u,activityTimeout:c,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:r}}resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout((()=>{this.resetSessionId()}),1.1*this.sessionTimeoutMs)}}!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(qg||(qg={}));var Gg="i.posthog.com";class Kg{constructor(e){Fh(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e,t=null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace(".".concat(Gg),".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=qg.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=qg.EU:this._regionCache[this.apiHost]=qg.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:"/".concat(t)),"ui"===e)return this.uiHost+t;if(this.region===qg.CUSTOM)return this.apiHost+t;var n=Gg+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(n);case"api":return"https://".concat(this.region,".").concat(n)}}}var Qg="posthog-js";function Xg(e){var{organization:t,projectId:n,prefix:r,severityAllowList:i=["error"]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s=>{var o,a,l,u,c;if("*"!==i&&!i.includes(s.level)||!e.__loaded)return s;s.tags||(s.tags={});var h=e.requestRouter.endpointFor("ui","/project/".concat(e.config.token,"/person/").concat(e.get_distinct_id()));s.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var d=(null===(o=s.exception)||void 0===o?void 0:o.values)||[];d.forEach((e=>{e.stacktrace&&(e.stacktrace.type="raw",e.stacktrace.frames.forEach((e=>{e.platform="web:javascript"})))}));var f={$exception_message:(null===(a=d[0])||void 0===a?void 0:a.value)||s.message,$exception_type:null===(l=d[0])||void 0===l?void 0:l.type,$exception_personURL:h,$exception_level:s.level,$exception_list:d,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:(null===(u=d[0])||void 0===u?void 0:u.value)||s.message,$sentry_exception_type:null===(c=d[0])||void 0===c?void 0:c.type,$sentry_tags:s.tags};return t&&n&&(f.$sentry_url=(r||"https://sentry.io/organizations/")+t+"/issues/?project="+n+"&query="+s.event_id),e.exceptions.sendExceptionEvent(f),s}}class Yg{constructor(e,t,n,r,i){this.name=Qg,this.setupOnce=function(s){s(Xg(e,{organization:t,projectId:n,prefix:r,severityAllowList:i}))}}}var Jg=Nh("[SegmentIntegration]");class Zg{constructor(e){this._instance=e}doPageView(e,t){var n,r=this._previousPageViewProperties(e,t);return this._currentPageview={pathname:null!==(n=null==Pc?void 0:Pc.location.pathname)&&void 0!==n?n:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var t;return this._previousPageViewProperties(e,null===(t=this._currentPageview)||void 0===t?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null===(e=this._currentPageview)||void 0===e?void 0:e.pageViewId}}_previousPageViewProperties(e,t){var n=this._currentPageview;if(!n)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:n.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:o,maxScrollY:a,maxContentHeight:l,lastContentY:u,maxContentY:c}=i;if(!(vh(s)||vh(o)||vh(a)||vh(l)||vh(u)||vh(c))){s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),c=Math.ceil(c);var h=s<=1?1:Mp(o/s,0,1),d=s<=1?1:Mp(a/s,0,1),f=l<=1?1:Mp(u/l,0,1),p=l<=1?1:Mp(c/l,0,1);r=Qc(r,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:d,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:f,$prev_pageview_max_content:c,$prev_pageview_max_content_percentage:p})}}return n.pathname&&(r.$prev_pageview_pathname=n.pathname),n.timestamp&&(r.$prev_pageview_duration=(e.getTime()-n.timestamp.getTime())/1e3),r}}var em,tm,nm,rm,im,sm,om,am,lm,um,cm,hm={},dm=[],fm=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pm=Array.isArray;function gm(e,t){for(var n in t)e[n]=t[n];return e}function mm(e){var t=e.parentNode;t&&t.removeChild(e)}function vm(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++nm:i,__i:-1,__u:0};return null==i&&null!=tm.vnode&&tm.vnode(s),s}function _m(e){return e.children}function ym(e,t){this.props=e,this.context=t}function bm(e,t){if(null==t)return e.__?bm(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?bm(e):null}function wm(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return wm(e)}}function Sm(e){(!e.__d&&(e.__d=!0)&&rm.push(e)&&!km.__r++||im!==tm.debounceRendering)&&((im=tm.debounceRendering)||sm)(km)}function km(){var e,t,n,r,i,s,o,a,l;for(rm.sort(om);e=rm.shift();)e.__d&&(t=rm.length,r=void 0,s=(i=(n=e).__v).__e,a=[],l=[],(o=n.__P)&&((r=gm({},i)).__v=i.__v+1,tm.vnode&&tm.vnode(r),Rm(o,r,i,n.__n,void 0!==o.ownerSVGElement,32&i.__u?[s]:null,a,null==s?bm(i):s,!!(32&i.__u),l),r.__.__k[r.__i]=r,Am(a,r,l),r.__e!=s&&wm(r)),rm.length>t&&rm.sort(om));km.__r=0}function Em(e,t,n,r,i,s,o,a,l,u,c){var h,d,f,p,g,m=r&&r.__k||dm,v=t.length;for(n.__d=l,function(e,t,n){var r,i,s,o,a,l=t.length,u=n.length,c=u,h=0;for(e.__k=[],r=0;r<l;r++)null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?vm(null,i,null,null,i):pm(i)?vm(_m,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?vm(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,a=xm(i,n,o=r+h,c),i.__i=a,s=null,-1!==a&&(c--,(s=n[a])&&(s.__u|=131072)),null==s||null===s.__v?(-1==a&&h--,"function"!=typeof i.type&&(i.__u|=65536)):a!==o&&(a===o+1?h++:a>o?c>l-o?h+=a-o:h--:h=a<o&&a==o-1?a-o:0,a!==r+h&&(i.__u|=65536))):(s=n[r])&&null==s.key&&s.__e&&(s.__e==e.__d&&(e.__d=bm(s)),Fm(s,s,!1),n[r]=null,c--);if(c)for(r=0;r<u;r++)null!=(s=n[r])&&0==(131072&s.__u)&&(s.__e==e.__d&&(e.__d=bm(s)),Fm(s,s))}(n,t,m),l=n.__d,h=0;h<v;h++)null!=(f=n.__k[h])&&"boolean"!=typeof f&&"function"!=typeof f&&(d=-1===f.__i?hm:m[f.__i]||hm,f.__i=h,Rm(e,f,d,i,s,o,a,l,u,c),p=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Dm(d.ref,null,f),c.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),65536&f.__u||d.__k===f.__k?l=Cm(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=g}function Cm(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=Cm(r[i],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function xm(e,t,n,r){var i=e.key,s=e.type,o=n-1,a=n+1,l=t[n];if(null===l||l&&i==l.key&&s===l.type)return n;if(r>(null!=l&&0==(131072&l.__u)?1:0))for(;o>=0||a<t.length;){if(o>=0){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return o;o--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return a;a++}}return-1}function Tm(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||fm.test(t)?n:n+"px"}function Im(e,t,n,r,i){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Tm(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Tm(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?Pm:Nm,s)):e.removeEventListener(t,s?Pm:Nm,s);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function Nm(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(tm.event?tm.event(e):e)}function Pm(e){return this.l[e.type+!0](tm.event?tm.event(e):e)}function Rm(e,t,n,r,i,s,o,a,l,u){var c,h,d,f,p,g,m,v,_,y,b,w,S,k,E,C=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=t.__e=n.__e]),(c=tm.__b)&&c(t);e:if("function"==typeof C)try{if(v=t.props,_=(c=C.contextType)&&r[c.__c],y=c?_?_.props.value:c.__:r,n.__c?m=(h=t.__c=n.__c).__=h.__E:("prototype"in C&&C.prototype.render?t.__c=h=new C(v,y):(t.__c=h=new ym(v,y),h.constructor=C,h.render=Lm),_&&_.sub(h),h.props=v,h.state||(h.state={}),h.context=y,h.__n=r,d=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=C.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=gm({},h.__s)),gm(h.__s,C.getDerivedStateFromProps(v,h.__s))),f=h.props,p=h.state,h.__v=t,d)null==C.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==C.getDerivedStateFromProps&&v!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(v,y),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(v,h.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=v,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<h._sb.length;b++)h.__h.push(h._sb[b]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(v,h.__s,y),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,p,g)}))}if(h.context=y,h.props=v,h.__P=e,h.__e=!1,w=tm.__r,S=0,"prototype"in C&&C.prototype.render){for(h.state=h.__s,h.__d=!1,w&&w(t),c=h.render(h.props,h.state,h.context),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[]}else do{h.__d=!1,w&&w(t),c=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++S<25);h.state=h.__s,null!=h.getChildContext&&(r=gm(gm({},r),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(f,p)),Em(e,pm(E=null!=c&&c.type===_m&&null==c.key?c.props.children:c)?E:[E],t,n,r,i,s,o,a,l,u),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),m&&(h.__E=h.__=null)}catch(e){t.__v=null,l||null!=s?(t.__e=a,t.__u|=l?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),tm.__e(e,t,n)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,i,s,o,a,l){var u,c,h,d,f,p,g,m=n.props,v=t.props,_=t.type;if("svg"===_&&(i=!0),null!=s)for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!_&&(_?f.localName===_:3===f.nodeType)){e=f,s[u]=null;break}if(null==e){if(null===_)return document.createTextNode(v);e=i?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_,v.is&&v),s=null,a=!1}if(null===_)m===v||a&&e.data===v||(e.data=v);else{if(s=s&&em.call(e.childNodes),m=n.props||hm,!a&&null!=s)for(m={},u=0;u<e.attributes.length;u++)m[(f=e.attributes[u]).name]=f.value;for(u in m)f=m[u],"children"==u||("dangerouslySetInnerHTML"==u?h=f:"key"===u||u in v||Im(e,u,null,f,i));for(u in v)f=v[u],"children"==u?d=f:"dangerouslySetInnerHTML"==u?c=f:"value"==u?p=f:"checked"==u?g=f:"key"===u||a&&"function"!=typeof f||m[u]===f||Im(e,u,f,m[u],i);if(c)a||h&&(c.__html===h.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(h&&(e.innerHTML=""),Em(e,pm(d)?d:[d],t,n,r,i&&"foreignObject"!==_,s,o,s?s[0]:n.__k&&bm(n,0),a,l),null!=s)for(u=s.length;u--;)null!=s[u]&&mm(s[u]);a||(u="value",void 0!==p&&(p!==e[u]||"progress"===_&&!p||"option"===_&&p!==m[u])&&Im(e,u,p,m[u],!1),u="checked",void 0!==g&&g!==e[u]&&Im(e,u,g,m[u],!1))}return e}(n.__e,t,n,r,i,s,o,l,u);(c=tm.diffed)&&c(t)}function Am(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Dm(n[r],n[++r],n[++r]);tm.__c&&tm.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){tm.__e(e,t.__v)}}))}function Dm(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){tm.__e(e,n)}}function Fm(e,t,n){var r,i;if(tm.unmount&&tm.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Dm(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){tm.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Fm(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||mm(e.__e),e.__=e.__e=e.__d=void 0}function Lm(e,t,n){return this.constructor(e,n)}em=dm.slice,tm={__e:function(e,t,n,r){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},nm=0,ym.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=gm({},this.state),"function"==typeof e&&(e=e(gm({},n),this.props)),e&&gm(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),Sm(this))},ym.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Sm(this))},ym.prototype.render=_m,rm=[],sm="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,om=function(e,t){return e.__v.__b-t.__v.__b},km.__r=0,am=0,function(e,t){var n={__c:t="__cC"+am++,__:{isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0,onPreviewSubmit:()=>{}},Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,Sm(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};n.Provider.__=n.Consumer.contextType=n}(),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(lm||(lm={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(um||(um={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(cm||(cm={}));class Om{constructor(){Fh(this,"events",{}),this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter((e=>e!==t))}}emit(e,t){for(var n of this.events[e]||[])n(t);for(var r of this.events["*"]||[])r(e,t)}}class Mm{constructor(e){Fh(this,"_debugEventEmitter",new Om),Fh(this,"checkStep",((e,t)=>this.checkStepEvent(e,t)&&this.checkStepUrl(e,t)&&this.checkStepElement(e,t))),Fh(this,"checkStepEvent",((e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event))),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e,t;vh(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)||(null===(t=this.instance)||void 0===t||t._addCaptureHook(((e,t)=>{this.on(e,t)})))}register(e){var t,n;if(!vh(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)&&(e.forEach((e=>{var t,n;null===(t=this.actionRegistry)||void 0===t||t.add(e),null===(n=e.steps)||void 0===n||n.forEach((e=>{var t;null===(t=this.actionEvents)||void 0===t||t.add((null==e?void 0:e.event)||"")}))})),null!==(n=this.instance)&&void 0!==n&&n.autocapture)){var r,i=new Set;e.forEach((e=>{var t;null===(t=e.steps)||void 0===t||t.forEach((e=>{null!=e&&e.selector&&i.add(null==e?void 0:e.selector)}))})),null===(r=this.instance)||void 0===r||r.autocapture.setElementSelectors(i)}}on(e,t){var n;null!=t&&0!=e.length&&(this.actionEvents.has(e)||this.actionEvents.has(null==t?void 0:t.event))&&this.actionRegistry&&(null===(n=this.actionRegistry)||void 0===n?void 0:n.size)>0&&this.actionRegistry.forEach((e=>{this.checkAction(t,e)&&this._debugEventEmitter.emit("actionCaptured",e.name)}))}_addActionHook(e){this.onAction("actionCaptured",(t=>e(t)))}checkAction(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var n of t.steps)if(this.checkStep(e,n))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}checkStepUrl(e,t){if(null!=t&&t.url){var n,r=null==e||null===(n=e.properties)||void 0===n?void 0:n.$current_url;if(!r||"string"!=typeof r)return!1;if(!Mm.matchString(r,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static matchString(e,t,n){switch(n){case"regex":return!!Pc&&lh(e,t);case"exact":return t===e;case"contains":var r=Mm.escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*");return lh(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.getElementsList(e).some((e=>!(null!=t&&t.href&&!Mm.matchString(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact"))&&(null==t||!t.tag_name||e.tag_name===(null==t?void 0:t.tag_name))&&!(null!=t&&t.text&&!Mm.matchString(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!Mm.matchString(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")))))return!1;if(null!=t&&t.selector){var n,r=null==e||null===(n=e.properties)||void 0===n?void 0:n.$element_selectors;if(!r)return!1;if(!r.includes(null==t?void 0:t.selector))return!1}return!0}getElementsList(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}class jm{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var t;vh(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var t=e.filter((e=>{var t,n,r,i;return(null===(t=e.conditions)||void 0===t?void 0:t.actions)&&(null===(n=e.conditions)||void 0===n||null===(r=n.actions)||void 0===r||null===(i=r.values)||void 0===i?void 0:i.length)>0}));0!==t.length&&(null==this.actionMatcher&&(this.actionMatcher=new Mm(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook((e=>{this.onAction(e)}))),t.forEach((e=>{var t,n,r,i,s,o,a,l,u,c;e.conditions&&null!==(t=e.conditions)&&void 0!==t&&t.actions&&null!==(n=e.conditions)&&void 0!==n&&null!==(r=n.actions)&&void 0!==r&&r.values&&(null===(i=e.conditions)||void 0===i||null===(s=i.actions)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)>0&&(null===(a=this.actionMatcher)||void 0===a||a.register(e.conditions.actions.values),null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u||null===(c=u.values)||void 0===c||c.forEach((t=>{if(t&&t.name){var n=this.actionToSurveys.get(t.name);n&&n.push(e.id),this.actionToSurveys.set(t.name,n||[e.id])}})))})))}setupEventBasedSurveys(e){var t;0!==e.filter((e=>{var t,n,r,i;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(r=n.events)||void 0===r||null===(i=r.values)||void 0===i?void 0:i.length)>0})).length&&(null===(t=this.instance)||void 0===t||t._addCaptureHook(((e,t)=>{this.onEvent(e,t)})),e.forEach((e=>{var t,n,r;null===(t=e.conditions)||void 0===t||null===(n=t.events)||void 0===n||null===(r=n.values)||void 0===r||r.forEach((t=>{if(t&&t.name){var n=this.eventToSurveys.get(t.name);n&&n.push(e.id),this.eventToSurveys.set(t.name,n||[e.id])}}))})))}onEvent(e,t){var n,r,i=(null===(n=this.instance)||void 0===n||null===(r=n.persistence)||void 0===r?void 0:r.props[ad])||[];if(jm.SURVEY_SHOWN_EVENT_NAME==e&&t&&i.length>0){var s,o=null==t||null===(s=t.properties)||void 0===s?void 0:s.$survey_id;if(o){var a=i.indexOf(o);a>=0&&(i.splice(a,1),this._updateActivatedSurveys(i))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(i.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var t,n,r=(null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n?void 0:n.props[ad])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t,n;null===(t=this.instance)||void 0===t||null===(n=t.persistence)||void 0===n||n.register({[ad]:[...new Set(e)]})}getSurveys(){var e,t;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t?void 0:t.props[ad])||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}Fh(jm,"SURVEY_SHOWN_EVENT_NAME","survey shown");var $m=Nh("[Surveys]"),Vm={icontains:(e,t)=>e.some((e=>t.toLowerCase().includes(e.toLowerCase()))),not_icontains:(e,t)=>e.every((e=>!t.toLowerCase().includes(e.toLowerCase()))),regex:(e,t)=>e.some((e=>lh(t,e))),not_regex:(e,t)=>e.every((e=>!lh(t,e))),exact:(e,t)=>e.some((e=>t===e)),is_not:(e,t)=>e.every((e=>t!==e))};function Um(e,t,n){var r,i=e.questions[t],s=t+1;if(null===(r=i.branching)||void 0===r||!r.type)return t===e.questions.length-1?cm.End:s;if(i.branching.type===cm.End)return cm.End;if(i.branching.type===cm.SpecificQuestion){if(Number.isInteger(i.branching.index))return i.branching.index}else if(i.branching.type===cm.ResponseBased){if(i.type===um.SingleChoice){var o,a,l=i.choices.indexOf("".concat(n));if(null!==(o=i.branching)&&void 0!==o&&null!==(a=o.responseValues)&&void 0!==a&&a.hasOwnProperty(l)){var u=i.branching.responseValues[l];return Number.isInteger(u)?u:u===cm.End?cm.End:s}}else if(i.type===um.Rating){var c,h;if("number"!=typeof n||!Number.isInteger(n))throw new Error("The response type must be an integer");var d=function(e,t){if(3===t){if(e<1||e>3)throw new Error("The response must be in range 1-3");return 1===e?"negative":2===e?"neutral":"positive"}if(5===t){if(e<1||e>5)throw new Error("The response must be in range 1-5");return e<=2?"negative":3===e?"neutral":"positive"}if(7===t){if(e<1||e>7)throw new Error("The response must be in range 1-7");return e<=3?"negative":4===e?"neutral":"positive"}if(10===t){if(e<0||e>10)throw new Error("The response must be in range 0-10");return e<=6?"detractors":e<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(n,i.scale);if(null!==(c=i.branching)&&void 0!==c&&null!==(h=c.responseValues)&&void 0!==h&&h.hasOwnProperty(d)){var f=i.branching.responseValues[d];return Number.isInteger(f)?f:f===cm.End?cm.End:s}}return s}return $m.warn("Falling back to next question index due to unexpected branching type"),s}function zm(e){return null!=e?e:"icontains"}class Bm{constructor(e){Fh(this,"getNextSurveyStep",Um),this.instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){this._decideServerResponse=!!e.surveys,$m.info("decideServerResponse set to ".concat(this._decideServerResponse)),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);null!=n&&n.startsWith("seenSurvey_")&&e.push(n)}return e})();e.forEach((e=>localStorage.removeItem(e)))}loadIfEnabled(){if(!this._surveyManager)if(this.instance.config.disable_surveys)$m.info("Disabled. Not loading surveys.");else{var e=null==zc?void 0:zc.__PosthogExtensions__;if(e){var t=e.generateSurveys;if(this._decideServerResponse)if(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new jm(this.instance)),t)this._surveyManager=t(this.instance);else{var n=e.loadExternalDependency;n?n(this.instance,"surveys",(t=>{var n;t?$m.error("Could not load surveys script",t):this._surveyManager=null===(n=e.generateSurveys)||void 0===n?void 0:n.call(e,this.instance)})):$m.error("PostHog loadExternalDependency extension not found. Cannot load remote config.")}else $m.warn("Decide not loaded yet. Not loading surveys.")}else $m.error("PostHog Extensions not found.")}}getSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return $m.info("Disabled. Not loading surveys."),e([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new jm(this.instance));var n=this.instance.get_property(od);if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{var n,r=t.statusCode;if(200!==r||!t.json)return $m.error("Surveys API could not be loaded, status: ".concat(r)),e([]);var i,s=t.json.surveys||[],o=s.filter((e=>{var t,n,r,i,s,o,a,l,u,c,h,d;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(n=e.conditions)||void 0===n||null===(r=n.events)||void 0===r?void 0:r.values)&&(null===(i=e.conditions)||void 0===i||null===(s=i.events)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)>0||(null===(a=e.conditions)||void 0===a?void 0:a.actions)&&(null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u?void 0:u.values)&&(null===(c=e.conditions)||void 0===c||null===(h=c.actions)||void 0===h||null===(d=h.values)||void 0===d?void 0:d.length)>0}));return o.length>0&&(null===(i=this._surveyEventReceiver)||void 0===i||i.register(o)),null===(n=this.instance.persistence)||void 0===n||n.register({[od]:s}),e(s)}})}isSurveyFeatureFlagEnabled(e){return!e||this.instance.featureFlags.isFeatureEnabled(e)}getActiveMatchingSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((t=>{var n,r=t.filter((e=>!(!e.start_date||e.end_date))).filter((e=>{var t;if(!e.conditions)return!0;var n=function(e){var t,n,r;if(null===(t=e.conditions)||void 0===t||!t.url)return!0;var i=null==Pc||null===(n=Pc.location)||void 0===n?void 0:n.href;if(!i)return!1;var s=[e.conditions.url];return Vm[zm(null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)](s,i)}(e),r=null===(t=e.conditions)||void 0===t||!t.selector||(null==Oc?void 0:Oc.querySelector(e.conditions.selector)),i=function(e){var t,n,r;if(null===(t=e.conditions)||void 0===t||!t.deviceTypes||0===(null===(n=e.conditions)||void 0===n?void 0:n.deviceTypes.length))return!0;if(!Uc)return!1;var i=Qf.deviceType(Uc);return Vm[zm(null===(r=e.conditions)||void 0===r?void 0:r.deviceTypesMatchType)](e.conditions.deviceTypes,i)}(e);return n&&r&&i})),i=null===(n=this._surveyEventReceiver)||void 0===n?void 0:n.getSurveys(),s=r.filter((e=>{var t,n,r,s,o,a,l,u,c;if(!(e.linked_flag_key||e.targeting_flag_key||e.internal_targeting_flag_key||null!==(t=e.feature_flag_keys)&&void 0!==t&&t.length))return!0;var h=this.isSurveyFeatureFlagEnabled(e.linked_flag_key),d=this.isSurveyFeatureFlagEnabled(e.targeting_flag_key),f=(null!==(n=null===(r=e.conditions)||void 0===r||null===(s=r.events)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>0,p=(null!==(a=null===(l=e.conditions)||void 0===l||null===(u=l.actions)||void 0===u||null===(c=u.values)||void 0===c?void 0:c.length)&&void 0!==a?a:0)>0,g=!f&&!p||(null==i?void 0:i.includes(e.id)),m=this._canActivateRepeatedly(e)||this.isSurveyFeatureFlagEnabled(e.internal_targeting_flag_key),v=this.checkFlags(e);return h&&d&&m&&g&&v}));return e(s)}),t)}checkFlags(e){var t;return null===(t=e.feature_flag_keys)||void 0===t||!t.length||e.feature_flag_keys.every((e=>{var{key:t,value:n}=e;return!t||!n||this.instance.featureFlags.isFeatureEnabled(n)}))}_canActivateRepeatedly(e){var t;return wh(null===(t=zc.__PosthogExtensions__)||void 0===t?void 0:t.canActivateRepeatedly)?($m.warn("init was not called"),!1):zc.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){wh(this._surveyManager)?$m.warn("init was not called"):this.getSurveys((t=>{var n=t.filter((t=>t.id===e))[0];this._surveyManager.canRenderSurvey(n)}))}renderSurvey(e,t){wh(this._surveyManager)?$m.warn("init was not called"):this.getSurveys((n=>{var r=n.filter((t=>t.id===e))[0];this._surveyManager.renderSurvey(r,null==Oc?void 0:Oc.querySelector(t))}))}}var qm=Nh("[RateLimiter]");class Hm{constructor(e){var t,n;Fh(this,"serverLimits",{}),Fh(this,"lastEventRateLimited",!1),Fh(this,"checkForLimiting",(e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((e=>{qm.info("".concat(e||"events"," is quota limited.")),this.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void qm.warn('could not rate limit - continuing. Error: "'.concat(null==e?void 0:e.message,'"'),{text:t})}})),this.instance=e,this.captureEventsPerSecond=(null===(t=e.config.rate_limiting)||void 0===t?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(n=e.config.rate_limiting)||void 0===n?void 0:n.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(new Date).getTime(),s=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(hd))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:i};s.tokens+=(i-s.last)/1e3*this.captureEventsPerSecond,s.last=i,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||r||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null===(n=this.instance.persistence)||void 0===n||n.set_property(hd,s),{isRateLimited:o,remainingTokens:s.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var Wm=e=>{var t=null==e?void 0:e.config;return Dh({initialPathName:(null==Mc?void 0:Mc.pathname)||"",referringDomain:Qf.referringDomain()},Qf.campaignParams({customTrackedParams:null==t?void 0:t.custom_campaign_params,maskPersonalDataProperties:null==t?void 0:t.mask_personal_data_properties,customPersonalDataProperties:null==t?void 0:t.custom_personal_data_properties}))};class Gm{constructor(e,t,n,r){Fh(this,"_onSessionIdCallback",(e=>{var t=this._getStoredProps();if(!t||t.sessionId!==e){var n={sessionId:e,props:this._sessionSourceParamGenerator(this.instance)};this._persistence.register({[cd]:n})}})),this.instance=e,this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||Wm,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[cd]}getSessionProps(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}var Km=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","better uptime bot","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","gptbot","oai-searchbot","chatgpt-user","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],Qm=function(e,t){if(!e)return!1;var n=e.toLowerCase();return Km.concat(t||[]).some((e=>{var t=e.toLowerCase();return-1!==n.indexOf(t)}))},Xm=function(e,t){if(!e)return!1;var n=e.userAgent;if(n&&Qm(n,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some((e=>Qm(null==e?void 0:e.brand,t))))return!0}catch(e){}return!!e.webdriver};class Ym{constructor(){this.clicks=[]}isRageClick(e,t,n){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&n-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:n}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:n}];return!1}}var Jm=Nh("[Dead Clicks]"),Zm=()=>!0,ev=e=>{var t,n=!(null===(t=e.instance.persistence)||void 0===t||!t.get_property(Bh)),r=e.instance.config.capture_dead_clicks;return kh(r)?r:n};class tv{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,t,n){this.instance=e,this.isEnabled=t,this.onCapture=n,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[Bh]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript((()=>{this.start()}))}loadScript(e){var t,n,r;null!==(t=zc.__PosthogExtensions__)&&void 0!==t&&t.initDeadClicksAutocapture&&e(),null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.loadExternalDependency)||void 0===r||r.call(n,this.instance,"dead-clicks-autocapture",(t=>{t?Jm.error("failed to load script",t):e()}))}start(){var e;if(Oc){if(!this._lazyLoadedDeadClicksAutocapture&&null!==(e=zc.__PosthogExtensions__)&&void 0!==e&&e.initDeadClicksAutocapture){var t=gh(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=zc.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this._lazyLoadedDeadClicksAutocapture.start(Oc),Jm.info("starting...")}}else Jm.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,Jm.info("stopping..."))}}var nv=Nh("[Heatmaps]");function rv(e){return gh(e)&&"clientX"in e&&"clientY"in e&&Sh(e.clientX)&&Sh(e.clientY)}class iv{constructor(e){var t;Fh(this,"rageclicks",new Ym),Fh(this,"_enabledServerSide",!1),Fh(this,"_initialized",!1),Fh(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[Vh])}get flushIntervalMilliseconds(){var e=5e3;return gh(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return vh(this.instance.config.capture_heatmaps)?vh(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;nv.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),null===(t=this.deadClicksCapture)||void 0===t||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Vh]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){Pc&&Oc&&(ih(Pc,"beforeunload",this.flush.bind(this)),ih(Oc,"click",(e=>this._onClick(e||(null==Pc?void 0:Pc.event))),{capture:!0}),ih(Oc,"mousemove",(e=>this._onMouseMove(e||(null==Pc?void 0:Pc.event))),{capture:!0}),this.deadClicksCapture=new tv(this.instance,Zm,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,t){var n=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),s=function(e,t,n){for(var r=e;r&&rp(r)&&!ip(r,"body");){if(r===n)return!1;if(sh(t,null==Pc?void 0:Pc.getComputedStyle(r).position))return!0;r=pp(r)}return!1}(dp(e),["fixed","sticky"],i);return{x:e.clientX+(s?0:r),y:e.clientY+(s?0:n),target_fixed:s,type:t}}_onClick(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";if(!np(e.target)&&rv(e)){var r=this._getProperties(e,n);null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(Dh(Dh({},r),{},{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){!np(e.target)&&rv(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((()=>{this._capture(this._getProperties(e,"mousemove"))}),500))}_capture(e){if(Pc){var t=Pc.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}flush(){this.buffer&&!mh(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class sv{constructor(e){Fh(this,"_updateScrollData",(()=>{var e,t,n,r;this.context||(this.context={});var i=this.scrollElement(),s=this.scrollY(),o=i?Math.max(0,i.scrollHeight-i.clientHeight):0,a=s+((null==i?void 0:i.clientHeight)||0),l=(null==i?void 0:i.scrollHeight)||0;this.context.lastScrollY=Math.ceil(s),this.context.maxScrollY=Math.max(s,null!==(e=this.context.maxScrollY)&&void 0!==e?e:0),this.context.maxScrollHeight=Math.max(o,null!==(t=this.context.maxScrollHeight)&&void 0!==t?t:0),this.context.lastContentY=a,this.context.maxContentY=Math.max(a,null!==(n=this.context.maxContentY)&&void 0!==n?n:0),this.context.maxContentHeight=Math.max(l,null!==(r=this.context.maxContentHeight)&&void 0!==r?r:0)})),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){ih(Pc,"scroll",this._updateScrollData,{capture:!0}),ih(Pc,"scrollend",this._updateScrollData,{capture:!0}),ih(Pc,"resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return null==Pc?void 0:Pc.document.documentElement;var e=fh(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var t of e){var n=null==Pc?void 0:Pc.document.querySelector(t);if(n)return n}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return Pc&&(Pc.scrollY||Pc.pageYOffset||Pc.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return Pc&&(Pc.scrollX||Pc.pageXOffset||Pc.document.documentElement.scrollLeft)||0}}var ov=Nh("[AutoCapture]");function av(e,t){return t.length>e?t.slice(0,e)+"...":t}function lv(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!rp(t));return t}function uv(e,t){for(var n,r,{e:i,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=t,u=[e],c=e;c.parentNode&&!ip(c,"body");)op(c.parentNode)?(u.push(c.parentNode.host),c=c.parentNode.host):(u.push(c.parentNode),c=c.parentNode);var h,d=[],f={},p=!1,g=!1;if(Kc(u,(e=>{var t=gp(e);"a"===e.tagName.toLowerCase()&&(p=e.getAttribute("href"),p=t&&p&&kp(p)&&p),sh(up(e),"ph-no-capture")&&(g=!0),d.push(function(e,t,n,r){var i=e.tagName.toLowerCase(),s={tag_name:i};fp.indexOf(i)>-1&&!n&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?s.$el_text=av(1024,Ep(e)):s.$el_text=av(1024,hp(e)));var o=up(e);o.length>0&&(s.classes=o.filter((function(e){return""!==e}))),Kc(e.attributes,(function(n){var i;if((!mp(e)||-1!==["name","id","class","aria-label"].indexOf(n.name))&&(null==r||!r.includes(n.name))&&!t&&kp(n.value)&&(i=n.name,!_h(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var o=n.value;"class"===n.name&&(o=ap(o).join(" ")),s["attr__"+n.name]=av(1024,o)}}));for(var a=1,l=1,u=e;u=lv(u);)a++,u.tagName===e.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}(e,s,o,a));var n=function(e){if(!gp(e))return{};var t={};return Kc(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var n=e.name.replace("data-ph-capture-attribute-",""),r=e.value;n&&r&&kp(r)&&(t[n]=r)}})),t}(e);Qc(f,n)})),g)return{props:{},explicitNoCapture:g};if(o||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?d[0].$el_text=Ep(e):d[0].$el_text=hp(e)),p){var m,v;d[0].attr__href=p;var _=null===(m=Wd(p))||void 0===m?void 0:m.host,y=null==Pc||null===(v=Pc.location)||void 0===v?void 0:v.host;_&&y&&_!==y&&(h=p)}return{props:Qc({$event_type:i.type,$ce_version:1},l?{}:{$elements:d},{$elements_chain:xp(d)},null!==(n=d[0])&&void 0!==n&&n.$el_text?{$el_text:null===(r=d[0])||void 0===r?void 0:r.$el_text}:{},h&&"click"===i.type?{$external_click_url:h}:{},f)}}class cv{constructor(e){Fh(this,"_initialized",!1),Fh(this,"_isDisabledServerSide",null),Fh(this,"rageclicks",new Ym),Fh(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,t,n=gh(this.instance.config.autocapture)?this.instance.config.autocapture:{};return n.url_allowlist=null===(e=n.url_allowlist)||void 0===e?void 0:e.map((e=>new RegExp(e))),n.url_ignorelist=null===(t=n.url_ignorelist)||void 0===t?void 0:t.map((e=>new RegExp(e))),n}_addDomEventHandlers(){if(this.isBrowserSupported()){if(Pc&&Oc){var e=e=>{e=e||(null==Pc?void 0:Pc.event);try{this._captureEvent(e)}catch(e){ov.error("Failed to capture event",e)}};if(ih(Oc,"submit",e,{capture:!0}),ih(Oc,"change",e,{capture:!0}),ih(Oc,"click",e,{capture:!0}),this.config.capture_copied_text){var t=e=>{e=e||(null==Pc?void 0:Pc.event),this._captureEvent(e,qc)};ih(Oc,"copy",t,{capture:!0}),ih(Oc,"cut",t,{capture:!0})}}}else ov.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[$h]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t,n=[];return null===(t=this._elementSelectors)||void 0===t||t.forEach((t=>{var r=null==Oc?void 0:Oc.querySelectorAll(t);null==r||r.forEach((r=>{e===r&&n.push(t)}))})),n}get isEnabled(){var e,t,n=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[$h],r=this._isDisabledServerSide;if(bh(r)&&!kh(n)&&!this.instance.config.advanced_disable_decide)return!1;var i=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!n;return!!this.instance.config.autocapture&&!i}_captureEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var n,r=dp(e);sp(r)&&(r=r.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(n=this.rageclicks)&&void 0!==n&&n.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var i=t===qc;if(r&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!Pc||!e||ip(e,"html")||!rp(e))return!1;if(null!=n&&n.url_allowlist&&!lp(n.url_allowlist))return!1;if(null!=n&&n.url_ignorelist&&lp(n.url_ignorelist))return!1;if(null!=n&&n.dom_event_allowlist){var s=n.dom_event_allowlist;if(s&&!s.some((e=>t.type===e)))return!1}for(var o=!1,a=[e],l=!0,u=e;u.parentNode&&!ip(u,"body");)if(op(u.parentNode))a.push(u.parentNode.host),u=u.parentNode.host;else{if(!(l=pp(u)))break;if(r||fp.indexOf(l.tagName.toLowerCase())>-1)o=!0;else{var c=Pc.getComputedStyle(l);c&&"pointer"===c.getPropertyValue("cursor")&&(o=!0)}a.push(l),u=l}if(!function(e,t){var n=null==t?void 0:t.element_allowlist;if(vh(n))return!0;var r=function(e){if(n.some((t=>e.tagName.toLowerCase()===t)))return{v:!0}};for(var i of e){var s=r(i);if("object"==typeof s)return s.v}return!1}(a,n))return!1;if(!function(e,t){var n=null==t?void 0:t.css_selector_allowlist;if(vh(n))return!0;var r=function(e){if(n.some((t=>e.matches(t))))return{v:!0}};for(var i of e){var s=r(i);if("object"==typeof s)return s.v}return!1}(a,n))return!1;var h=Pc.getComputedStyle(e);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===t.type)return!0;var d=e.tagName.toLowerCase();switch(d){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return o?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(fp.indexOf(d)>-1||"true"===e.getAttribute("contenteditable"))}}(r,e,this.config,i,i?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:o}=uv(r,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(o)return!1;var a=this.getElementSelectors(r);if(a&&a.length>0&&(s.$element_selectors=a),t===qc){var l,u=cp(null==Pc||null===(l=Pc.getSelection())||void 0===l?void 0:l.toString()),c=e.type||"clipboard";if(!u)return!1;s.$selected_content=u,s.$copy_type=c}return this.instance.capture(t,s),!0}}}isBrowserSupported(){return ph(null==Oc?void 0:Oc.querySelectorAll)}}var hv,dv=Nh("[TracingHeaders]");class fv{constructor(e){Fh(this,"_restoreXHRPatch",void 0),Fh(this,"_restoreFetchPatch",void 0),Fh(this,"_startCapturing",(()=>{var e,t,n,r;vh(this._restoreXHRPatch)&&(null===(e=zc.__PosthogExtensions__)||void 0===e||null===(t=e.tracingHeadersPatchFns)||void 0===t||t._patchXHR(this.instance.sessionManager)),vh(this._restoreFetchPatch)&&(null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.tracingHeadersPatchFns)||void 0===r||r._patchFetch(this.instance.sessionManager))})),this.instance=e}_loadScript(e){var t,n,r;null!==(t=zc.__PosthogExtensions__)&&void 0!==t&&t.tracingHeadersPatchFns&&e(),null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.loadExternalDependency)||void 0===r||r.call(n,this.instance,"tracing-headers",(t=>{if(t)return dv.error("failed to load script",t);e()}))}startIfEnabledOrStop(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(e=this._restoreXHRPatch)||void 0===e||e.call(this),null===(t=this._restoreFetchPatch)||void 0===t||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}!function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"}(hv||(hv={}));class pv{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?hv.DENIED:this.storedConsent}isOptedOut(){return this.consent===hv.DENIED||this.consent===hv.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:t}=this.instance.config;return(t||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return"1"===e?hv.GRANTED:"0"===e?hv.DENIED:hv.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===e?jd:Od;var t="localStorage"===e?Od:jd;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===t.get(this.storageKey)),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!rh([null==Lc?void 0:Lc.doNotTrack,null==Lc?void 0:Lc.msDoNotTrack,zc.doNotTrack],(e=>sh([!0,1,"1","yes"],e)))}}var gv=Nh("[ExceptionAutocapture]");class mv{constructor(e){var t;Fh(this,"startCapturing",(()=>{var e,t,n,r;if(Pc&&this.isEnabled&&!this.hasHandlers){var i=null===(e=zc.__PosthogExtensions__)||void 0===e||null===(t=e.errorWrappingFunctions)||void 0===t?void 0:t.wrapOnError,s=null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.errorWrappingFunctions)||void 0===r?void 0:r.wrapUnhandledRejection;if(i&&s)try{this.unwrapOnError=i(this.captureException.bind(this)),this.unwrapUnhandledRejection=s(this.captureException.bind(this))}catch(e){gv.error("failed to start",e),this.stopCapturing()}else gv.error("failed to load error wrapping functions - cannot start")}})),this.instance=e,this.remoteEnabled=!(null===(t=this.instance.persistence)||void 0===t||!t.props[Uh]),this.startIfEnabled()}get isEnabled(){var e;return kh(this.instance.config.capture_exceptions)?this.instance.config.capture_exceptions:null!==(e=this.remoteEnabled)&&void 0!==e&&e}get hasHandlers(){return!vh(this.unwrapOnError)}startIfEnabled(){this.isEnabled&&!this.hasHandlers&&(gv.info("enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var t,n;this.hasHandlers&&e(),null===(t=zc.__PosthogExtensions__)||void 0===t||null===(n=t.loadExternalDependency)||void 0===n||n.call(t,this.instance,"exception-autocapture",(t=>{if(t)return gv.error("failed to load script",t);e()}))}stopCapturing(){var e,t;null===(e=this.unwrapOnError)||void 0===e||e.call(this),this.unwrapOnError=void 0,null===(t=this.unwrapUnhandledRejection)||void 0===t||t.call(this),this.unwrapUnhandledRejection=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.remoteEnabled=!!t||!1,this.instance.persistence&&this.instance.persistence.register({[Uh]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(t,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var vv=Nh("[Web Vitals]"),_v=9e5;class yv{constructor(e){var t;Fh(this,"_enabledServerSide",!1),Fh(this,"_initialized",!1),Fh(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),Fh(this,"_flushToCapture",(()=>{clearTimeout(this._delayedFlushTimer),0!==this.buffer.metrics.length&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce(((e,t)=>Dh(Dh({},e),{},{["$web_vitals_".concat(t.name,"_event")]:Dh({},t),["$web_vitals_".concat(t.name,"_value")]:t.value})),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})})),Fh(this,"_addToBuffer",(e=>{var t,n=null===(t=this.instance.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0);if(vh(n))vv.error("Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=this._currentURL();vh(r)||(wh(null==e?void 0:e.name)||wh(null==e?void 0:e.value)?vv.error("Invalid metric received",e):this._maxAllowedValue&&e.value>=this._maxAllowedValue?vv.error("Ignoring metric with value >= "+this._maxAllowedValue,e):(this.buffer.url!==r&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),vh(this.buffer.url)&&(this.buffer.url=r),this.buffer.firstMetricTimestamp=vh(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(Dh(Dh({},e),{},{$current_url:r,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}})),Fh(this,"_startCapturing",(()=>{var e,t,n,r,i=zc.__PosthogExtensions__;vh(i)||vh(i.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:n,onINP:r}=i.postHogWebVitalsCallbacks),e&&t&&n&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this._addToBuffer.bind(this)),this._initialized=!0):vv.error("web vitals callbacks not loaded - not starting")})),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[zh]),this.startIfEnabled()}get allowedMetrics(){var e,t,n=gh(this.instance.config.capture_performance)?null===(e=this.instance.config.capture_performance)||void 0===e?void 0:e.web_vitals_allowed_metrics:void 0;return vh(n)?(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[qh])||["CLS","FCP","INP","LCP"]:n}get flushToCaptureTimeoutMs(){return(gh(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=gh(this.instance.config.capture_performance)&&Sh(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:_v;return 0<e&&e<=6e4?_v:e}get isEnabled(){var e=gh(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return kh(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(vv.info("enabled, starting..."),this.loadScript(this._startCapturing))}onRemoteConfig(e){var t=gh(e.capturePerformance)&&!!e.capturePerformance.web_vitals,n=gh(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[zh]:t}),this.instance.persistence.register({[qh]:n})),this._enabledServerSide=t,this.startIfEnabled()}loadScript(e){var t,n,r;null!==(t=zc.__PosthogExtensions__)&&void 0!==t&&t.postHogWebVitalsCallbacks&&e(),null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.loadExternalDependency)||void 0===r||r.call(n,this.instance,"web-vitals",(t=>{t?vv.error("failed to load script",t):e()}))}_currentURL(){var e=Pc?Pc.location.href:void 0;return e||vv.error("Could not determine current URL"),e}}var bv={icontains:(e,t)=>!!Pc&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!Pc&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!Pc&&lh(t.href,e),not_regex:(e,t)=>!!Pc&&!lh(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class wv{constructor(e){var t=this;Fh(this,"getWebExperimentsAndEvaluateDisplayLogic",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.getWebExperiments((e=>{wv.logInfo("retrieved web experiments from the server"),t._flagToExperiments=new Map,e.forEach((e=>{if(e.feature_flag_key){var n;t._flagToExperiments&&(wv.logInfo("setting flag key ",e.feature_flag_key," to web experiment ",e),null===(n=t._flagToExperiments)||void 0===n||n.set(e.feature_flag_key,e));var r=t.instance.getFeatureFlag(e.feature_flag_key);_h(r)&&e.variants[r]&&t.applyTransforms(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var i in e.variants){var s=e.variants[i];wv.matchesTestVariant(s)&&t.applyTransforms(e.name,i,s.transforms)}}))}),e)})),this.instance=e,this.instance.onFeatureFlags((e=>{this.onFeatureFlags(e)}))}onFeatureFlags(e){if(this._is_bot())wv.logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this.instance.config.disable_web_experiments){if(wh(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();wv.logInfo("applying feature flags",e),e.forEach((e=>{var t;if(this._flagToExperiments&&null!==(t=this._flagToExperiments)&&void 0!==t&&t.has(e)){var n,r=this.instance.getFeatureFlag(e),i=null===(n=this._flagToExperiments)||void 0===n?void 0:n.get(e);r&&null!=i&&i.variants[r]&&this.applyTransforms(i.name,r,i.variants[r].transforms)}}))}}previewWebExperiment(){var e=wv.getWindowLocation();if(null!=e&&e.search){var t=Gd(null==e?void 0:e.search,"__experiment_id"),n=Gd(null==e?void 0:e.search,"__experiment_variant");t&&n&&(wv.logInfo("previewing web experiments ".concat(t," && ").concat(n)),this.getWebExperiments((e=>{this.showPreviewWebExperiment(parseInt(t),n,e)}),!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,n){if(this.instance.config.disable_web_experiments&&!n)return e([]);var r=this.instance.get_property("$web_experiments");if(r&&!t)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var n=t.json.experiments||[];return e(n)}})}showPreviewWebExperiment(e,t,n){var r=n.filter((t=>t.id===e));r&&r.length>0&&(wv.logInfo("Previewing web experiment [".concat(r[0].name,"] with variant [").concat(t,"]")),this.applyTransforms(r[0].name,t,r[0].variants[t].transforms))}static matchesTestVariant(e){return!wh(e.conditions)&&wv.matchUrlConditions(e)&&wv.matchUTMConditions(e)}static matchUrlConditions(e){var t;if(wh(e.conditions)||wh(null===(t=e.conditions)||void 0===t?void 0:t.url))return!0;var n,r,i,s=wv.getWindowLocation();return!!s&&(null===(n=e.conditions)||void 0===n||!n.url||bv[null!==(r=null===(i=e.conditions)||void 0===i?void 0:i.urlMatchType)&&void 0!==r?r:"icontains"](e.conditions.url,s))}static getWindowLocation(){return null==Pc?void 0:Pc.location}static matchUTMConditions(e){var t;if(wh(e.conditions)||wh(null===(t=e.conditions)||void 0===t?void 0:t.utm))return!0;var n=Qf.campaignParams();if(n.utm_source){var r,i,s,o,a,l,u,c,h,d,f,p,g,m,v,_,y=null===(r=e.conditions)||void 0===r||null===(i=r.utm)||void 0===i||!i.utm_campaign||(null===(s=e.conditions)||void 0===s||null===(o=s.utm)||void 0===o?void 0:o.utm_campaign)==n.utm_campaign,b=null===(a=e.conditions)||void 0===a||null===(l=a.utm)||void 0===l||!l.utm_source||(null===(u=e.conditions)||void 0===u||null===(c=u.utm)||void 0===c?void 0:c.utm_source)==n.utm_source,w=null===(h=e.conditions)||void 0===h||null===(d=h.utm)||void 0===d||!d.utm_medium||(null===(f=e.conditions)||void 0===f||null===(p=f.utm)||void 0===p?void 0:p.utm_medium)==n.utm_medium,S=null===(g=e.conditions)||void 0===g||null===(m=g.utm)||void 0===m||!m.utm_term||(null===(v=e.conditions)||void 0===v||null===(_=v.utm)||void 0===_?void 0:_.utm_term)==n.utm_term;return y&&w&&S&&b}return!1}static logInfo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ih.info("[WebExperiments] ".concat(e),n)}applyTransforms(e,t,n){this._is_bot()?wv.logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?n.forEach((n=>{if(n.selector){var r;wv.logInfo("applying transform of variant ".concat(t," for experiment ").concat(e," "),n);var i=null===(r=document)||void 0===r?void 0:r.querySelectorAll(n.selector);null==i||i.forEach((e=>{var t=e;n.html&&(t.innerHTML=n.html),n.css&&t.setAttribute("style",n.css)}))}})):wv.logInfo("Control variants leave the page unmodified.")}_is_bot(){return Lc&&this.instance?Xm(Lc,this.instance.config.custom_blocked_useragents):void 0}}class Sv{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var kv=["$set_once","$set"],Ev=Nh("[SiteApps]");class Cv{constructor(e){this.instance=e,this.bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this.instance.config.opt_in_site_apps}eventCollector(e,t){if(t){var n=this.globalsForEvent(t);this.bufferedInvocations.push(n),this.bufferedInvocations.length>1e3&&(this.bufferedInvocations=this.bufferedInvocations.slice(10))}}get siteAppLoaders(){var e,t;return null===(e=zc._POSTHOG_REMOTE_CONFIG)||void 0===e||null===(t=e[this.instance.config.token])||void 0===t?void 0:t.siteApps}init(){if(this.isEnabled){var e=this.instance._addCaptureHook(this.eventCollector.bind(this));this.stopBuffering=()=>{e(),this.bufferedInvocations=[],this.stopBuffering=void 0}}}globalsForEvent(e){var t,n,r,i,s,o,a;if(!e)throw new Error("Event payload is required");var l={},u=this.instance.get_property("$groups")||[],c=this.instance.get_property("$stored_group_properties")||{};for(var[h,d]of Object.entries(c))l[h]={id:u[h],type:h,properties:d};var{$set_once:f,$set:p}=e;return{event:Dh(Dh({},Lh(e,kv)),{},{properties:Dh(Dh(Dh({},e.properties),p?{$set:Dh(Dh({},null!==(t=null===(n=e.properties)||void 0===n?void 0:n.$set)&&void 0!==t?t:{}),p)}:{}),f?{$set_once:Dh(Dh({},null!==(r=null===(i=e.properties)||void 0===i?void 0:i.$set_once)&&void 0!==r?r:{}),f)}:{}),elements_chain:null!==(s=null===(o=e.properties)||void 0===o?void 0:o.$elements_chain)&&void 0!==s?s:"",distinct_id:null===(a=e.properties)||void 0===a?void 0:a.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t={id:e.id,loaded:!1,errored:!1};this.apps[e.id]=t;var n=n=>{var r;for(var i of(this.apps[e.id].errored=!n,this.apps[e.id].loaded=!0,Ev.info("Site app with id ".concat(e.id," ").concat(n?"loaded":"errored")),n&&this.bufferedInvocations.length&&(Ev.info("Processing ".concat(this.bufferedInvocations.length," events for site app with id ").concat(e.id)),this.bufferedInvocations.forEach((e=>{var n;return null===(n=t.processEvent)||void 0===n?void 0:n.call(t,e)}))),Object.values(this.apps)))if(!i.loaded)return;null===(r=this.stopBuffering)||void 0===r||r.call(this)};try{var{processEvent:r}=e.init({posthog:this.instance,callback:e=>{n(e)}});r&&(t.processEvent=r)}catch(t){Ev.error("Error while initializing PostHog app with config id ".concat(e.id),t),n(!1)}}onCapturedEvent(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var n of Object.values(this.apps))try{var r;null===(r=n.processEvent)||void 0===r||r.call(n,t)}catch(t){Ev.error("Error while processing event ".concat(e.event," for site app ").concat(n.id),t)}}}onRemoteConfig(e){var t,n,r,i=this;if(null!==(t=this.siteAppLoaders)&&void 0!==t&&t.length){if(!this.isEnabled)return void Ev.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');for(var s of this.siteAppLoaders)this.setupSiteApp(s);this.instance.on("eventCaptured",(e=>this.onCapturedEvent(e)))}else if(null===(n=this.stopBuffering)||void 0===n||n.call(this),null!==(r=e.siteApps)&&void 0!==r&&r.length)if(this.isEnabled){var o=function(e,t){var n,r;zc["__$$ph_site_app_".concat(e)]=i.instance,null===(n=zc.__PosthogExtensions__)||void 0===n||null===(r=n.loadSiteApp)||void 0===r||r.call(n,i.instance,t,(t=>{if(t)return Ev.error("Error while initializing PostHog app with config id ".concat(e),t)}))};for(var{id:a,url:l}of e.siteApps)o(a,l)}else Ev.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}function xv(e,t,n){return $g({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:n})}var Tv={},Iv=()=>{},Nv="posthog",Pv=!Og&&-1===(null==Uc?void 0:Uc.indexOf("MSIE"))&&-1===(null==Uc?void 0:Uc.indexOf("Mozilla")),Rv=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:nh(null==Oc?void 0:Oc.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Iv,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Mc&&_h(null==Mc?void 0:Mc.search)&&-1!==Mc.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==Pc||null===(e=Pc.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;Ih.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:Fg},_onCapture:Iv}},Av=e=>{var t={};vh(e.process_person)||(t.person_profiles=e.process_person),vh(e.xhr_headers)||(t.request_headers=e.xhr_headers),vh(e.cookie_name)||(t.persistence_name=e.cookie_name),vh(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),vh(e.store_google)||(t.save_campaign_params=e.store_google),vh(e.verbose)||(t.debug=e.verbose);var n=Qc({},t,e);return fh(e.property_blacklist)&&(vh(e.property_denylist)?n.property_denylist=e.property_blacklist:fh(e.property_denylist)?n.property_denylist=[...e.property_blacklist,...e.property_denylist]:Ih.error("Invalid value for property_denylist config: "+e.property_denylist)),n};class Dv{constructor(){Fh(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){Ih.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Fv{get decideEndpointWasHit(){var e,t;return null!==(e=null===(t=this.featureFlags)||void 0===t?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){Fh(this,"webPerformance",new Dv),Fh(this,"version",Bc.LIB_VERSION),Fh(this,"_internalEventEmitter",new Om),this.config=Rv(),this.SentryIntegration=Yg,this.sentryIntegration=e=>function(e,t){var n=Xg(e,t);return{name:Qg,processEvent:e=>n(e)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this._cachedIdentify=null,this.featureFlags=new Cd(this),this.toolbar=new Dg(this),this.scrollManager=new sv(this),this.pageViewManager=new Zg(this),this.surveys=new Bm(this),this.experiments=new wv(this),this.exceptions=new Sv(this),this.rateLimiter=new Hm(this),this.requestRouter=new Kg(this),this.consent=new pv(this),this.people={set:(e,t,n)=>{var r=_h(e)?{[e]:t}:e;this.setPersonProperties(r),null==n||n({})},set_once:(e,t,n)=>{var r=_h(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==n||n({})}},this.on("eventCaptured",(e=>Ih.info('send "'.concat(null==e?void 0:e.event,'"'),e)))}init(e,t,n){if(n&&n!==Nv){var r,i=null!==(r=Tv[n])&&void 0!==r?r:new Fv;return i._init(e,t,n),Tv[n]=i,Tv[Nv][n]=i,i}return this._init(e,t,n)}_init(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(vh(e)||yh(e))return Ih.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ih.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],r.person_profiles&&(this._initialPersonProfilesConfig=r.person_profiles),this.set_config(Qc({},Rv(),Av(r),{name:i,token:e})),this.config.on_xhr_error&&Ih.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=r.disable_compression?void 0:Nc.GZipJS,this.persistence=new Yf(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Yf(Dh(Dh({},this.config),{},{persistence:"sessionStorage"}));var s=Dh({},this.persistence.props),o=Dh({},this.sessionPersistence.props);if(this._requestQueue=new Lg((e=>this._send_retriable_request(e)),this.config.request_queue_config),this._retryQueue=new Bg(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new Wg(this),this.sessionPropsManager=new Gm(this,this.sessionManager,this.persistence)),new fv(this).startIfEnabledOrStop(),this.siteApps=new Cv(this),null===(t=this.siteApps)||void 0===t||t.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new xg(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new cv(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new iv(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new yv(this),this.exceptionObserver=new mv(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new tv(this,ev),this.deadClicksAutocapture.startIfEnabled(),Bc.DEBUG=Bc.DEBUG||this.config.debug,Bc.DEBUG&&Ih.info("Starting in debug mode",{this:this,config:r,thisC:Dh({},this.config),p:s,s:o}),this._sync_opt_out_with_persistence(),void 0!==(null===(n=r.bootstrap)||void 0===n?void 0:n.distinctID)){var a,l,u=this.config.get_device_id(Ad()),c=null!==(a=r.bootstrap)&&void 0!==a&&a.isIdentifiedID?u:r.bootstrap.distinctID;this.persistence.set_property(ud,null!==(l=r.bootstrap)&&void 0!==l&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:r.bootstrap.distinctID,$device_id:c})}if(this._hasBootstrappedFeatureFlags()){var h,d,f=Object.keys((null===(h=r.bootstrap)||void 0===h?void 0:h.featureFlags)||{}).filter((e=>{var t,n;return!(null===(t=r.bootstrap)||void 0===t||null===(n=t.featureFlags)||void 0===n||!n[e])})).reduce(((e,t)=>{var n,i;return e[t]=(null===(n=r.bootstrap)||void 0===n||null===(i=n.featureFlags)||void 0===i?void 0:i[t])||!1,e}),{}),p=Object.keys((null===(d=r.bootstrap)||void 0===d?void 0:d.featureFlagPayloads)||{}).filter((e=>f[e])).reduce(((e,t)=>{var n,i,s,o;return null!==(n=r.bootstrap)&&void 0!==n&&null!==(i=n.featureFlagPayloads)&&void 0!==i&&i[t]&&(e[t]=null===(s=r.bootstrap)||void 0===s||null===(o=s.featureFlagPayloads)||void 0===o?void 0:o[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:f,featureFlagPayloads:p})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:vd,$device_id:null},"");else if(!this.get_distinct_id()){var g=this.config.get_device_id(Ad());this.register_once({distinct_id:g,$device_id:g},""),this.persistence.set_property(ud,"anonymous")}return ih(Pc,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),r.segment?function(e,t){var n=e.config.segment;if(!n)return t();!function(e,t){var n=e.config.segment;if(!n)return t();var r=n=>{var r=()=>n.anonymousId()||Ad();e.config.get_device_id=r,n.id()&&(e.register({distinct_id:n.id(),$device_id:r()}),e.persistence.set_property(ud,"identified")),t()},i=n.user();"then"in i&&ph(i.then)?i.then((e=>r(e))):r(i)}(e,(()=>{n.register((e=>{Promise&&Promise.resolve||Jg.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,n)=>{var r;if(!n)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(Jg.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(Jg.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var i=e._calculate_event_properties(n,null!==(r=t.event.properties)&&void 0!==r?r:{},new Date);return t.event.properties=Object.assign({},i,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then((()=>{t()}))}))}(this,(()=>this._loaded())):this._loaded(),ph(this.config._onCapture)&&this.config._onCapture!==Iv&&(Ih.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(e=>this.config._onCapture(e.event,e)))),this}_onRemoteConfig(e){var t,n,r,i,s,o,a,l;if(!Oc||!Oc.body)return Ih.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this._onRemoteConfig(e)}),500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=sh(e.supportedCompression,Nc.GZipJS)?Nc.GZipJS:sh(e.supportedCompression,Nc.Base64)?Nc.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:"identified_only"}),null===(n=this.siteApps)||void 0===n||n.onRemoteConfig(e),null===(r=this.sessionRecording)||void 0===r||r.onRemoteConfig(e),null===(i=this.autocapture)||void 0===i||i.onRemoteConfig(e),null===(s=this.heatmaps)||void 0===s||s.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null===(o=this.webVitalsAutocapture)||void 0===o||o.onRemoteConfig(e),null===(a=this.exceptionObserver)||void 0===a||a.onRemoteConfig(e),null===(l=this.deadClicksAutocapture)||void 0===l||l.onRemoteConfig(e)}_loaded(){try{this.config.loaded(this)}catch(Nc){Ih.critical("`loaded` function failed",Nc)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((()=>{this.consent.isOptedIn()&&this._captureInitialPageview()}),1),new Ig(this).load(),this.featureFlags.decide()}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||Gc(this.__request_queue,(e=>this._send_retriable_request(e))),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(Pv?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=jg(e.url,{ip:this.config.ip?1:0}),e.headers=Dh({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,n,r,i=Dh({},e);i.timeout=i.timeout||6e4,i.url=jg(i.url,{_:(new Date).getTime().toString(),ver:Bc.LIB_VERSION,compression:i.compression});var s=null!==(t=i.transport)&&void 0!==t?t:"fetch",o=null!==(n=null===(r=rh(Ug,(e=>e.transport===s)))||void 0===r?void 0:r.method)&&void 0!==n?n:Ug[0].method;if(!o)throw new Error("No available transport method");o(i)})(Dh(Dh({},e),{},{callback:t=>{var n,r,i;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null===(r=(i=this.config).on_request_error)||void 0===r||r.call(i,t)),null===(n=e.callback)||void 0===n||n.call(e,t)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,n=[],r=[],i=[];Gc(e,(e=>{e&&(t=e[0],fh(t)?i.push(e):ph(e)?e.call(this):fh(e)&&"alias"===t?n.push(e):fh(e)&&-1!==t.indexOf("capture")&&ph(this[t])?i.push(e):r.push(e))}));var s=function(e,t){Gc(e,(function(e){if(fh(e[0])){var n=t;Kc(e,(function(e){n=n[e[0]].apply(n,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};s(n,this),s(r,this),s(i,this)}_hasBootstrappedFeatureFlags(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,n){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!vh(e)&&_h(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var i=null!=n&&n.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==i||!i.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,o=(null==n?void 0:n.timestamp)||s,a=Ad(),l={uuid:a,event:e,properties:this._calculate_event_properties(e,t||{},o,a)};i&&(l.properties.$lib_rate_limit_remaining_tokens=i.remainingTokens),(null==n?void 0:n.$set)&&(l.$set=null==n?void 0:n.$set);var u=this._calculate_set_once_properties(null==n?void 0:n.$set_once);u&&(l.$set_once=u),(l=function(e,t){return n=e,r=e=>_h(e)&&!bh(t)?e.slice(0,t):e,i=new Set,function e(t,n){return t!==Object(t)?r?r(t):t:i.has(t)?void 0:(i.add(t),fh(t)?(s=[],Gc(t,(t=>{s.push(e(t))}))):(s={},Kc(t,((t,n)=>{i.has(t)||(s[n]=e(t,n))}))),s);var s}(n);var n,r,i}(l,null!=n&&n._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,vh(null==n?void 0:n.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=s);var c=Dh(Dh({},l.properties.$set),l.$set);if(mh(c)||this.setPersonPropertiesForFlags(c),!wh(this.config.before_send)){var h=this._runBeforeSend(l);if(!h)return;l=h}this._internalEventEmitter.emit("eventCaptured",l);var d={method:"POST",url:null!==(r=null==n?void 0:n._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:null==n?void 0:n._batchKey};return!this.config.request_batching||n&&(null==n||!n._batchKey)||null!=n&&n.send_instantly?this._send_retriable_request(d):this._requestQueue.enqueue(d),l}Ih.critical("This capture call is ignored due to client rate limiting.")}}else Ih.error("No event name provided to posthog.capture")}else Ih.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",(t=>e(t.event,t)))}_calculate_event_properties(e,t,n,r){if(n=n||new Date,!this.persistence||!this.sessionPersistence)return t;var i=this.persistence.remove_event_timer(e),s=Dh({},t);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),"$snapshot"===e){var o=Dh(Dh({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!_h(s.distinct_id)&&!Sh(s.distinct_id)||yh(s.distinct_id))&&Ih.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a,l=Qf.properties({maskPersonalDataProperties:this.config.mask_personal_data_properties,customPersonalDataProperties:this.config.custom_personal_data_properties});if(this.sessionManager){var{sessionId:u,windowId:c}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=u,s.$window_id=c}if(this.sessionRecording&&(s.$recording_status=this.sessionRecording.status),this.requestRouter.region===qg.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),a="$pageview"===e?this.pageViewManager.doPageView(n,r):"$pageleave"===e?this.pageViewManager.doPageLeave(n):this.pageViewManager.doEvent(),s=Qc(s,a),"$pageview"===e&&Oc&&(s.title=Oc.title),!vh(i)){var h=n.getTime()-i;s.$duration=parseFloat((h/1e3).toFixed(3))}Uc&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Qc({},l,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),fh(this.config.property_denylist)?Kc(this.config.property_denylist,(function(e){delete s[e]})):Ih.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var d=this.config.sanitize_properties;d&&(Ih.error("sanitize_properties is deprecated. Use before_send instead"),s=d(s,e));var f=this._hasPersonProcessing();return s.$process_person_profile=f,f&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=Qc({},this.persistence.get_initial_props(),e||{}),n=this.config.sanitize_properties;return n&&(Ih.error("sanitize_properties is deprecated. Use before_send instead"),t=n(t,"$set_once")),mh(t)?void 0:t}register(e,t){var n;null===(n=this.persistence)||void 0===n||n.register(e,t)}register_once(e,t,n){var r;null===(r=this.persistence)||void 0===r||r.register_once(e,t,n)}register_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}unregister(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}unregister_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var t,n;return null!==(t=null===(n=this.sessionManager)||void 0===n?void 0:n.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,t,n){return this.surveys.getNextSurveyStep(e,t,n)}identify(e,t,n){if(!this.__loaded||!this.persistence)return Ih.uninitializedWarning("posthog.identify");if(Sh(e)&&(e=e.toString(),Ih.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ih.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==r&&e!==this.get_property(Mh)&&(this.unregister(Mh),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property(ud)||"anonymous");e!==r&&s?(this.persistence.set_property(ud,"identified"),this.setPersonPropertiesForFlags(Dh(Dh({},n||{}),t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:n||{}}),this.featureFlags.setAnonymousDistinctId(r),this._cachedIdentify=xv(e,t,n)):(t||n)&&(this._cachedIdentify!==xv(e,t,n)?(this.setPersonProperties(t,n),this._cachedIdentify=xv(e,t,n)):Ih.info("A duplicate posthog.identify call was made with the same properties. It has been ignored.")),e!==r&&(this.reloadFeatureFlags(),this.unregister(ld))}}else Ih.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(Dh(Dh({},t||{}),e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}))}group(e,t,n){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Dh(Dh({},r),{},{[e]:t})}),n&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:n}),this.setGroupPropertiesForFlags({[e]:n})),r[e]===t||n||this.reloadFeatureFlags()}}else Ih.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,n,r,i;if(Ih.info("reset"),!this.__loaded)return Ih.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),null===(t=this.persistence)||void 0===t||t.clear(),null===(n=this.sessionPersistence)||void 0===n||n.clear(),this.surveys.reset(),null===(r=this.persistence)||void 0===r||r.set_property(ud,"anonymous"),null===(i=this.sessionManager)||void 0===i||i.resetSessionId(),this._cachedIdentify=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:vd,$device_id:null},"");else{var o=this.config.get_device_id(Ad());this.register_once({distinct_id:o,$device_id:e?o:s},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(t));if(null!=e&&e.withTimestamp&&n){var i,s=null!==(i=e.timestampLookBack)&&void 0!==i?i:10;if(!n)return r;var o=Math.max(Math.floor(((new Date).getTime()-n)/1e3)-s,0);r+="?t=".concat(o)}return r}alias(e,t){return e===this.get_property(Oh)?(Ih.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(vh(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Mh,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Ih.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t,n,r,i,s=Dh({},this.config);gh(e)&&(Qc(this.config,Av(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Yf(Dh(Dh({},this.config),{},{persistence:"sessionStorage"})),jd.is_supported()&&"true"===jd.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(Bc.DEBUG=!0,Ih.info("set_config",{config:e,oldConfig:s,newConfig:Dh({},this.config)})),null===(n=this.sessionRecording)||void 0===n||n.startIfEnabledOrStop(),null===(r=this.autocapture)||void 0===r||r.startIfEnabled(),null===(i=this.heatmaps)||void 0===i||i.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var t,n,r,i,s,o=!0===e,a={sampling:o||!(null==e||!e.sampling),linked_flag:o||!(null==e||!e.linked_flag),url_trigger:o||!(null==e||!e.url_trigger),event_trigger:o||!(null==e||!e.event_trigger)};Object.values(a).some(Boolean)&&(null===(t=this.sessionManager)||void 0===t||t.checkAndGetSessionAndWindowId(),a.sampling&&(null===(n=this.sessionRecording)||void 0===n||n.overrideSampling()),a.linked_flag&&(null===(r=this.sessionRecording)||void 0===r||r.overrideLinkedFlag()),a.url_trigger&&(null===(i=this.sessionRecording)||void 0===i||i.overrideTrigger("url")),a.event_trigger&&(null===(s=this.sessionRecording)||void 0===s||s.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}captureException(e,t){var n,r=new Error("PostHog syntheticException"),i=ph(null===(n=zc.__PosthogExtensions__)||void 0===n?void 0:n.parseErrorAsProperties)?Dh(Dh({},zc.__PosthogExtensions__.parseErrorAsProperties(Ch(e)?{error:e,event:e.message}:{event:e},{syntheticException:r})),t):Dh({$exception_level:"error",$exception_list:[{type:Ch(e)?e.name:"Error",value:Ch(e)?e.message:e,mechanism:{handled:!0,synthetic:!1}}]},t);this.exceptions.sendExceptionEvent(i)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}getSessionProperty(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:Nv;return t!==Nv&&(t=Nv+"."+t),t}_isIdentified(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(ud))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(ud))}_hasPersonProcessing(){var e,t,n,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&mh(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[Mh])&&(null===(n=this.persistence)||void 0===n||null===(r=n.props)||void 0===r||!r[gd]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return"never"===this.config.person_profiles?(Ih.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(gd,!0),!0)}_sync_opt_out_with_persistence(){var e,t,n,r,i=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,o=this.config.disable_persistence||i&&!!s;(null===(e=this.persistence)||void 0===e?void 0:e.disabled)!==o&&(null===(n=this.persistence)||void 0===n||n.set_disabled(o)),(null===(t=this.sessionPersistence)||void 0===t?void 0:t.disabled)!==o&&(null===(r=this.sessionPersistence)||void 0===r||r.set_disabled(o))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(vh(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Lc?Xm(Lc,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Oc&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Oc.title},{send_instantly:!0}))}debug(e){!1===e?(null==Pc||Pc.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==Pc||Pc.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(wh(this.config.before_send))return e;var t=fh(this.config.before_send)?this.config.before_send:[this.config.before_send],n=e;for(var r of t){if(n=r(n),wh(n)){var i="Event '".concat(e.event,"' was rejected in beforeSend function");return xh(e.event)?Ih.warn("".concat(i,". This can cause unexpected behavior.")):Ih.info(i),null}n.properties&&!mh(n.properties)||Ih.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return n}getPageViewId(){var e;return null===(e=this.pageViewManager._currentPageview)||void 0===e?void 0:e.pageViewId}}!function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=Zc(e.prototype[t[n]])}(Fv,["identify"]);var Lv,Ov=(Lv=Tv[Nv]=new Fv,function(){function e(){e.done||(e.done=!0,Pv=!1,Kc(Tv,(function(e){e._dom_loaded()})))}null!=Oc&&Oc.addEventListener?"complete"===Oc.readyState?e():ih(Oc,"DOMContentLoaded",e,{capture:!1}):Pc&&Ih.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Lv);const Mv=()=>{Ov.init("phc_gaex6n8piCE8xkDEq6IPAmvkNBFinGBZkilZXfsuTnG",{api_host:"https://us.i.posthog.com",person_profiles:"always"})};const jv=function(){const{significantChanges:e,timeframe:t,loading:n}=Sc(),{isMobile:r,selectedCategory:i}=ic(),{risers:s,fallers:o}=e,a={hourly:"hour",halfday:"12 hours",daily:"day",threedays:"3 days",weekly:"week"}[t]||"period",l=`No significant rank changes in past ${a.toLowerCase()}${i?` for ${i}`:""}`;return n?(0,nc.jsx)("div",{className:"movers-and-shakers loading",children:(0,nc.jsx)("h3",{children:"Loading rank changes..."})}):0===s.length&&0===o.length?(0,nc.jsx)("div",{className:"movers-and-shakers empty",children:(0,nc.jsx)("p",{children:l})}):(0,nc.jsx)("div",{className:"movers-and-shakers",children:(0,nc.jsx)("div",{className:"movers-container",children:(0,nc.jsxs)("div",{className:"movers-section risers",children:[(0,nc.jsxs)("h4",{children:["Fastest Risers in past ",a,i?` for ${i}`:""]}),s.length>0?(0,nc.jsx)("ul",{children:s.slice(0,r?3:5).map((e=>(0,nc.jsxs)("li",{children:[!i&&(0,nc.jsxs)("span",{className:"competitor-category",children:["[",e.category,"]"]}),(0,nc.jsx)("span",{className:"competitor-name",children:e.name}),(0,nc.jsxs)("span",{className:"rank-change up",children:["\u2191 ",e.rankChange]}),(0,nc.jsxs)("span",{className:"current-rank",children:["Now #",e.rank]})]},e.competitorNo)))}):(0,nc.jsx)("p",{className:"no-changes",children:l})]})})})};const $v=function(e){let{change:t}=e;if("new"===t)return(0,nc.jsx)("div",{className:"rank-change-indicator new",title:"New competitor",children:(0,nc.jsx)("span",{className:"rank-change-icon",children:"NEW"})});const n=t>4?{icon:"\u2191\u2191",color:"green",label:"Rising fast",className:"rising-fast"}:t>0?{icon:"\u2191",color:"lightgreen",label:"Rising",className:"rising"}:t<-4?{icon:"\u2193\u2193",color:"red",label:"Falling fast",className:"falling-fast"}:t<0?{icon:"\u2193",color:"pink",label:"Falling",className:"falling"}:{icon:"\u2212",color:"gray",label:"Unchanged",className:"unchanged"};return(0,nc.jsxs)("div",{className:`rank-change-indicator ${n.className}`,title:`${Math.abs(t)} positions ${t>0?"up":t<0?"down":"unchanged"}`,children:[(0,nc.jsx)("span",{className:"rank-change-icon",children:n.icon}),0!==t&&(0,nc.jsx)("span",{className:"rank-change-value",children:Math.abs(t)})]})};const Vv=function(){const{timeframe:e,setTimeframe:t,loading:n}=Sc();return(0,nc.jsxs)("div",{className:"rank-change-period-selector",children:[(0,nc.jsx)("label",{children:"Show rank changes for: "}),(0,nc.jsxs)("select",{value:e,onChange:n=>{const r=n.target.value;t(r),Ov.capture("rank_timeframe_changed",{component:"RankChangePeriodSelector",previous_timeframe:e,new_timeframe:r})},disabled:n,children:[(0,nc.jsx)("option",{value:"hourly",children:"Last hour"}),(0,nc.jsx)("option",{value:"halfday",children:"Last 12 hours"}),(0,nc.jsx)("option",{value:"daily",children:"Last day"}),(0,nc.jsx)("option",{value:"threedays",children:"Last 3 days"}),(0,nc.jsx)("option",{value:"weekly",children:"Last 7 days"})]})]})};const Uv=function(e){var t;let{scores:n=[],limitScores:i=!0,categoryPumpfestTopScores:s=0,flashExtraPoints:o=0,isMobile:a=!1}=e;const{toggleRow:l,isRowExpanded:u}=fc(),{problems:c}=lc(),h=null===(t=n[0])||void 0===t?void 0:t.competitorNo,d=i?n.slice(0,s):n;return(0,nc.jsxs)("table",{border:"1",className:"subTable",style:{width:"100%"},children:[(0,nc.jsx)("thead",{children:(0,nc.jsxs)("tr",{className:"subTableHeader",children:[(0,nc.jsxs)("th",{children:["Problem",!a&&" No."]}),(0,nc.jsxs)("th",{children:["Name",!a&&"/Grade"]}),(0,nc.jsx)("th",{children:"Flashed?"}),(0,nc.jsxs)("th",{children:["Points",!a&&" (+ Flash Bonus)"]}),(0,nc.jsx)("th",{children:"Sent"})]})}),(0,nc.jsx)("tbody",{children:d.length>0?d.map(((e,t)=>{var n,i;return(0,nc.jsxs)(r.Fragment,{children:[(0,nc.jsxs)("tr",{onClick:()=>l(e.climbNo),style:{cursor:"pointer"},children:[(0,nc.jsx)("td",{children:e.climbNo}),(0,nc.jsx)("td",{children:e.marking}),(0,nc.jsx)("td",{children:e.flashed?"Y":""}),(0,nc.jsxs)("td",{children:[e.score,e.flashed?` (+${o})`:""]}),(0,nc.jsx)("td",{title:Gu(e.createdAt),children:Wu(e.createdAt)})]}),u(e.climbNo)&&(null===(n=c[e.climbNo])||void 0===n?void 0:n.sends)&&(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:"5",children:(0,nc.jsxs)("div",{style:{padding:"8px"},children:[(0,nc.jsxs)("h4",{children:["Other Sends for Problem ",e.climbNo]}),(0,nc.jsx)(_c,{sends:((null===(i=c[e.climbNo])||void 0===i?void 0:i.sends)||[]).filter((e=>e.competitorNo!==h)),isMobile:a})]})})})]},t)})):(0,nc.jsx)("tr",{children:(0,nc.jsx)("td",{colSpan:"5",children:"No scores available"})})})]})};const zv=function(e){let{onRecommendClick:t}=e;const[n,i]=(0,r.useState)(""),{selectedCategory:s,limitScores:o,isMobile:a}=ic(),{userTableData:l,categories:u,loading:c,loadingProgress:h,partialDataAvailable:d}=lc(),{rankChanges:f}=Sc(),{expandedRows:p,toggleRow:g}=fc(),m=(0,r.useMemo)((()=>f.length?l.map((e=>{const t=f.find((t=>t.competitorNo===e.competitorNo));return{...e,rankChange:t?t.rankChange:0,previousRank:t?t.previousRank:e.rank,scoreChange:t?t.scoreChange:0}})):l),[l,f]),v=(0,r.useMemo)((()=>m.filter((e=>!s||e.categoryFullName===s)).map(((e,t)=>({...e,categoryIndex:t}))).filter((e=>!(n&&!e.name.toLowerCase().includes(n.toLowerCase()))))),[m,s,n]);((e,t)=>{const{component:n,field:i,resultsCount:s,debounceTime:o=1e3}=t,a=(0,r.useRef)(null),l=(0,r.useRef)(!1);(0,r.useEffect)((()=>(a.current&&clearTimeout(a.current),e?(l.current||(Ov.capture("search_started",{component:n,field:i}),l.current=!0),a.current=setTimeout((()=>{const t="function"===typeof s?s():s;Ov.capture("search_completed",{component:n,field:i,search_term:e,results_count:t})}),o)):l.current=!1,()=>{a.current&&clearTimeout(a.current)})),[e,n,i,s,o])})(n,{component:"UserTable",field:"search_by_name",resultsCount:v.length,debounceTime:800});const _=[{key:"categoryIndex",label:"#",sortable:!1,render:e=>a?(0,nc.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,nc.jsx)("span",{children:e.categoryIndex+1}),(0,nc.jsx)($v,{change:e.rankChange})]}):e.categoryIndex+1},...a?[]:[{key:"rankChange",label:"Change",sortable:!0,render:e=>(0,nc.jsx)($v,{change:e.rankChange})}],...s?[]:[{key:"categoryFullName",label:"Category",sortable:!0}],{key:"name",label:"Name",sortable:!0},{key:"tops",label:"Tops",sortable:!0},{key:"flashes",label:"Flashes",sortable:!0},{key:"total",label:"Score"+(a?"":"(+ Flash Bonus)"),sortable:!0,render:e=>(0,nc.jsxs)("span",{children:[e.total-e.bonus," ",e.bonus>0?`(+${e.bonus})`:""]})}];return(0,nc.jsxs)(nc.Fragment,{children:[(0,nc.jsx)("div",{className:"filters",children:(0,nc.jsx)(Vv,{})}),(0,nc.jsx)(jv,{}),(0,nc.jsxs)("div",{className:"search-container",style:{marginTop:"4px",display:"flex",alignItems:"center",maxWidth:"450px",position:"relative"},children:[(0,nc.jsx)("span",{style:{position:"absolute",left:"10px",color:"#666",fontSize:"16px"},children:"\ud83d\udd0d"}),(0,nc.jsx)("input",{type:"text",placeholder:"Search by name...",value:n,onChange:e=>i(e.target.value),style:{padding:"8px 12px 8px 32px",borderRadius:"4px",border:"1px solid #ccc",width:"100%",fontSize:"14px"}}),n&&(0,nc.jsx)("button",{onClick:()=>i(""),style:{position:"absolute",right:"10px",background:"none",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"bold",color:"#dd7777"},"aria-label":"Clear search",children:"\u2715"})]}),(0,nc.jsx)(xc,{columns:_,data:v,initialSort:{key:"total",direction:"desc"},rowKey:"competitorNo",onRowClick:e=>g(e),renderExpandedContent:e=>{var n;return(0,nc.jsxs)(nc.Fragment,{children:[(0,nc.jsx)(Uv,{scores:e.scores,limitScores:o,categoryPumpfestTopScores:null===(n=u[e.category])||void 0===n?void 0:n.pumpfestTopScores,flashExtraPoints:e.flashExtraPoints,isMobile:a}),(0,nc.jsx)("div",{className:"recommendedBtnContainer",children:(0,nc.jsx)("button",{id:"recommended-btn",onClick:n=>{n.stopPropagation(),Ov.capture("recommend_problems_clicked",{component:"UserTable",user_category:e.category,user_name:e.name,user_rank:e.rank}),t&&t(e)},children:"Recommend Problems \u2728"})})]})},expandedRows:p,loading:c,loadingProgress:h,partialDataAvailable:d,emptyMessage:s?"No users in this category":"No users available"})]})};const Bv=function(){const{setRecommendModalUser:e}=ic();return(0,nc.jsxs)(nc.Fragment,{children:[(0,nc.jsx)(zv,{onRecommendClick:e}),(0,nc.jsx)(Ec,{})]})};function qv(){Mv();const{selectedCompId:e,compNotFoundMessage:t,focusView:n,recommendModalUser:r,setRecommendModalUser:i}=ic();return(0,nc.jsxs)("div",{className:"app",children:[(0,nc.jsx)("h1",{children:"FingerComps Extended"}),(0,nc.jsx)("div",{className:"filters",children:(0,nc.jsx)(hc,{})}),(0,nc.jsx)("div",{className:"filters",children:(0,nc.jsx)(dc,{})}),t&&(0,nc.jsx)("div",{style:{margin:"20px 0",padding:"10px",backgroundColor:"#fff3cd",color:"#856404",borderRadius:"4px"},children:t}),e&&(0,nc.jsx)(uc,{competitionId:e,children:(0,nc.jsxs)(kc,{children:[(0,nc.jsx)("div",{className:"filters",children:(0,nc.jsx)(cc,{})}),"user"===n?(0,nc.jsx)(Bv,{}):(0,nc.jsx)(Ic,{}),r&&(0,nc.jsx)(yc,{onClose:()=>i(null),user:r})]})}),(0,nc.jsx)("footer",{className:"footer",children:(0,nc.jsxs)("p",{children:[(0,nc.jsx)("a",{href:"https://github.com/latiosu/fingercomps-extended",target:"_blank",rel:"noopener noreferrer",children:"Open-source"})," and made with love by ",(0,nc.jsx)("a",{href:"https://www.instagram.com/eric.c.liu/",target:"_blank",rel:"noopener noreferrer",children:"Eric Liu"})," \u2764\ufe0f"]})})]})}const Hv=function(){return(0,nc.jsx)(sc,{children:(0,nc.jsx)(qv,{})})},Wv=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,nc.jsx)(r.StrictMode,{children:(0,nc.jsx)(Hv,{})})),Wv()})();
//# sourceMappingURL=main.c3284cc4.js.map